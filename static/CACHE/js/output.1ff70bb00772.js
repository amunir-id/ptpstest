/*! jQuery v3.7.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(ie,e){"use strict";var oe=[],r=Object.getPrototypeOf,ae=oe.slice,g=oe.flat?function(e){return oe.flat.call(e)}:function(e){return oe.concat.apply([],e)},s=oe.push,se=oe.indexOf,n={},i=n.toString,ue=n.hasOwnProperty,o=ue.toString,a=o.call(Object),le={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},y=function(e){return null!=e&&e===e.window},C=ie.document,u={type:!0,src:!0,nonce:!0,noModule:!0};function m(e,t,n){var r,i,o=(n=n||C).createElement("script");if(o.text=e,t)for(r in u)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[i.call(e)]||"object":typeof e}var t="3.7.1",l=/HTML$/i,ce=function(e,t){return new ce.fn.init(e,t)};function c(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!v(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function fe(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}ce.fn=ce.prototype={jquery:t,constructor:ce,length:0,toArray:function(){return ae.call(this)},get:function(e){return null==e?ae.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ce.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ce.each(this,e)},map:function(n){return this.pushStack(ce.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(ae.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(ce.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(ce.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:oe.sort,splice:oe.splice},ce.extend=ce.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||v(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(ce.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||ce.isPlainObject(n)?n:{},i=!1,a[t]=ce.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},ce.extend({expando:"jQuery"+(t+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==i.call(e))&&(!(t=r(e))||"function"==typeof(n=ue.call(t,"constructor")&&t.constructor)&&o.call(n)===a)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){m(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(c(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,i=e.nodeType;if(!i)while(t=e[r++])n+=ce.text(t);return 1===i||11===i?e.textContent:9===i?e.documentElement.textContent:3===i||4===i?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(c(Object(e))?ce.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:se.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!l.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(c(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:le}),"function"==typeof Symbol&&(ce.fn[Symbol.iterator]=oe[Symbol.iterator]),ce.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var pe=oe.pop,de=oe.sort,he=oe.splice,ge="[\\x20\\t\\r\\n\\f]",ve=new RegExp("^"+ge+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ge+"+$","g");ce.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var f=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function p(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}ce.escapeSelector=function(e){return(e+"").replace(f,p)};var ye=C,me=s;!function(){var e,b,w,o,a,T,r,C,d,i,k=me,S=ce.expando,E=0,n=0,s=W(),c=W(),u=W(),h=W(),l=function(e,t){return e===t&&(a=!0),0},f="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",t="(?:\\\\[\\da-fA-F]{1,6}"+ge+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",p="\\["+ge+"*("+t+")(?:"+ge+"*([*^$|!~]?=)"+ge+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+t+"))|)"+ge+"*\\]",g=":("+t+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+p+")*)|.*)\\)|)",v=new RegExp(ge+"+","g"),y=new RegExp("^"+ge+"*,"+ge+"*"),m=new RegExp("^"+ge+"*([>+~]|"+ge+")"+ge+"*"),x=new RegExp(ge+"|>"),j=new RegExp(g),A=new RegExp("^"+t+"$"),D={ID:new RegExp("^#("+t+")"),CLASS:new RegExp("^\\.("+t+")"),TAG:new RegExp("^("+t+"|[*])"),ATTR:new RegExp("^"+p),PSEUDO:new RegExp("^"+g),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ge+"*(even|odd|(([+-]|)(\\d*)n|)"+ge+"*(?:([+-]|)"+ge+"*(\\d+)|))"+ge+"*\\)|)","i"),bool:new RegExp("^(?:"+f+")$","i"),needsContext:new RegExp("^"+ge+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ge+"*((?:-\\d)?\\d*)"+ge+"*\\)|)(?=[^-]|$)","i")},N=/^(?:input|select|textarea|button)$/i,q=/^h\d$/i,L=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,H=/[+~]/,O=new RegExp("\\\\[\\da-fA-F]{1,6}"+ge+"?|\\\\([^\\r\\n\\f])","g"),P=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},M=function(){V()},R=J(function(e){return!0===e.disabled&&fe(e,"fieldset")},{dir:"parentNode",next:"legend"});try{k.apply(oe=ae.call(ye.childNodes),ye.childNodes),oe[ye.childNodes.length].nodeType}catch(e){k={apply:function(e,t){me.apply(e,ae.call(t))},call:function(e){me.apply(e,ae.call(arguments,1))}}}function I(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(V(e),e=e||T,C)){if(11!==p&&(u=L.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return k.call(n,a),n}else if(f&&(a=f.getElementById(i))&&I.contains(e,a)&&a.id===i)return k.call(n,a),n}else{if(u[2])return k.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&e.getElementsByClassName)return k.apply(n,e.getElementsByClassName(i)),n}if(!(h[t+" "]||d&&d.test(t))){if(c=t,f=e,1===p&&(x.test(t)||m.test(t))){(f=H.test(t)&&U(e.parentNode)||e)==e&&le.scope||((s=e.getAttribute("id"))?s=ce.escapeSelector(s):e.setAttribute("id",s=S)),o=(l=Y(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+Q(l[o]);c=l.join(",")}try{return k.apply(n,f.querySelectorAll(c)),n}catch(e){h(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return re(t.replace(ve,"$1"),e,n,r)}function W(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function F(e){return e[S]=!0,e}function $(e){var t=T.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function B(t){return function(e){return fe(e,"input")&&e.type===t}}function _(t){return function(e){return(fe(e,"input")||fe(e,"button"))&&e.type===t}}function z(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&R(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function X(a){return F(function(o){return o=+o,F(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function U(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function V(e){var t,n=e?e.ownerDocument||e:ye;return n!=T&&9===n.nodeType&&n.documentElement&&(r=(T=n).documentElement,C=!ce.isXMLDoc(T),i=r.matches||r.webkitMatchesSelector||r.msMatchesSelector,r.msMatchesSelector&&ye!=T&&(t=T.defaultView)&&t.top!==t&&t.addEventListener("unload",M),le.getById=$(function(e){return r.appendChild(e).id=ce.expando,!T.getElementsByName||!T.getElementsByName(ce.expando).length}),le.disconnectedMatch=$(function(e){return i.call(e,"*")}),le.scope=$(function(){return T.querySelectorAll(":scope")}),le.cssHas=$(function(){try{return T.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}}),le.getById?(b.filter.ID=function(e){var t=e.replace(O,P);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&C){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(O,P);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&C){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},b.find.CLASS=function(e,t){if("undefined"!=typeof t.getElementsByClassName&&C)return t.getElementsByClassName(e)},d=[],$(function(e){var t;r.appendChild(e).innerHTML="<a id='"+S+"' href='' disabled='disabled'></a><select id='"+S+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+ge+"*(?:value|"+f+")"),e.querySelectorAll("[id~="+S+"-]").length||d.push("~="),e.querySelectorAll("a#"+S+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=T.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),r.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=T.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+ge+"*name"+ge+"*="+ge+"*(?:''|\"\")")}),le.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),l=function(e,t){if(e===t)return a=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!le.sortDetached&&t.compareDocumentPosition(e)===n?e===T||e.ownerDocument==ye&&I.contains(ye,e)?-1:t===T||t.ownerDocument==ye&&I.contains(ye,t)?1:o?se.call(o,e)-se.call(o,t):0:4&n?-1:1)}),T}for(e in I.matches=function(e,t){return I(e,null,null,t)},I.matchesSelector=function(e,t){if(V(e),C&&!h[t+" "]&&(!d||!d.test(t)))try{var n=i.call(e,t);if(n||le.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){h(t,!0)}return 0<I(t,T,null,[e]).length},I.contains=function(e,t){return(e.ownerDocument||e)!=T&&V(e),ce.contains(e,t)},I.attr=function(e,t){(e.ownerDocument||e)!=T&&V(e);var n=b.attrHandle[t.toLowerCase()],r=n&&ue.call(b.attrHandle,t.toLowerCase())?n(e,t,!C):void 0;return void 0!==r?r:e.getAttribute(t)},I.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ce.uniqueSort=function(e){var t,n=[],r=0,i=0;if(a=!le.sortStable,o=!le.sortStable&&ae.call(e,0),de.call(e,l),a){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)he.call(e,n[r],1)}return o=null,e},ce.fn.uniqueSort=function(){return this.pushStack(ce.uniqueSort(ae.apply(this)))},(b=ce.expr={cacheLength:50,createPseudo:F,match:D,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(O,P),e[3]=(e[3]||e[4]||e[5]||"").replace(O,P),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||I.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&I.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return D.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&j.test(n)&&(t=Y(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(O,P).toLowerCase();return"*"===e?function(){return!0}:function(e){return fe(e,t)}},CLASS:function(e){var t=s[e+" "];return t||(t=new RegExp("(^|"+ge+")"+e+"("+ge+"|$)"))&&s(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=I.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(v," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(d,e,t,h,g){var v="nth"!==d.slice(0,3),y="last"!==d.slice(-4),m="of-type"===e;return 1===h&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u=v!==y?"nextSibling":"previousSibling",l=e.parentNode,c=m&&e.nodeName.toLowerCase(),f=!n&&!m,p=!1;if(l){if(v){while(u){o=e;while(o=o[u])if(m?fe(o,c):1===o.nodeType)return!1;s=u="only"===d&&!s&&"nextSibling"}return!0}if(s=[y?l.firstChild:l.lastChild],y&&f){p=(a=(r=(i=l[S]||(l[S]={}))[d]||[])[0]===E&&r[1])&&r[2],o=a&&l.childNodes[a];while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if(1===o.nodeType&&++p&&o===e){i[d]=[E,a,p];break}}else if(f&&(p=a=(r=(i=e[S]||(e[S]={}))[d]||[])[0]===E&&r[1]),!1===p)while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if((m?fe(o,c):1===o.nodeType)&&++p&&(f&&((i=o[S]||(o[S]={}))[d]=[E,p]),o===e))break;return(p-=g)===h||p%h==0&&0<=p/h}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||I.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?F(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=se.call(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:F(function(e){var r=[],i=[],s=ne(e.replace(ve,"$1"));return s[S]?F(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:F(function(t){return function(e){return 0<I(t,e).length}}),contains:F(function(t){return t=t.replace(O,P),function(e){return-1<(e.textContent||ce.text(e)).indexOf(t)}}),lang:F(function(n){return A.test(n||"")||I.error("unsupported lang: "+n),n=n.replace(O,P).toLowerCase(),function(e){var t;do{if(t=C?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=ie.location&&ie.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===r},focus:function(e){return e===function(){try{return T.activeElement}catch(e){}}()&&T.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:z(!1),disabled:z(!0),checked:function(e){return fe(e,"input")&&!!e.checked||fe(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return q.test(e.nodeName)},input:function(e){return N.test(e.nodeName)},button:function(e){return fe(e,"input")&&"button"===e.type||fe(e,"button")},text:function(e){var t;return fe(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:X(function(){return[0]}),last:X(function(e,t){return[t-1]}),eq:X(function(e,t,n){return[n<0?n+t:n]}),even:X(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:X(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:X(function(e,t,n){var r;for(r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:X(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=B(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=_(e);function G(){}function Y(e,t){var n,r,i,o,a,s,u,l=c[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=y.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=m.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ve," ")}),a=a.slice(n.length)),b.filter)!(r=D[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?I.error(e):c(e,s).slice(0)}function Q(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function J(a,e,t){var s=e.dir,u=e.next,l=u||s,c=t&&"parentNode"===l,f=n++;return e.first?function(e,t,n){while(e=e[s])if(1===e.nodeType||c)return a(e,t,n);return!1}:function(e,t,n){var r,i,o=[E,f];if(n){while(e=e[s])if((1===e.nodeType||c)&&a(e,t,n))return!0}else while(e=e[s])if(1===e.nodeType||c)if(i=e[S]||(e[S]={}),u&&fe(e,u))e=e[s]||e;else{if((r=i[l])&&r[0]===E&&r[1]===f)return o[2]=r[2];if((i[l]=o)[2]=a(e,t,n))return!0}return!1}}function K(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Z(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function ee(d,h,g,v,y,e){return v&&!v[S]&&(v=ee(v)),y&&!y[S]&&(y=ee(y,e)),F(function(e,t,n,r){var i,o,a,s,u=[],l=[],c=t.length,f=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)I(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),p=!d||!e&&h?f:Z(f,u,d,n,r);if(g?g(p,s=y||(e?d:c||v)?[]:t,n,r):s=p,v){i=Z(s,l),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(s[l[o]]=!(p[l[o]]=a))}if(e){if(y||d){if(y){i=[],o=s.length;while(o--)(a=s[o])&&i.push(p[o]=a);y(null,s=[],i,r)}o=s.length;while(o--)(a=s[o])&&-1<(i=y?se.call(e,a):u[o])&&(e[i]=!(t[i]=a))}}else s=Z(s===t?s.splice(c,s.length):s),y?y(null,t,s,r):k.apply(t,s)})}function te(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=J(function(e){return e===i},a,!0),l=J(function(e){return-1<se.call(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!=w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[J(K(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return ee(1<s&&K(c),1<s&&Q(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ve,"$1"),t,s<n&&te(e.slice(s,n)),n<r&&te(e=e.slice(n)),n<r&&Q(e))}c.push(t)}return K(c)}function ne(e,t){var n,v,y,m,x,r,i=[],o=[],a=u[e+" "];if(!a){t||(t=Y(e)),n=t.length;while(n--)(a=te(t[n]))[S]?i.push(a):o.push(a);(a=u(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=E+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==T||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==T||(V(o),n=!C);while(s=v[a++])if(s(o,t||T,n)){k.call(r,o);break}i&&(E=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=pe.call(r));f=Z(f)}k.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&ce.uniqueSort(r)}return i&&(E=h,w=p),c},m?F(r):r))).selector=e}return a}function re(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&Y(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&C&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(O,P),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=D.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(O,P),H.test(o[0].type)&&U(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&Q(o)))return k.apply(n,r),n;break}}}return(l||ne(e,c))(r,t,!C,n,!t||H.test(e)&&U(t.parentNode)||t),n}G.prototype=b.filters=b.pseudos,b.setFilters=new G,le.sortStable=S.split("").sort(l).join("")===S,V(),le.sortDetached=$(function(e){return 1&e.compareDocumentPosition(T.createElement("fieldset"))}),ce.find=I,ce.expr[":"]=ce.expr.pseudos,ce.unique=ce.uniqueSort,I.compile=ne,I.select=re,I.setDocument=V,I.tokenize=Y,I.escape=ce.escapeSelector,I.getText=ce.text,I.isXML=ce.isXMLDoc,I.selectors=ce.expr,I.support=ce.support,I.uniqueSort=ce.uniqueSort}();var d=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&ce(e).is(n))break;r.push(e)}return r},h=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},b=ce.expr.match.needsContext,w=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function T(e,n,r){return v(n)?ce.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?ce.grep(e,function(e){return e===n!==r}):"string"!=typeof n?ce.grep(e,function(e){return-1<se.call(n,e)!==r}):ce.filter(n,e,r)}ce.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ce.find.matchesSelector(r,e)?[r]:[]:ce.find.matches(e,ce.grep(t,function(e){return 1===e.nodeType}))},ce.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(ce(e).filter(function(){for(t=0;t<r;t++)if(ce.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)ce.find(e,i[t],n);return 1<r?ce.uniqueSort(n):n},filter:function(e){return this.pushStack(T(this,e||[],!1))},not:function(e){return this.pushStack(T(this,e||[],!0))},is:function(e){return!!T(this,"string"==typeof e&&b.test(e)?ce(e):e||[],!1).length}});var k,S=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ce.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||k,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:S.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ce?t[0]:t,ce.merge(this,ce.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),w.test(r[1])&&ce.isPlainObject(t))for(r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=C.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(ce):ce.makeArray(e,this)}).prototype=ce.fn,k=ce(C);var E=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function A(e,t){while((e=e[t])&&1!==e.nodeType);return e}ce.fn.extend({has:function(e){var t=ce(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ce.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&ce(e);if(!b.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&ce.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?ce.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?se.call(ce(e),this[0]):se.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ce.uniqueSort(ce.merge(this.get(),ce(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ce.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return d(e,"parentNode")},parentsUntil:function(e,t,n){return d(e,"parentNode",n)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return d(e,"nextSibling")},prevAll:function(e){return d(e,"previousSibling")},nextUntil:function(e,t,n){return d(e,"nextSibling",n)},prevUntil:function(e,t,n){return d(e,"previousSibling",n)},siblings:function(e){return h((e.parentNode||{}).firstChild,e)},children:function(e){return h(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(fe(e,"template")&&(e=e.content||e),ce.merge([],e.childNodes))}},function(r,i){ce.fn[r]=function(e,t){var n=ce.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=ce.filter(t,n)),1<this.length&&(j[r]||ce.uniqueSort(n),E.test(r)&&n.reverse()),this.pushStack(n)}});var D=/[^\x20\t\r\n\f]+/g;function N(e){return e}function q(e){throw e}function L(e,t,n,r){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(n):e&&v(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}ce.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},ce.each(e.match(D)||[],function(e,t){n[t]=!0}),n):ce.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){ce.each(e,function(e,t){v(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==x(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return ce.each(arguments,function(e,t){var n;while(-1<(n=ce.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<ce.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},ce.extend({Deferred:function(e){var o=[["notify","progress",ce.Callbacks("memory"),ce.Callbacks("memory"),2],["resolve","done",ce.Callbacks("once memory"),ce.Callbacks("once memory"),0,"resolved"],["reject","fail",ce.Callbacks("once memory"),ce.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return ce.Deferred(function(r){ce.each(o,function(e,t){var n=v(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&v(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,v(t)?s?t.call(e,l(u,o,N,s),l(u,o,q,s)):(u++,t.call(e,l(u,o,N,s),l(u,o,q,s),l(u,o,N,o.notifyWith))):(a!==N&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){ce.Deferred.exceptionHook&&ce.Deferred.exceptionHook(e,t.error),u<=i+1&&(a!==q&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(ce.Deferred.getErrorHook?t.error=ce.Deferred.getErrorHook():ce.Deferred.getStackHook&&(t.error=ce.Deferred.getStackHook()),ie.setTimeout(t))}}return ce.Deferred(function(e){o[0][3].add(l(0,e,v(r)?r:N,e.notifyWith)),o[1][3].add(l(0,e,v(t)?t:N)),o[2][3].add(l(0,e,v(n)?n:q))}).promise()},promise:function(e){return null!=e?ce.extend(e,a):a}},s={};return ce.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=ae.call(arguments),o=ce.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?ae.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(L(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||v(i[t]&&i[t].then)))return o.then();while(t--)L(i[t],a(t),o.reject);return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ce.Deferred.exceptionHook=function(e,t){ie.console&&ie.console.warn&&e&&H.test(e.name)&&ie.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},ce.readyException=function(e){ie.setTimeout(function(){throw e})};var O=ce.Deferred();function P(){C.removeEventListener("DOMContentLoaded",P),ie.removeEventListener("load",P),ce.ready()}ce.fn.ready=function(e){return O.then(e)["catch"](function(e){ce.readyException(e)}),this},ce.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ce.readyWait:ce.isReady)||(ce.isReady=!0)!==e&&0<--ce.readyWait||O.resolveWith(C,[ce])}}),ce.ready.then=O.then,"complete"===C.readyState||"loading"!==C.readyState&&!C.documentElement.doScroll?ie.setTimeout(ce.ready):(C.addEventListener("DOMContentLoaded",P),ie.addEventListener("load",P));var M=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===x(n))for(s in i=!0,n)M(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,v(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(ce(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},R=/^-ms-/,I=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function F(e){return e.replace(R,"ms-").replace(I,W)}var $=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function B(){this.expando=ce.expando+B.uid++}B.uid=1,B.prototype={cache:function(e){var t=e[this.expando];return t||(t={},$(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[F(t)]=n;else for(r in t)i[F(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][F(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(F):(t=F(t))in r?[t]:t.match(D)||[]).length;while(n--)delete r[t[n]]}(void 0===t||ce.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ce.isEmptyObject(t)}};var _=new B,z=new B,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,U=/[A-Z]/g;function V(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(U,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:X.test(i)?JSON.parse(i):i)}catch(e){}z.set(e,t,n)}else n=void 0;return n}ce.extend({hasData:function(e){return z.hasData(e)||_.hasData(e)},data:function(e,t,n){return z.access(e,t,n)},removeData:function(e,t){z.remove(e,t)},_data:function(e,t,n){return _.access(e,t,n)},_removeData:function(e,t){_.remove(e,t)}}),ce.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=z.get(o),1===o.nodeType&&!_.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=F(r.slice(5)),V(o,r,i[r]));_.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){z.set(this,n)}):M(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=z.get(o,n))?t:void 0!==(t=V(o,n))?t:void 0;this.each(function(){z.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){z.remove(this,e)})}}),ce.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=_.get(e,t),n&&(!r||Array.isArray(n)?r=_.access(e,t,ce.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=ce.queue(e,t),r=n.length,i=n.shift(),o=ce._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){ce.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return _.get(e,n)||_.access(e,n,{empty:ce.Callbacks("once memory").add(function(){_.remove(e,[t+"queue",n])})})}}),ce.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?ce.queue(this[0],t):void 0===n?this:this.each(function(){var e=ce.queue(this,t,n);ce._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ce.dequeue(this,t)})},dequeue:function(e){return this.each(function(){ce.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ce.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=_.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var G=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Y=new RegExp("^(?:([+-])=|)("+G+")([a-z%]*)$","i"),Q=["Top","Right","Bottom","Left"],J=C.documentElement,K=function(e){return ce.contains(e.ownerDocument,e)},Z={composed:!0};J.getRootNode&&(K=function(e){return ce.contains(e.ownerDocument,e)||e.getRootNode(Z)===e.ownerDocument});var ee=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&K(e)&&"none"===ce.css(e,"display")};function te(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return ce.css(e,t,"")},u=s(),l=n&&n[3]||(ce.cssNumber[t]?"":"px"),c=e.nodeType&&(ce.cssNumber[t]||"px"!==l&&+u)&&Y.exec(ce.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)ce.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,ce.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ne={};function re(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=_.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ee(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ne[s])||(o=a.body.appendChild(a.createElement(s)),u=ce.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ne[s]=u)))):"none"!==n&&(l[c]="none",_.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}ce.fn.extend({show:function(){return re(this,!0)},hide:function(){return re(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ee(this)?ce(this).show():ce(this).hide()})}});var xe,be,we=/^(?:checkbox|radio)$/i,Te=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i;xe=C.createDocumentFragment().appendChild(C.createElement("div")),(be=C.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),xe.appendChild(be),le.checkClone=xe.cloneNode(!0).cloneNode(!0).lastChild.checked,xe.innerHTML="<textarea>x</textarea>",le.noCloneChecked=!!xe.cloneNode(!0).lastChild.defaultValue,xe.innerHTML="<option></option>",le.option=!!xe.lastChild;var ke={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Se(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&fe(e,t)?ce.merge([e],n):n}function Ee(e,t){for(var n=0,r=e.length;n<r;n++)_.set(e[n],"globalEval",!t||_.get(t[n],"globalEval"))}ke.tbody=ke.tfoot=ke.colgroup=ke.caption=ke.thead,ke.th=ke.td,le.option||(ke.optgroup=ke.option=[1,"<select multiple='multiple'>","</select>"]);var je=/<|&#?\w+;/;function Ae(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===x(o))ce.merge(p,o.nodeType?[o]:o);else if(je.test(o)){a=a||f.appendChild(t.createElement("div")),s=(Te.exec(o)||["",""])[1].toLowerCase(),u=ke[s]||ke._default,a.innerHTML=u[1]+ce.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;ce.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<ce.inArray(o,r))i&&i.push(o);else if(l=K(o),a=Se(f.appendChild(o),"script"),l&&Ee(a),n){c=0;while(o=a[c++])Ce.test(o.type||"")&&n.push(o)}return f}var De=/^([^.]*)(?:\.(.+)|)/;function Ne(){return!0}function qe(){return!1}function Le(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Le(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=qe;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return ce().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=ce.guid++)),e.each(function(){ce.event.add(this,t,i,r,n)})}function He(e,r,t){t?(_.set(e,r,!1),ce.event.add(e,r,{namespace:!1,handler:function(e){var t,n=_.get(this,r);if(1&e.isTrigger&&this[r]){if(n)(ce.event.special[r]||{}).delegateType&&e.stopPropagation();else if(n=ae.call(arguments),_.set(this,r,n),this[r](),t=_.get(this,r),_.set(this,r,!1),n!==t)return e.stopImmediatePropagation(),e.preventDefault(),t}else n&&(_.set(this,r,ce.event.trigger(n[0],n.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Ne)}})):void 0===_.get(e,r)&&ce.event.add(e,r,Ne)}ce.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.get(t);if($(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&ce.find.matchesSelector(J,i),n.guid||(n.guid=ce.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof ce&&ce.event.triggered!==e.type?ce.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(D)||[""]).length;while(l--)d=g=(s=De.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=ce.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=ce.event.special[d]||{},c=ce.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ce.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),ce.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.hasData(e)&&_.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(D)||[""]).length;while(l--)if(d=g=(s=De.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=ce.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||ce.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)ce.event.remove(e,d+t[l],n,r,!0);ce.isEmptyObject(u)&&_.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=ce.event.fix(e),l=(_.get(this,"events")||Object.create(null))[u.type]||[],c=ce.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=ce.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((ce.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<ce(i,this).index(l):ce.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(ce.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[ce.expando]?e:new ce.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,"input")&&He(t,"click",!0),!1},trigger:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,"input")&&He(t,"click"),!0},_default:function(e){var t=e.target;return we.test(t.type)&&t.click&&fe(t,"input")&&_.get(t,"click")||fe(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ce.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ce.Event=function(e,t){if(!(this instanceof ce.Event))return new ce.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ne:qe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ce.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[ce.expando]=!0},ce.Event.prototype={constructor:ce.Event,isDefaultPrevented:qe,isPropagationStopped:qe,isImmediatePropagationStopped:qe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ne,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ne,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ne,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ce.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},ce.event.addProp),ce.each({focus:"focusin",blur:"focusout"},function(r,i){function o(e){if(C.documentMode){var t=_.get(this,"handle"),n=ce.event.fix(e);n.type="focusin"===e.type?"focus":"blur",n.isSimulated=!0,t(e),n.target===n.currentTarget&&t(n)}else ce.event.simulate(i,e.target,ce.event.fix(e))}ce.event.special[r]={setup:function(){var e;if(He(this,r,!0),!C.documentMode)return!1;(e=_.get(this,i))||this.addEventListener(i,o),_.set(this,i,(e||0)+1)},trigger:function(){return He(this,r),!0},teardown:function(){var e;if(!C.documentMode)return!1;(e=_.get(this,i)-1)?_.set(this,i,e):(this.removeEventListener(i,o),_.remove(this,i))},_default:function(e){return _.get(e.target,r)},delegateType:i},ce.event.special[i]={setup:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i);n||(C.documentMode?this.addEventListener(i,o):e.addEventListener(r,o,!0)),_.set(t,i,(n||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i)-1;n?_.set(t,i,n):(C.documentMode?this.removeEventListener(i,o):e.removeEventListener(r,o,!0),_.remove(t,i))}}}),ce.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){ce.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||ce.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),ce.fn.extend({on:function(e,t,n,r){return Le(this,e,t,n,r)},one:function(e,t,n,r){return Le(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ce(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=qe),this.each(function(){ce.event.remove(this,e,n,t)})}});var Oe=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Re(e,t){return fe(e,"table")&&fe(11!==t.nodeType?t:t.firstChild,"tr")&&ce(e).children("tbody")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function We(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Fe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(_.hasData(e)&&(s=_.get(e).events))for(i in _.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)ce.event.add(t,i,s[i][n]);z.hasData(e)&&(o=z.access(e),a=ce.extend({},o),z.set(t,a))}}function $e(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=v(d);if(h||1<f&&"string"==typeof d&&!le.checkClone&&Pe.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),$e(t,r,i,o)});if(f&&(t=(e=Ae(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=ce.map(Se(e,"script"),Ie)).length;c<f;c++)u=e,c!==p&&(u=ce.clone(u,!0,!0),s&&ce.merge(a,Se(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,ce.map(a,We),c=0;c<s;c++)u=a[c],Ce.test(u.type||"")&&!_.access(u,"globalEval")&&ce.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?ce._evalUrl&&!u.noModule&&ce._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):m(u.textContent.replace(Me,""),u,l))}return n}function Be(e,t,n){for(var r,i=t?ce.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||ce.cleanData(Se(r)),r.parentNode&&(n&&K(r)&&Ee(Se(r,"script")),r.parentNode.removeChild(r));return e}ce.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=K(e);if(!(le.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ce.isXMLDoc(e)))for(a=Se(c),r=0,i=(o=Se(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&we.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||Se(e),a=a||Se(c),r=0,i=o.length;r<i;r++)Fe(o[r],a[r]);else Fe(e,c);return 0<(a=Se(c,"script")).length&&Ee(a,!f&&Se(e,"script")),c},cleanData:function(e){for(var t,n,r,i=ce.event.special,o=0;void 0!==(n=e[o]);o++)if($(n)){if(t=n[_.expando]){if(t.events)for(r in t.events)i[r]?ce.event.remove(n,r):ce.removeEvent(n,r,t.handle);n[_.expando]=void 0}n[z.expando]&&(n[z.expando]=void 0)}}}),ce.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return M(this,function(e){return void 0===e?ce.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return $e(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)})},prepend:function(){return $e(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Re(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ce.cleanData(Se(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ce.clone(this,e,t)})},html:function(e){return M(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!ke[(Te.exec(e)||["",""])[1].toLowerCase()]){e=ce.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(ce.cleanData(Se(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return $e(this,arguments,function(e){var t=this.parentNode;ce.inArray(this,n)<0&&(ce.cleanData(Se(this)),t&&t.replaceChild(e,this))},n)}}),ce.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){ce.fn[e]=function(e){for(var t,n=[],r=ce(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),ce(r[o])[a](t),s.apply(n,t.get());return this.pushStack(n)}});var _e=new RegExp("^("+G+")(?!px)[a-z%]+$","i"),ze=/^--/,Xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=ie),t.getComputedStyle(e)},Ue=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ve=new RegExp(Q.join("|"),"i");function Ge(e,t,n){var r,i,o,a,s=ze.test(t),u=e.style;return(n=n||Xe(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(ve,"$1")||void 0),""!==a||K(e)||(a=ce.style(e,t)),!le.pixelBoxStyles()&&_e.test(a)&&Ve.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+"":a}function Ye(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",J.appendChild(u).appendChild(l);var e=ie.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),J.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=C.createElement("div"),l=C.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",le.clearCloneStyle="content-box"===l.style.backgroundClip,ce.extend(le,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=C.createElement("table"),t=C.createElement("tr"),n=C.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",J.appendChild(e).appendChild(t).appendChild(n),r=ie.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,J.removeChild(e)),a}}))}();var Qe=["Webkit","Moz","ms"],Je=C.createElement("div").style,Ke={};function Ze(e){var t=ce.cssProps[e]||Ke[e];return t||(e in Je?e:Ke[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Qe.length;while(n--)if((e=Qe[n]+t)in Je)return e}(e)||e)}var et=/^(none|table(?!-c[ea]).+)/,tt={position:"absolute",visibility:"hidden",display:"block"},nt={letterSpacing:"0",fontWeight:"400"};function rt(e,t,n){var r=Y.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function it(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=ce.css(e,n+Q[a],!0,i)),r?("content"===n&&(u-=ce.css(e,"padding"+Q[a],!0,i)),"margin"!==n&&(u-=ce.css(e,"border"+Q[a]+"Width",!0,i))):(u+=ce.css(e,"padding"+Q[a],!0,i),"padding"!==n?u+=ce.css(e,"border"+Q[a]+"Width",!0,i):s+=ce.css(e,"border"+Q[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u+l}function ot(e,t,n){var r=Xe(e),i=(!le.boxSizingReliable()||n)&&"border-box"===ce.css(e,"boxSizing",!1,r),o=i,a=Ge(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(_e.test(a)){if(!n)return a;a="auto"}return(!le.boxSizingReliable()&&i||!le.reliableTrDimensions()&&fe(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===ce.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===ce.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+it(e,t,n||(i?"border":"content"),o,r,a)+"px"}function at(e,t,n,r,i){return new at.prototype.init(e,t,n,r,i)}ce.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=F(t),u=ze.test(t),l=e.style;if(u||(t=Ze(s)),a=ce.cssHooks[t]||ce.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=Y.exec(n))&&i[1]&&(n=te(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(ce.cssNumber[s]?"":"px")),le.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=F(t);return ze.test(t)||(t=Ze(s)),(a=ce.cssHooks[t]||ce.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ge(e,t,r)),"normal"===i&&t in nt&&(i=nt[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),ce.each(["height","width"],function(e,u){ce.cssHooks[u]={get:function(e,t,n){if(t)return!et.test(ce.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ot(e,u,n):Ue(e,tt,function(){return ot(e,u,n)})},set:function(e,t,n){var r,i=Xe(e),o=!le.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===ce.css(e,"boxSizing",!1,i),s=n?it(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-it(e,u,"border",!1,i)-.5)),s&&(r=Y.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=ce.css(e,u)),rt(0,t,s)}}}),ce.cssHooks.marginLeft=Ye(le.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ce.each({margin:"",padding:"",border:"Width"},function(i,o){ce.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+Q[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(ce.cssHooks[i+o].set=rt)}),ce.fn.extend({css:function(e,t){return M(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Xe(e),i=t.length;a<i;a++)o[t[a]]=ce.css(e,t[a],!1,r);return o}return void 0!==n?ce.style(e,t,n):ce.css(e,t)},e,t,1<arguments.length)}}),((ce.Tween=at).prototype={constructor:at,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||ce.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ce.cssNumber[n]?"":"px")},cur:function(){var e=at.propHooks[this.prop];return e&&e.get?e.get(this):at.propHooks._default.get(this)},run:function(e){var t,n=at.propHooks[this.prop];return this.options.duration?this.pos=t=ce.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):at.propHooks._default.set(this),this}}).init.prototype=at.prototype,(at.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ce.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){ce.fx.step[e.prop]?ce.fx.step[e.prop](e):1!==e.elem.nodeType||!ce.cssHooks[e.prop]&&null==e.elem.style[Ze(e.prop)]?e.elem[e.prop]=e.now:ce.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=at.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ce.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ce.fx=at.prototype.init,ce.fx.step={};var st,ut,lt,ct,ft=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function dt(){ut&&(!1===C.hidden&&ie.requestAnimationFrame?ie.requestAnimationFrame(dt):ie.setTimeout(dt,ce.fx.interval),ce.fx.tick())}function ht(){return ie.setTimeout(function(){st=void 0}),st=Date.now()}function gt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=Q[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function vt(e,t,n){for(var r,i=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function yt(o,e,t){var n,a,r=0,i=yt.prefilters.length,s=ce.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=st||ht(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:ce.extend({},e),opts:ce.extend(!0,{specialEasing:{},easing:ce.easing._default},t),originalProperties:e,originalOptions:t,startTime:st||ht(),duration:t.duration,tweens:[],createTween:function(e,t){var n=ce.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=F(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=ce.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=yt.prefilters[r].call(l,o,c,l.opts))return v(n.stop)&&(ce._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return ce.map(c,vt,l),v(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),ce.fx.timer(ce.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}ce.Animation=ce.extend(yt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return te(n.elem,e,Y.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(D);for(var n,r=0,i=e.length;r<i;r++)n=e[r],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ee(e),v=_.get(e,"fxshow");for(r in n.queue||(null==(a=ce._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,ce.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ft.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||ce.style(e,r)}if((u=!ce.isEmptyObject(t))||!ce.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=_.get(e,"display")),"none"===(c=ce.css(e,"display"))&&(l?c=l:(re([e],!0),l=e.style.display||l,c=ce.css(e,"display"),re([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===ce.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=_.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&re([e],!0),p.done(function(){for(r in g||re([e]),_.remove(e,"fxshow"),d)ce.style(e,r,d[r])})),u=vt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),ce.speed=function(e,t,n){var r=e&&"object"==typeof e?ce.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return ce.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in ce.fx.speeds?r.duration=ce.fx.speeds[r.duration]:r.duration=ce.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&ce.dequeue(this,r.queue)},r},ce.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ee).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=ce.isEmptyObject(t),o=ce.speed(e,n,r),a=function(){var e=yt(this,ce.extend({},t),o);(i||_.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=ce.timers,r=_.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&pt.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||ce.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=_.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=ce.timers,o=n?n.length:0;for(t.finish=!0,ce.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),ce.each(["toggle","show","hide"],function(e,r){var i=ce.fn[r];ce.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(gt(r,!0),e,t,n)}}),ce.each({slideDown:gt("show"),slideUp:gt("hide"),slideToggle:gt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){ce.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),ce.timers=[],ce.fx.tick=function(){var e,t=0,n=ce.timers;for(st=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||ce.fx.stop(),st=void 0},ce.fx.timer=function(e){ce.timers.push(e),ce.fx.start()},ce.fx.interval=13,ce.fx.start=function(){ut||(ut=!0,dt())},ce.fx.stop=function(){ut=null},ce.fx.speeds={slow:600,fast:200,_default:400},ce.fn.delay=function(r,e){return r=ce.fx&&ce.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=ie.setTimeout(e,r);t.stop=function(){ie.clearTimeout(n)}})},lt=C.createElement("input"),ct=C.createElement("select").appendChild(C.createElement("option")),lt.type="checkbox",le.checkOn=""!==lt.value,le.optSelected=ct.selected,(lt=C.createElement("input")).value="t",lt.type="radio",le.radioValue="t"===lt.value;var mt,xt=ce.expr.attrHandle;ce.fn.extend({attr:function(e,t){return M(this,ce.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ce.removeAttr(this,e)})}}),ce.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?ce.prop(e,t,n):(1===o&&ce.isXMLDoc(e)||(i=ce.attrHooks[t.toLowerCase()]||(ce.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void ce.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=ce.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!le.radioValue&&"radio"===t&&fe(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(D);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),mt={set:function(e,t,n){return!1===t?ce.removeAttr(e,n):e.setAttribute(n,n),n}},ce.each(ce.expr.match.bool.source.match(/\w+/g),function(e,t){var a=xt[t]||ce.find.attr;xt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=xt[o],xt[o]=r,r=null!=a(e,t,n)?o:null,xt[o]=i),r}});var bt=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;function Tt(e){return(e.match(D)||[]).join(" ")}function Ct(e){return e.getAttribute&&e.getAttribute("class")||""}function kt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(D)||[]}ce.fn.extend({prop:function(e,t){return M(this,ce.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[ce.propFix[e]||e]})}}),ce.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ce.isXMLDoc(e)||(t=ce.propFix[t]||t,i=ce.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ce.find.attr(e,"tabindex");return t?parseInt(t,10):bt.test(e.nodeName)||wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),le.optSelected||(ce.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ce.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ce.propFix[this.toLowerCase()]=this}),ce.fn.extend({addClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).addClass(t.call(this,e,Ct(this)))}):(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=Tt(n),r!==a&&this.setAttribute("class",a)}}):this},removeClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).removeClass(t.call(this,e,Ct(this)))}):arguments.length?(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(o=0;o<e.length;o++){i=e[o];while(-1<n.indexOf(" "+i+" "))n=n.replace(" "+i+" "," ")}a=Tt(n),r!==a&&this.setAttribute("class",a)}}):this:this.attr("class","")},toggleClass:function(t,n){var e,r,i,o,a=typeof t,s="string"===a||Array.isArray(t);return v(t)?this.each(function(e){ce(this).toggleClass(t.call(this,e,Ct(this),n),n)}):"boolean"==typeof n&&s?n?this.addClass(t):this.removeClass(t):(e=kt(t),this.each(function(){if(s)for(o=ce(this),i=0;i<e.length;i++)r=e[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!==a||((r=Ct(this))&&_.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":_.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+Tt(Ct(n))+" ").indexOf(t))return!0;return!1}});var St=/\r/g;ce.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=v(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,ce(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=ce.map(t,function(e){return null==e?"":e+""})),(r=ce.valHooks[this.type]||ce.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=ce.valHooks[t.type]||ce.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(St,""):null==e?"":e:void 0}}),ce.extend({valHooks:{option:{get:function(e){var t=ce.find.attr(e,"value");return null!=t?t:Tt(ce.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!fe(n.parentNode,"optgroup"))){if(t=ce(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=ce.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<ce.inArray(ce.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ce.each(["radio","checkbox"],function(){ce.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<ce.inArray(ce(e).val(),t)}},le.checkOn||(ce.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Et=ie.location,jt={guid:Date.now()},At=/\?/;ce.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new ie.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||ce.error("Invalid XML: "+(n?ce.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Dt=/^(?:focusinfocus|focusoutblur)$/,Nt=function(e){e.stopPropagation()};ce.extend(ce.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||C],d=ue.call(e,"type")?e.type:e,h=ue.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||C,3!==n.nodeType&&8!==n.nodeType&&!Dt.test(d+ce.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[ce.expando]?e:new ce.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:ce.makeArray(t,[e]),c=ce.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!y(n)){for(s=c.delegateType||d,Dt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||C)&&p.push(a.defaultView||a.parentWindow||ie)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(_.get(o,"events")||Object.create(null))[e.type]&&_.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&$(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!$(n)||u&&v(n[d])&&!y(n)&&((a=n[u])&&(n[u]=null),ce.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Nt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Nt),ce.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=ce.extend(new ce.Event,n,{type:e,isSimulated:!0});ce.event.trigger(r,null,t)}}),ce.fn.extend({trigger:function(e,t){return this.each(function(){ce.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ce.event.trigger(e,t,n,!0)}});var qt=/\[\]$/,Lt=/\r?\n/g,Ht=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;function Pt(n,e,r,i){var t;if(Array.isArray(e))ce.each(e,function(e,t){r||qt.test(n)?i(n,t):Pt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==x(e))i(n,e);else for(t in e)Pt(n+"["+t+"]",e[t],r,i)}ce.param=function(e,t){var n,r=[],i=function(e,t){var n=v(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!ce.isPlainObject(e))ce.each(e,function(){i(this.name,this.value)});else for(n in e)Pt(n,e[n],t,i);return r.join("&")},ce.fn.extend({serialize:function(){return ce.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ce.prop(this,"elements");return e?ce.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ce(this).is(":disabled")&&Ot.test(this.nodeName)&&!Ht.test(e)&&(this.checked||!we.test(e))}).map(function(e,t){var n=ce(this).val();return null==n?null:Array.isArray(n)?ce.map(n,function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}}):{name:t.name,value:n.replace(Lt,"\r\n")}}).get()}});var Mt=/%20/g,Rt=/#.*$/,It=/([?&])_=[^&]*/,Wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ft=/^(?:GET|HEAD)$/,$t=/^\/\//,Bt={},_t={},zt="*/".concat("*"),Xt=C.createElement("a");function Ut(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(D)||[];if(v(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Vt(t,i,o,a){var s={},u=t===_t;function l(e){var r;return s[e]=!0,ce.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Gt(e,t){var n,r,i=ce.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&ce.extend(!0,e,r),e}Xt.href=Et.href,ce.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ce.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Gt(Gt(e,ce.ajaxSettings),t):Gt(ce.ajaxSettings,e)},ajaxPrefilter:Ut(Bt),ajaxTransport:Ut(_t),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=ce.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?ce(y):ce.event,x=ce.Deferred(),b=ce.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Wt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+"").replace($t,Et.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(D)||[""],null==v.crossDomain){r=C.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Xt.protocol+"//"+Xt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=ce.param(v.data,v.traditional)),Vt(Bt,v,t,T),h)return T;for(i in(g=ce.event&&v.global)&&0==ce.active++&&ce.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Ft.test(v.type),f=v.url.replace(Rt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Mt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(At.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(It,"$1"),o=(At.test(f)?"&":"?")+"_="+jt.guid+++o),v.url=f+o),v.ifModified&&(ce.lastModified[f]&&T.setRequestHeader("If-Modified-Since",ce.lastModified[f]),ce.etag[f]&&T.setRequestHeader("If-None-Match",ce.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+zt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Vt(_t,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=ie.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&ie.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<ce.inArray("script",v.dataTypes)&&ce.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(ce.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(ce.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--ce.active||ce.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return ce.get(e,t,n,"json")},getScript:function(e,t){return ce.get(e,void 0,t,"script")}}),ce.each(["get","post"],function(e,i){ce[i]=function(e,t,n,r){return v(t)&&(r=r||n,n=t,t=void 0),ce.ajax(ce.extend({url:e,type:i,dataType:r,data:t,success:n},ce.isPlainObject(e)&&e))}}),ce.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),ce._evalUrl=function(e,t,n){return ce.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){ce.globalEval(e,t,n)}})},ce.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=ce(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return v(n)?this.each(function(e){ce(this).wrapInner(n.call(this,e))}):this.each(function(){var e=ce(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=v(t);return this.each(function(e){ce(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ce(this).replaceWith(this.childNodes)}),this}}),ce.expr.pseudos.hidden=function(e){return!ce.expr.pseudos.visible(e)},ce.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ce.ajaxSettings.xhr=function(){try{return new ie.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},Qt=ce.ajaxSettings.xhr();le.cors=!!Qt&&"withCredentials"in Qt,le.ajax=Qt=!!Qt,ce.ajaxTransport(function(i){var o,a;if(le.cors||Qt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Yt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&ie.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),ce.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ce.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ce.globalEval(e),e}}}),ce.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ce.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=ce("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),C.head.appendChild(r[0])},abort:function(){i&&i()}}});var Jt,Kt=[],Zt=/(=)\?(?=&|$)|\?\?/;ce.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||ce.expando+"_"+jt.guid++;return this[e]=!0,e}}),ce.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Zt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Zt,"$1"+r):!1!==e.jsonp&&(e.url+=(At.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||ce.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=ie[r],ie[r]=function(){o=arguments},n.always(function(){void 0===i?ce(ie).removeProp(r):ie[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(r)),o&&v(i)&&i(o[0]),o=i=void 0}),"script"}),le.createHTMLDocument=((Jt=C.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Jt.childNodes.length),ce.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(le.createHTMLDocument?((r=(t=C.implementation.createHTMLDocument("")).createElement("base")).href=C.location.href,t.head.appendChild(r)):t=C),o=!n&&[],(i=w.exec(e))?[t.createElement(i[1])]:(i=Ae([e],t,o),o&&o.length&&ce(o).remove(),ce.merge([],i.childNodes)));var r,i,o},ce.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=Tt(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&ce.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?ce("<div>").append(ce.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ce.expr.pseudos.animated=function(t){return ce.grep(ce.timers,function(e){return t===e.elem}).length},ce.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=ce.css(e,"position"),c=ce(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=ce.css(e,"top"),u=ce.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),v(t)&&(t=t.call(e,n,ce.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},ce.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ce.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===ce.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===ce.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=ce(e).offset()).top+=ce.css(e,"borderTopWidth",!0),i.left+=ce.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-ce.css(r,"marginTop",!0),left:t.left-i.left-ce.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===ce.css(e,"position"))e=e.offsetParent;return e||J})}}),ce.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;ce.fn[t]=function(e){return M(this,function(e,t,n){var r;if(y(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),ce.each(["top","left"],function(e,n){ce.cssHooks[n]=Ye(le.pixelPosition,function(e,t){if(t)return t=Ge(e,n),_e.test(t)?ce(e).position()[n]+"px":t})}),ce.each({Height:"height",Width:"width"},function(a,s){ce.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){ce.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return M(this,function(e,t,n){var r;return y(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?ce.css(e,t,i):ce.style(e,t,n,i)},s,n?e:void 0,n)}})}),ce.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ce.fn[t]=function(e){return this.on(t,e)}}),ce.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),ce.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){ce.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var en=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;ce.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),v(e))return r=ae.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(ae.call(arguments)))}).guid=e.guid=e.guid||ce.guid++,i},ce.holdReady=function(e){e?ce.readyWait++:ce.ready(!0)},ce.isArray=Array.isArray,ce.parseJSON=JSON.parse,ce.nodeName=fe,ce.isFunction=v,ce.isWindow=y,ce.camelCase=F,ce.type=x,ce.now=Date.now,ce.isNumeric=function(e){var t=ce.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},ce.trim=function(e){return null==e?"":(e+"").replace(en,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return ce});var tn=ie.jQuery,nn=ie.$;return ce.noConflict=function(e){return ie.$===ce&&(ie.$=nn),e&&ie.jQuery===ce&&(ie.jQuery=tn),ce},"undefined"==typeof e&&(ie.jQuery=ie.$=ce),ce});;/*!
 * FilePond 4.30.6
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports):typeof define==='function'&&define.amd?define(['exports'],factory):((global=global||self),factory((global.FilePond={})));})(this,function(exports){'use strict';var isNode=function isNode(value){return value instanceof HTMLElement;};var createStore=function createStore(initialState){var queries=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var actions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var state=Object.assign({},initialState);var actionQueue=[];var dispatchQueue=[];var getState=function getState(){return Object.assign({},state);};var processActionQueue=function processActionQueue(){var queue=[].concat(actionQueue);actionQueue.length=0;return queue;};var processDispatchQueue=function processDispatchQueue(){var queue=[].concat(dispatchQueue);dispatchQueue.length=0;queue.forEach(function(_ref){var type=_ref.type,data=_ref.data;dispatch(type,data);});};var dispatch=function dispatch(type,data,isBlocking){if(isBlocking&&!document.hidden){dispatchQueue.push({type:type,data:data});return;}
if(actionHandlers[type]){actionHandlers[type](data);}
actionQueue.push({type:type,data:data,});};var query=function query(str){var _queryHandles;for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}
return queryHandles[str]?(_queryHandles=queryHandles)[str].apply(_queryHandles,args):null;};var api={getState:getState,processActionQueue:processActionQueue,processDispatchQueue:processDispatchQueue,dispatch:dispatch,query:query,};var queryHandles={};queries.forEach(function(query){queryHandles=Object.assign({},query(state),{},queryHandles);});var actionHandlers={};actions.forEach(function(action){actionHandlers=Object.assign({},action(dispatch,query,state),{},actionHandlers);});return api;};var defineProperty=function defineProperty(obj,property,definition){if(typeof definition==='function'){obj[property]=definition;return;}
Object.defineProperty(obj,property,Object.assign({},definition));};var forin=function forin(obj,cb){for(var key in obj){if(!obj.hasOwnProperty(key)){continue;}
cb(key,obj[key]);}};var createObject=function createObject(definition){var obj={};forin(definition,function(property){defineProperty(obj,property,definition[property]);});return obj;};var attr=function attr(node,name){var value=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(value===null){return node.getAttribute(name)||node.hasAttribute(name);}
node.setAttribute(name,value);};var ns='http://www.w3.org/2000/svg';var svgElements=['svg','path'];var isSVGElement=function isSVGElement(tag){return svgElements.includes(tag);};var createElement=function createElement(tag,className){var attributes=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(typeof className==='object'){attributes=className;className=null;}
var element=isSVGElement(tag)?document.createElementNS(ns,tag):document.createElement(tag);if(className){if(isSVGElement(tag)){attr(element,'class',className);}else{element.className=className;}}
forin(attributes,function(name,value){attr(element,name,value);});return element;};var appendChild=function appendChild(parent){return function(child,index){if(typeof index!=='undefined'&&parent.children[index]){parent.insertBefore(child,parent.children[index]);}else{parent.appendChild(child);}};};var appendChildView=function appendChildView(parent,childViews){return function(view,index){if(typeof index!=='undefined'){childViews.splice(index,0,view);}else{childViews.push(view);}
return view;};};var removeChildView=function removeChildView(parent,childViews){return function(view){childViews.splice(childViews.indexOf(view),1);if(view.element.parentNode){parent.removeChild(view.element);}
return view;};};var IS_BROWSER=(function(){return typeof window!=='undefined'&&typeof window.document!=='undefined';})();var isBrowser=function isBrowser(){return IS_BROWSER;};var testElement=isBrowser()?createElement('svg'):{};var getChildCount='children'in testElement?function(el){return el.children.length;}:function(el){return el.childNodes.length;};var getViewRect=function getViewRect(elementRect,childViews,offset,scale){var left=offset[0]||elementRect.left;var top=offset[1]||elementRect.top;var right=left+elementRect.width;var bottom=top+elementRect.height*(scale[1]||1);var rect={element:Object.assign({},elementRect),inner:{left:elementRect.left,top:elementRect.top,right:elementRect.right,bottom:elementRect.bottom,},outer:{left:left,top:top,right:right,bottom:bottom,},};childViews.filter(function(childView){return!childView.isRectIgnored();}).map(function(childView){return childView.rect;}).forEach(function(childViewRect){expandRect(rect.inner,Object.assign({},childViewRect.inner));expandRect(rect.outer,Object.assign({},childViewRect.outer));});calculateRectSize(rect.inner);rect.outer.bottom+=rect.element.marginBottom;rect.outer.right+=rect.element.marginRight;calculateRectSize(rect.outer);return rect;};var expandRect=function expandRect(parent,child){child.top+=parent.top;child.right+=parent.left;child.bottom+=parent.top;child.left+=parent.left;if(child.bottom>parent.bottom){parent.bottom=child.bottom;}
if(child.right>parent.right){parent.right=child.right;}};var calculateRectSize=function calculateRectSize(rect){rect.width=rect.right-rect.left;rect.height=rect.bottom-rect.top;};var isNumber=function isNumber(value){return typeof value==='number';};var thereYet=function thereYet(position,destination,velocity){var errorMargin=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0.001;return Math.abs(position-destination)<errorMargin&&Math.abs(velocity)<errorMargin;};var spring=function spring()
{var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$stiffness=_ref.stiffness,stiffness=_ref$stiffness===void 0?0.5:_ref$stiffness,_ref$damping=_ref.damping,damping=_ref$damping===void 0?0.75:_ref$damping,_ref$mass=_ref.mass,mass=_ref$mass===void 0?10:_ref$mass;var target=null;var position=null;var velocity=0;var resting=false;var interpolate=function interpolate(ts,skipToEndState){if(resting)return;if(!(isNumber(target)&&isNumber(position))){resting=true;velocity=0;return;}
var f=-(position-target)*stiffness;velocity+=f/mass;position+=velocity;velocity*=damping;if(thereYet(position,target,velocity)||skipToEndState){position=target;velocity=0;resting=true;api.onupdate(position);api.oncomplete(position);}else{api.onupdate(position);}};var setTarget=function setTarget(value){if(isNumber(value)&&!isNumber(position)){position=value;}
if(target===null){target=value;position=value;}
target=value;if(position===target||typeof target==='undefined'){resting=true;velocity=0;api.onupdate(position);api.oncomplete(position);return;}
resting=false;};var api=createObject({interpolate:interpolate,target:{set:setTarget,get:function get(){return target;},},resting:{get:function get(){return resting;},},onupdate:function onupdate(value){},oncomplete:function oncomplete(value){},});return api;};var easeLinear=function easeLinear(t){return t;};var easeInOutQuad=function easeInOutQuad(t){return t<0.5?2*t*t:-1+(4-2*t)*t;};var tween=function tween()
{var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$duration=_ref.duration,duration=_ref$duration===void 0?500:_ref$duration,_ref$easing=_ref.easing,easing=_ref$easing===void 0?easeInOutQuad:_ref$easing,_ref$delay=_ref.delay,delay=_ref$delay===void 0?0:_ref$delay;var start=null;var t;var p;var resting=true;var reverse=false;var target=null;var interpolate=function interpolate(ts,skipToEndState){if(resting||target===null)return;if(start===null){start=ts;}
if(ts-start<delay)return;t=ts-start-delay;if(t>=duration||skipToEndState){t=1;p=reverse?0:1;api.onupdate(p*target);api.oncomplete(p*target);resting=true;}else{p=t/duration;api.onupdate((t>=0?easing(reverse?1-p:p):0)*target);}};var api=createObject({interpolate:interpolate,target:{get:function get(){return reverse?0:target;},set:function set(value){if(target===null){target=value;api.onupdate(value);api.oncomplete(value);return;}
if(value<target){target=1;reverse=true;}else{reverse=false;target=value;}
resting=false;start=null;},},resting:{get:function get(){return resting;},},onupdate:function onupdate(value){},oncomplete:function oncomplete(value){},});return api;};var animator={spring:spring,tween:tween,};var createAnimator=function createAnimator(definition,category,property){var def=definition[category]&&typeof definition[category][property]==='object'?definition[category][property]:definition[category]||definition;var type=typeof def==='string'?def:def.type;var props=typeof def==='object'?Object.assign({},def):{};return animator[type]?animator[type](props):null;};var addGetSet=function addGetSet(keys,obj,props){var overwrite=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;obj=Array.isArray(obj)?obj:[obj];obj.forEach(function(o){keys.forEach(function(key){var name=key;var getter=function getter(){return props[key];};var setter=function setter(value){return(props[key]=value);};if(typeof key==='object'){name=key.key;getter=key.getter||getter;setter=key.setter||setter;}
if(o[name]&&!overwrite){return;}
o[name]={get:getter,set:setter,};});});};var animations=function animations(_ref){var mixinConfig=_ref.mixinConfig,viewProps=_ref.viewProps,viewInternalAPI=_ref.viewInternalAPI,viewExternalAPI=_ref.viewExternalAPI;var initialProps=Object.assign({},viewProps);var animations=[];forin(mixinConfig,function(property,animation){var animator=createAnimator(animation);if(!animator){return;}
animator.onupdate=function(value){viewProps[property]=value;};animator.target=initialProps[property];var prop={key:property,setter:function setter(value){if(animator.target===value){return;}
animator.target=value;},getter:function getter(){return viewProps[property];},};addGetSet([prop],[viewInternalAPI,viewExternalAPI],viewProps,true);animations.push(animator);});return{write:function write(ts){var skipToEndState=document.hidden;var resting=true;animations.forEach(function(animation){if(!animation.resting)resting=false;animation.interpolate(ts,skipToEndState);});return resting;},destroy:function destroy(){},};};var addEvent=function addEvent(element){return function(type,fn){element.addEventListener(type,fn);};};var removeEvent=function removeEvent(element){return function(type,fn){element.removeEventListener(type,fn);};};var listeners=function listeners(_ref){var mixinConfig=_ref.mixinConfig,viewProps=_ref.viewProps,viewInternalAPI=_ref.viewInternalAPI,viewExternalAPI=_ref.viewExternalAPI,viewState=_ref.viewState,view=_ref.view;var events=[];var add=addEvent(view.element);var remove=removeEvent(view.element);viewExternalAPI.on=function(type,fn){events.push({type:type,fn:fn,});add(type,fn);};viewExternalAPI.off=function(type,fn){events.splice(events.findIndex(function(event){return event.type===type&&event.fn===fn;}),1);remove(type,fn);};return{write:function write(){return true;},destroy:function destroy(){events.forEach(function(event){remove(event.type,event.fn);});},};};var apis=function apis(_ref){var mixinConfig=_ref.mixinConfig,viewProps=_ref.viewProps,viewExternalAPI=_ref.viewExternalAPI;addGetSet(mixinConfig,viewExternalAPI,viewProps);};var isDefined=function isDefined(value){return value!=null;};var defaults={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0,};var styles=function styles(_ref){var mixinConfig=_ref.mixinConfig,viewProps=_ref.viewProps,viewInternalAPI=_ref.viewInternalAPI,viewExternalAPI=_ref.viewExternalAPI,view=_ref.view;var initialProps=Object.assign({},viewProps);var currentProps={};addGetSet(mixinConfig,[viewInternalAPI,viewExternalAPI],viewProps);var getOffset=function getOffset(){return[viewProps['translateX']||0,viewProps['translateY']||0];};var getScale=function getScale(){return[viewProps['scaleX']||0,viewProps['scaleY']||0];};var getRect=function getRect(){return view.rect?getViewRect(view.rect,view.childViews,getOffset(),getScale()):null;};viewInternalAPI.rect={get:getRect};viewExternalAPI.rect={get:getRect};mixinConfig.forEach(function(key){viewProps[key]=typeof initialProps[key]==='undefined'?defaults[key]:initialProps[key];});return{write:function write(){if(!propsHaveChanged(currentProps,viewProps)){return;}
applyStyles(view.element,viewProps);Object.assign(currentProps,Object.assign({},viewProps));return true;},destroy:function destroy(){},};};var propsHaveChanged=function propsHaveChanged(currentProps,newProps){if(Object.keys(currentProps).length!==Object.keys(newProps).length){return true;}
for(var prop in newProps){if(newProps[prop]!==currentProps[prop]){return true;}}
return false;};var applyStyles=function applyStyles(element,_ref2){var opacity=_ref2.opacity,perspective=_ref2.perspective,translateX=_ref2.translateX,translateY=_ref2.translateY,scaleX=_ref2.scaleX,scaleY=_ref2.scaleY,rotateX=_ref2.rotateX,rotateY=_ref2.rotateY,rotateZ=_ref2.rotateZ,originX=_ref2.originX,originY=_ref2.originY,width=_ref2.width,height=_ref2.height;var transforms='';var styles='';if(isDefined(originX)||isDefined(originY)){styles+='transform-origin: '+(originX||0)+'px '+(originY||0)+'px;';}
if(isDefined(perspective)){transforms+='perspective('+perspective+'px) ';}
if(isDefined(translateX)||isDefined(translateY)){transforms+='translate3d('+(translateX||0)+'px, '+(translateY||0)+'px, 0) ';}
if(isDefined(scaleX)||isDefined(scaleY)){transforms+='scale3d('+
(isDefined(scaleX)?scaleX:1)+', '+
(isDefined(scaleY)?scaleY:1)+', 1) ';}
if(isDefined(rotateZ)){transforms+='rotateZ('+rotateZ+'rad) ';}
if(isDefined(rotateX)){transforms+='rotateX('+rotateX+'rad) ';}
if(isDefined(rotateY)){transforms+='rotateY('+rotateY+'rad) ';}
if(transforms.length){styles+='transform:'+transforms+';';}
if(isDefined(opacity)){styles+='opacity:'+opacity+';';if(opacity===0){styles+='visibility:hidden;';}
if(opacity<1){styles+='pointer-events:none;';}}
if(isDefined(height)){styles+='height:'+height+'px;';}
if(isDefined(width)){styles+='width:'+width+'px;';}
var elementCurrentStyle=element.elementCurrentStyle||'';if(styles.length!==elementCurrentStyle.length||styles!==elementCurrentStyle){element.style.cssText=styles;element.elementCurrentStyle=styles;}};var Mixins={styles:styles,listeners:listeners,animations:animations,apis:apis,};var updateRect=function updateRect(){var rect=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var element=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var style=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!element.layoutCalculated){rect.paddingTop=parseInt(style.paddingTop,10)||0;rect.marginTop=parseInt(style.marginTop,10)||0;rect.marginRight=parseInt(style.marginRight,10)||0;rect.marginBottom=parseInt(style.marginBottom,10)||0;rect.marginLeft=parseInt(style.marginLeft,10)||0;element.layoutCalculated=true;}
rect.left=element.offsetLeft||0;rect.top=element.offsetTop||0;rect.width=element.offsetWidth||0;rect.height=element.offsetHeight||0;rect.right=rect.left+rect.width;rect.bottom=rect.top+rect.height;rect.scrollTop=element.scrollTop;rect.hidden=element.offsetParent===null;return rect;};var createView=function createView(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$tag=_ref.tag,tag=_ref$tag===void 0?'div':_ref$tag,_ref$name=_ref.name,name=_ref$name===void 0?null:_ref$name,_ref$attributes=_ref.attributes,attributes=_ref$attributes===void 0?{}:_ref$attributes,_ref$read=_ref.read,read=_ref$read===void 0?function(){}:_ref$read,_ref$write=_ref.write,write=_ref$write===void 0?function(){}:_ref$write,_ref$create=_ref.create,create=_ref$create===void 0?function(){}:_ref$create,_ref$destroy=_ref.destroy,destroy=_ref$destroy===void 0?function(){}:_ref$destroy,_ref$filterFrameActio=_ref.filterFrameActionsForChild,filterFrameActionsForChild=_ref$filterFrameActio===void 0?function(child,actions){return actions;}:_ref$filterFrameActio,_ref$didCreateView=_ref.didCreateView,didCreateView=_ref$didCreateView===void 0?function(){}:_ref$didCreateView,_ref$didWriteView=_ref.didWriteView,didWriteView=_ref$didWriteView===void 0?function(){}:_ref$didWriteView,_ref$ignoreRect=_ref.ignoreRect,ignoreRect=_ref$ignoreRect===void 0?false:_ref$ignoreRect,_ref$ignoreRectUpdate=_ref.ignoreRectUpdate,ignoreRectUpdate=_ref$ignoreRectUpdate===void 0?false:_ref$ignoreRectUpdate,_ref$mixins=_ref.mixins,mixins=_ref$mixins===void 0?[]:_ref$mixins;return function(store){var props=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var element=createElement(tag,'filepond--'+name,attributes);var style=window.getComputedStyle(element,null);var rect=updateRect();var frameRect=null;var isResting=false;var childViews=[];var activeMixins=[];var ref={};var state={};var writers=[write,];var readers=[read,];var destroyers=[destroy,];var getElement=function getElement(){return element;};var getChildViews=function getChildViews(){return childViews.concat();};var getReference=function getReference(){return ref;};var createChildView=function createChildView(store){return function(view,props){return view(store,props);};};var getRect=function getRect(){if(frameRect){return frameRect;}
frameRect=getViewRect(rect,childViews,[0,0],[1,1]);return frameRect;};var getStyle=function getStyle(){return style;};var _read=function _read(){frameRect=null;childViews.forEach(function(child){return child._read();});var shouldUpdate=!(ignoreRectUpdate&&rect.width&&rect.height);if(shouldUpdate){updateRect(rect,element,style);}
var api={root:internalAPI,props:props,rect:rect};readers.forEach(function(reader){return reader(api);});};var _write=function _write(ts,frameActions,shouldOptimize){var resting=frameActions.length===0;writers.forEach(function(writer){var writerResting=writer({props:props,root:internalAPI,actions:frameActions,timestamp:ts,shouldOptimize:shouldOptimize,});if(writerResting===false){resting=false;}});activeMixins.forEach(function(mixin){var mixinResting=mixin.write(ts);if(mixinResting===false){resting=false;}});childViews.filter(function(child){return!!child.element.parentNode;}).forEach(function(child){var childResting=child._write(ts,filterFrameActionsForChild(child,frameActions),shouldOptimize);if(!childResting){resting=false;}});childViews.forEach(function(child,index){if(child.element.parentNode){return;}
internalAPI.appendChild(child.element,index);child._read();child._write(ts,filterFrameActionsForChild(child,frameActions),shouldOptimize);resting=false;});isResting=resting;didWriteView({props:props,root:internalAPI,actions:frameActions,timestamp:ts,});return resting;};var _destroy=function _destroy(){activeMixins.forEach(function(mixin){return mixin.destroy();});destroyers.forEach(function(destroyer){destroyer({root:internalAPI,props:props});});childViews.forEach(function(child){return child._destroy();});};var sharedAPIDefinition={element:{get:getElement,},style:{get:getStyle,},childViews:{get:getChildViews,},};var internalAPIDefinition=Object.assign({},sharedAPIDefinition,{rect:{get:getRect,},ref:{get:getReference,},is:function is(needle){return name===needle;},appendChild:appendChild(element),createChildView:createChildView(store),linkView:function linkView(view){childViews.push(view);return view;},unlinkView:function unlinkView(view){childViews.splice(childViews.indexOf(view),1);},appendChildView:appendChildView(element,childViews),removeChildView:removeChildView(element,childViews),registerWriter:function registerWriter(writer){return writers.push(writer);},registerReader:function registerReader(reader){return readers.push(reader);},registerDestroyer:function registerDestroyer(destroyer){return destroyers.push(destroyer);},invalidateLayout:function invalidateLayout(){return(element.layoutCalculated=false);},dispatch:store.dispatch,query:store.query,});var externalAPIDefinition={element:{get:getElement,},childViews:{get:getChildViews,},rect:{get:getRect,},resting:{get:function get(){return isResting;},},isRectIgnored:function isRectIgnored(){return ignoreRect;},_read:_read,_write:_write,_destroy:_destroy,};var mixinAPIDefinition=Object.assign({},sharedAPIDefinition,{rect:{get:function get(){return rect;},},});Object.keys(mixins).sort(function(a,b){if(a==='styles'){return 1;}else if(b==='styles'){return-1;}
return 0;}).forEach(function(key){var mixinAPI=Mixins[key]({mixinConfig:mixins[key],viewProps:props,viewState:state,viewInternalAPI:internalAPIDefinition,viewExternalAPI:externalAPIDefinition,view:createObject(mixinAPIDefinition),});if(mixinAPI){activeMixins.push(mixinAPI);}});var internalAPI=createObject(internalAPIDefinition);create({root:internalAPI,props:props,});var childCount=getChildCount(element);childViews.forEach(function(child,index){internalAPI.appendChild(child.element,childCount+index);});didCreateView(internalAPI);return createObject(externalAPIDefinition);};};var createPainter=function createPainter(read,write){var fps=arguments.length>2&&arguments[2]!==undefined?arguments[2]:60;var name='__framePainter';if(window[name]){window[name].readers.push(read);window[name].writers.push(write);return;}
window[name]={readers:[read],writers:[write],};var painter=window[name];var interval=1000/fps;var last=null;var id=null;var requestTick=null;var cancelTick=null;var setTimerType=function setTimerType(){if(document.hidden){requestTick=function requestTick(){return window.setTimeout(function(){return tick(performance.now());},interval);};cancelTick=function cancelTick(){return window.clearTimeout(id);};}else{requestTick=function requestTick(){return window.requestAnimationFrame(tick);};cancelTick=function cancelTick(){return window.cancelAnimationFrame(id);};}};document.addEventListener('visibilitychange',function(){if(cancelTick)cancelTick();setTimerType();tick(performance.now());});var tick=function tick(ts){id=requestTick(tick);if(!last){last=ts;}
var delta=ts-last;if(delta<=interval){return;}
last=ts-(delta%interval);painter.readers.forEach(function(read){return read();});painter.writers.forEach(function(write){return write(ts);});};setTimerType();tick(performance.now());return{pause:function pause(){cancelTick(id);},};};var createRoute=function createRoute(routes,fn){return function(_ref){var root=_ref.root,props=_ref.props,_ref$actions=_ref.actions,actions=_ref$actions===void 0?[]:_ref$actions,timestamp=_ref.timestamp,shouldOptimize=_ref.shouldOptimize;actions.filter(function(action){return routes[action.type];}).forEach(function(action){return routes[action.type]({root:root,props:props,action:action.data,timestamp:timestamp,shouldOptimize:shouldOptimize,});});if(fn){fn({root:root,props:props,actions:actions,timestamp:timestamp,shouldOptimize:shouldOptimize,});}};};var insertBefore=function insertBefore(newNode,referenceNode){return referenceNode.parentNode.insertBefore(newNode,referenceNode);};var insertAfter=function insertAfter(newNode,referenceNode){return referenceNode.parentNode.insertBefore(newNode,referenceNode.nextSibling);};var isArray=function isArray(value){return Array.isArray(value);};var isEmpty=function isEmpty(value){return value==null;};var trim=function trim(str){return str.trim();};var toString=function toString(value){return''+value;};var toArray=function toArray(value){var splitter=arguments.length>1&&arguments[1]!==undefined?arguments[1]:',';if(isEmpty(value)){return[];}
if(isArray(value)){return value;}
return toString(value).split(splitter).map(trim).filter(function(str){return str.length;});};var isBoolean=function isBoolean(value){return typeof value==='boolean';};var toBoolean=function toBoolean(value){return isBoolean(value)?value:value==='true';};var isString=function isString(value){return typeof value==='string';};var toNumber=function toNumber(value){return isNumber(value)?value:isString(value)?toString(value).replace(/[a-z]+/gi,''):0;};var toInt=function toInt(value){return parseInt(toNumber(value),10);};var toFloat=function toFloat(value){return parseFloat(toNumber(value));};var isInt=function isInt(value){return isNumber(value)&&isFinite(value)&&Math.floor(value)===value;};var toBytes=function toBytes(value){var base=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1000;if(isInt(value)){return value;}
var naturalFileSize=toString(value).trim();if(/MB$/i.test(naturalFileSize)){naturalFileSize=naturalFileSize.replace(/MB$i/,'').trim();return toInt(naturalFileSize)*base*base;}
if(/KB/i.test(naturalFileSize)){naturalFileSize=naturalFileSize.replace(/KB$i/,'').trim();return toInt(naturalFileSize)*base;}
return toInt(naturalFileSize);};var isFunction=function isFunction(value){return typeof value==='function';};var toFunctionReference=function toFunctionReference(string){var ref=self;var levels=string.split('.');var level=null;while((level=levels.shift())){ref=ref[level];if(!ref){return null;}}
return ref;};var methods={process:'POST',patch:'PATCH',revert:'DELETE',fetch:'GET',restore:'GET',load:'GET',};var createServerAPI=function createServerAPI(outline){var api={};api.url=isString(outline)?outline:outline.url||'';api.timeout=outline.timeout?parseInt(outline.timeout,10):0;api.headers=outline.headers?outline.headers:{};forin(methods,function(key){api[key]=createAction(key,outline[key],methods[key],api.timeout,api.headers);});api.process=outline.process||isString(outline)||outline.url?api.process:null;api.remove=outline.remove||null;delete api.headers;return api;};var createAction=function createAction(name,outline,method,timeout,headers){if(outline===null){return null;}
if(typeof outline==='function'){return outline;}
var action={url:method==='GET'||method==='PATCH'?'?'+name+'=':'',method:method,headers:headers,withCredentials:false,timeout:timeout,onload:null,ondata:null,onerror:null,};if(isString(outline)){action.url=outline;return action;}
Object.assign(action,outline);if(isString(action.headers)){var parts=action.headers.split(/:(.+)/);action.headers={header:parts[0],value:parts[1],};}
action.withCredentials=toBoolean(action.withCredentials);return action;};var toServerAPI=function toServerAPI(value){return createServerAPI(value);};var isNull=function isNull(value){return value===null;};var isObject=function isObject(value){return typeof value==='object'&&value!==null;};var isAPI=function isAPI(value){return(isObject(value)&&isString(value.url)&&isObject(value.process)&&isObject(value.revert)&&isObject(value.restore)&&isObject(value.fetch));};var getType=function getType(value){if(isArray(value)){return'array';}
if(isNull(value)){return'null';}
if(isInt(value)){return'int';}
if(/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(value)){return'bytes';}
if(isAPI(value)){return'api';}
return typeof value;};var replaceSingleQuotes=function replaceSingleQuotes(str){return str.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",');};var conversionTable={array:toArray,boolean:toBoolean,int:function int(value){return getType(value)==='bytes'?toBytes(value):toInt(value);},number:toFloat,float:toFloat,bytes:toBytes,string:function string(value){return isFunction(value)?value:toString(value);},function:function _function(value){return toFunctionReference(value);},serverapi:toServerAPI,object:function object(value){try{return JSON.parse(replaceSingleQuotes(value));}catch(e){return null;}},};var convertTo=function convertTo(value,type){return conversionTable[type](value);};var getValueByType=function getValueByType(newValue,defaultValue,valueType){if(newValue===defaultValue){return newValue;}
var newValueType=getType(newValue);if(newValueType!==valueType){var convertedValue=convertTo(newValue,valueType);newValueType=getType(convertedValue);if(convertedValue===null){throw'Trying to assign value with incorrect type to "'+
option+'", allowed type: "'+
valueType+'"';}else{newValue=convertedValue;}}
return newValue;};var createOption=function createOption(defaultValue,valueType){var currentValue=defaultValue;return{enumerable:true,get:function get(){return currentValue;},set:function set(newValue){currentValue=getValueByType(newValue,defaultValue,valueType);},};};var createOptions=function createOptions(options){var obj={};forin(options,function(prop){var optionDefinition=options[prop];obj[prop]=createOption(optionDefinition[0],optionDefinition[1]);});return createObject(obj);};var createInitialState=function createInitialState(options){return{items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:createOptions(options),};};var fromCamels=function fromCamels(string){var separator=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'-';return string.split(/(?=[A-Z])/).map(function(part){return part.toLowerCase();}).join(separator);};var createOptionAPI=function createOptionAPI(store,options){var obj={};forin(options,function(key){obj[key]={get:function get(){return store.getState().options[key];},set:function set(value){store.dispatch('SET_'+fromCamels(key,'_').toUpperCase(),{value:value,});},};});return obj;};var createOptionActions=function createOptionActions(options){return function(dispatch,query,state){var obj={};forin(options,function(key){var name=fromCamels(key,'_').toUpperCase();obj['SET_'+name]=function(action){try{state.options[key]=action.value;}catch(e){}
dispatch('DID_SET_'+name,{value:state.options[key]});};});return obj;};};var createOptionQueries=function createOptionQueries(options){return function(state){var obj={};forin(options,function(key){obj['GET_'+fromCamels(key,'_').toUpperCase()]=function(action){return state.options[key];};});return obj;};};var InteractionMethod={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5,};var getUniqueId=function getUniqueId(){return Math.random().toString(36).substring(2,11);};function _typeof(obj){if(typeof Symbol==='function'&&typeof Symbol.iterator==='symbol'){_typeof=function(obj){return typeof obj;};}else{_typeof=function(obj){return obj&&typeof Symbol==='function'&&obj.constructor===Symbol&&obj!==Symbol.prototype?'symbol':typeof obj;};}
return _typeof(obj);}
var REACT_ELEMENT_TYPE;function _jsx(type,props,key,children){if(!REACT_ELEMENT_TYPE){REACT_ELEMENT_TYPE=(typeof Symbol==='function'&&Symbol['for']&&Symbol['for']('react.element'))||0xeac7;}
var defaultProps=type&&type.defaultProps;var childrenLength=arguments.length-3;if(!props&&childrenLength!==0){props={children:void 0,};}
if(props&&defaultProps){for(var propName in defaultProps){if(props[propName]===void 0){props[propName]=defaultProps[propName];}}}else if(!props){props=defaultProps||{};}
if(childrenLength===1){props.children=children;}else if(childrenLength>1){var childArray=new Array(childrenLength);for(var i=0;i<childrenLength;i++){childArray[i]=arguments[i+3];}
props.children=childArray;}
return{$$typeof:REACT_ELEMENT_TYPE,type:type,key:key===undefined?null:''+key,ref:null,props:props,_owner:null,};}
function _asyncIterator(iterable){var method;if(typeof Symbol!=='undefined'){if(Symbol.asyncIterator){method=iterable[Symbol.asyncIterator];if(method!=null)return method.call(iterable);}
if(Symbol.iterator){method=iterable[Symbol.iterator];if(method!=null)return method.call(iterable);}}
throw new TypeError('Object is not async iterable');}
function _AwaitValue(value){this.wrapped=value;}
function _AsyncGenerator(gen){var front,back;function send(key,arg){return new Promise(function(resolve,reject){var request={key:key,arg:arg,resolve:resolve,reject:reject,next:null,};if(back){back=back.next=request;}else{front=back=request;resume(key,arg);}});}
function resume(key,arg){try{var result=gen[key](arg);var value=result.value;var wrappedAwait=value instanceof _AwaitValue;Promise.resolve(wrappedAwait?value.wrapped:value).then(function(arg){if(wrappedAwait){resume('next',arg);return;}
settle(result.done?'return':'normal',arg);},function(err){resume('throw',err);});}catch(err){settle('throw',err);}}
function settle(type,value){switch(type){case'return':front.resolve({value:value,done:true,});break;case'throw':front.reject(value);break;default:front.resolve({value:value,done:false,});break;}
front=front.next;if(front){resume(front.key,front.arg);}else{back=null;}}
this._invoke=send;if(typeof gen.return!=='function'){this.return=undefined;}}
if(typeof Symbol==='function'&&Symbol.asyncIterator){_AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this;};}
_AsyncGenerator.prototype.next=function(arg){return this._invoke('next',arg);};_AsyncGenerator.prototype.throw=function(arg){return this._invoke('throw',arg);};_AsyncGenerator.prototype.return=function(arg){return this._invoke('return',arg);};function _wrapAsyncGenerator(fn){return function(){return new _AsyncGenerator(fn.apply(this,arguments));};}
function _awaitAsyncGenerator(value){return new _AwaitValue(value);}
function _asyncGeneratorDelegate(inner,awaitWrap){var iter={},waiting=false;function pump(key,value){waiting=true;value=new Promise(function(resolve){resolve(inner[key](value));});return{done:false,value:awaitWrap(value),};}
if(typeof Symbol==='function'&&Symbol.iterator){iter[Symbol.iterator]=function(){return this;};}
iter.next=function(value){if(waiting){waiting=false;return value;}
return pump('next',value);};if(typeof inner.throw==='function'){iter.throw=function(value){if(waiting){waiting=false;throw value;}
return pump('throw',value);};}
if(typeof inner.return==='function'){iter.return=function(value){return pump('return',value);};}
return iter;}
function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}
if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}
function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,'next',value);}
function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,'throw',err);}
_next(undefined);});};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
function _defineEnumerableProperties(obj,descs){for(var key in descs){var desc=descs[key];desc.configurable=desc.enumerable=true;if('value'in desc)desc.writable=true;Object.defineProperty(obj,key,desc);}
if(Object.getOwnPropertySymbols){var objectSymbols=Object.getOwnPropertySymbols(descs);for(var i=0;i<objectSymbols.length;i++){var sym=objectSymbols[i];var desc=descs[sym];desc.configurable=desc.enumerable=true;if('value'in desc)desc.writable=true;Object.defineProperty(obj,sym,desc);}}
return obj;}
function _defaults(obj,defaults){var keys=Object.getOwnPropertyNames(defaults);for(var i=0;i<keys.length;i++){var key=keys[i];var value=Object.getOwnPropertyDescriptor(defaults,key);if(value&&value.configurable&&obj[key]===undefined){Object.defineProperty(obj,key,value);}}
return obj;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true,});}else{obj[key]=value;}
return obj;}
function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}
return target;};return _extends.apply(this,arguments);}
function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==='function'){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}
ownKeys.forEach(function(key){_defineProperty(target,key,source[key]);});}
return target;}
function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)
symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}
return keys;}
function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}
return target;}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function');}
subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true,},});if(superClass)_setPrototypeOf(subClass,superClass);}
function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass;}
function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}
function isNativeReflectConstruct(){if(typeof Reflect==='undefined'||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==='function')return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}
function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct;}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor();if(Class)_setPrototypeOf(instance,Class.prototype);return instance;};}
return _construct.apply(null,arguments);}
function _isNativeFunction(fn){return Function.toString.call(fn).indexOf('[native code]')!==-1;}
function _wrapNativeSuper(Class){var _cache=typeof Map==='function'?new Map():undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=='function'){throw new TypeError('Super expression must either be null or a function');}
if(typeof _cache!=='undefined'){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper);}
function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor);}
Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true,},});return _setPrototypeOf(Wrapper,Class);};return _wrapNativeSuper(Class);}
function _instanceof(left,right){if(right!=null&&typeof Symbol!=='undefined'&&right[Symbol.hasInstance]){return!!right[Symbol.hasInstance](left);}else{return left instanceof right;}}
function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj,};}
function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}}
newObj.default=obj;return newObj;}}
function _newArrowCheck(innerThis,boundThis){if(innerThis!==boundThis){throw new TypeError('Cannot instantiate an arrow function');}}
function _objectDestructuringEmpty(obj){if(obj==null)throw new TypeError('Cannot destructure undefined');}
function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key];}
return target;}
function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key];}}
return target;}
function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}
return self;}
function _possibleConstructorReturn(self,call){if(call&&(typeof call==='object'||typeof call==='function')){return call;}
return _assertThisInitialized(self);}
function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}
return object;}
function _get(target,property,receiver){if(typeof Reflect!=='undefined'&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}
return desc.value;};}
return _get(target,property,receiver||target);}
function set(target,property,value,receiver){if(typeof Reflect!=='undefined'&&Reflect.set){set=Reflect.set;}else{set=function set(target,property,value,receiver){var base=_superPropBase(target,property);var desc;if(base){desc=Object.getOwnPropertyDescriptor(base,property);if(desc.set){desc.set.call(receiver,value);return true;}else if(!desc.writable){return false;}}
desc=Object.getOwnPropertyDescriptor(receiver,property);if(desc){if(!desc.writable){return false;}
desc.value=value;Object.defineProperty(receiver,property,desc);}else{_defineProperty(receiver,property,value);}
return true;};}
return set(target,property,value,receiver);}
function _set(target,property,value,receiver,isStrict){var s=set(target,property,value,receiver||target);if(!s&&isStrict){throw new Error('failed to set property');}
return value;}
function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0);}
return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw),},}));}
function _taggedTemplateLiteralLoose(strings,raw){if(!raw){raw=strings.slice(0);}
strings.raw=raw;return strings;}
function _temporalRef(val,name){if(val===_temporalUndefined){throw new ReferenceError(name+' is not defined - temporal dead zone');}else{return val;}}
function _readOnlyError(name){throw new Error('"'+name+'" is read-only');}
function _classNameTDZError(name){throw new Error('Class "'+name+'" cannot be referenced in computed property keys.');}
var _temporalUndefined={};function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest();}
function _slicedToArrayLoose(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimitLoose(arr,i)||_nonIterableRest();}
function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_nonIterableRest();}
function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread();}
function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2;}}
function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}
function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==='[object Arguments]')
return Array.from(iter);}
function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i['return']!=null)_i['return']();}finally{if(_d)throw _e;}}
return _arr;}
function _iterableToArrayLimitLoose(arr,i){var _arr=[];for(var _iterator=arr[Symbol.iterator](),_step;!(_step=_iterator.next()).done;){_arr.push(_step.value);if(i&&_arr.length===i)break;}
return _arr;}
function _nonIterableSpread(){throw new TypeError('Invalid attempt to spread non-iterable instance');}
function _nonIterableRest(){throw new TypeError('Invalid attempt to destructure non-iterable instance');}
function _skipFirstGeneratorNext(fn){return function(){var it=fn.apply(this,arguments);it.next();return it;};}
function _toPrimitive(input,hint){if(typeof input!=='object'||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||'default');if(typeof res!=='object')return res;throw new TypeError('@@toPrimitive must return a primitive value.');}
return(hint==='string'?String:Number)(input);}
function _toPropertyKey(arg){var key=_toPrimitive(arg,'string');return typeof key==='symbol'?key:String(key);}
function _initializerWarningHelper(descriptor,context){throw new Error('Decorating class property failed. Please ensure that '+'proposal-class-properties is enabled and set to use loose mode. '+'To use proposal-class-properties in spec mode with decorators, wait for '+'the next major version of decorators in stage 2.');}
function _initializerDefineProperty(target,property,descriptor,context){if(!descriptor)return;Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0,});}
function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}
desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}
if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}
return desc;}
var id=0;function _classPrivateFieldLooseKey(name){return'__private_'+id++ +'_'+name;}
function _classPrivateFieldLooseBase(receiver,privateKey){if(!Object.prototype.hasOwnProperty.call(receiver,privateKey)){throw new TypeError('attempted to use private field on non-instance');}
return receiver;}
function _classPrivateFieldGet(receiver,privateMap){var descriptor=privateMap.get(receiver);if(!descriptor){throw new TypeError('attempted to get private field on non-instance');}
if(descriptor.get){return descriptor.get.call(receiver);}
return descriptor.value;}
function _classPrivateFieldSet(receiver,privateMap,value){var descriptor=privateMap.get(receiver);if(!descriptor){throw new TypeError('attempted to set private field on non-instance');}
if(descriptor.set){descriptor.set.call(receiver,value);}else{if(!descriptor.writable){throw new TypeError('attempted to set read only private field');}
descriptor.value=value;}
return value;}
function _classPrivateFieldDestructureSet(receiver,privateMap){if(!privateMap.has(receiver)){throw new TypeError('attempted to set private field on non-instance');}
var descriptor=privateMap.get(receiver);if(descriptor.set){if(!('__destrObj'in descriptor)){descriptor.__destrObj={set value(v){descriptor.set.call(receiver,v);},};}
return descriptor.__destrObj;}else{if(!descriptor.writable){throw new TypeError('attempted to set read only private field');}
return descriptor;}}
function _classStaticPrivateFieldSpecGet(receiver,classConstructor,descriptor){if(receiver!==classConstructor){throw new TypeError('Private static access of wrong provenance');}
return descriptor.value;}
function _classStaticPrivateFieldSpecSet(receiver,classConstructor,descriptor,value){if(receiver!==classConstructor){throw new TypeError('Private static access of wrong provenance');}
if(!descriptor.writable){throw new TypeError('attempted to set read only private field');}
descriptor.value=value;return value;}
function _classStaticPrivateMethodGet(receiver,classConstructor,method){if(receiver!==classConstructor){throw new TypeError('Private static access of wrong provenance');}
return method;}
function _classStaticPrivateMethodSet(){throw new TypeError('attempted to set read only static private field');}
function _decorate(decorators,factory,superClass,mixins){var api=_getDecoratorsApi();if(mixins){for(var i=0;i<mixins.length;i++){api=mixins[i](api);}}
var r=factory(function initialize(O){api.initializeInstanceElements(O,decorated.elements);},superClass);var decorated=api.decorateClass(_coalesceClassElements(r.d.map(_createElementDescriptor)),decorators);api.initializeClassElements(r.F,decorated.elements);return api.runClassFinishers(r.F,decorated.finishers);}
function _getDecoratorsApi(){_getDecoratorsApi=function(){return api;};var api={elementsDefinitionOrder:[['method'],['field']],initializeInstanceElements:function(O,elements){['method','field'].forEach(function(kind){elements.forEach(function(element){if(element.kind===kind&&element.placement==='own'){this.defineClassElement(O,element);}},this);},this);},initializeClassElements:function(F,elements){var proto=F.prototype;['method','field'].forEach(function(kind){elements.forEach(function(element){var placement=element.placement;if(element.kind===kind&&(placement==='static'||placement==='prototype')){var receiver=placement==='static'?F:proto;this.defineClassElement(receiver,element);}},this);},this);},defineClassElement:function(receiver,element){var descriptor=element.descriptor;if(element.kind==='field'){var initializer=element.initializer;descriptor={enumerable:descriptor.enumerable,writable:descriptor.writable,configurable:descriptor.configurable,value:initializer===void 0?void 0:initializer.call(receiver),};}
Object.defineProperty(receiver,element.key,descriptor);},decorateClass:function(elements,decorators){var newElements=[];var finishers=[];var placements={static:[],prototype:[],own:[],};elements.forEach(function(element){this.addElementPlacement(element,placements);},this);elements.forEach(function(element){if(!_hasDecorators(element))return newElements.push(element);var elementFinishersExtras=this.decorateElement(element,placements);newElements.push(elementFinishersExtras.element);newElements.push.apply(newElements,elementFinishersExtras.extras);finishers.push.apply(finishers,elementFinishersExtras.finishers);},this);if(!decorators){return{elements:newElements,finishers:finishers,};}
var result=this.decorateConstructor(newElements,decorators);finishers.push.apply(finishers,result.finishers);result.finishers=finishers;return result;},addElementPlacement:function(element,placements,silent){var keys=placements[element.placement];if(!silent&&keys.indexOf(element.key)!==-1){throw new TypeError('Duplicated element ('+element.key+')');}
keys.push(element.key);},decorateElement:function(element,placements){var extras=[];var finishers=[];for(var decorators=element.decorators,i=decorators.length-1;i>=0;i--){var keys=placements[element.placement];keys.splice(keys.indexOf(element.key),1);var elementObject=this.fromElementDescriptor(element);var elementFinisherExtras=this.toElementFinisherExtras((0,decorators[i])(elementObject)||elementObject);element=elementFinisherExtras.element;this.addElementPlacement(element,placements);if(elementFinisherExtras.finisher){finishers.push(elementFinisherExtras.finisher);}
var newExtras=elementFinisherExtras.extras;if(newExtras){for(var j=0;j<newExtras.length;j++){this.addElementPlacement(newExtras[j],placements);}
extras.push.apply(extras,newExtras);}}
return{element:element,finishers:finishers,extras:extras,};},decorateConstructor:function(elements,decorators){var finishers=[];for(var i=decorators.length-1;i>=0;i--){var obj=this.fromClassDescriptor(elements);var elementsAndFinisher=this.toClassDescriptor((0,decorators[i])(obj)||obj);if(elementsAndFinisher.finisher!==undefined){finishers.push(elementsAndFinisher.finisher);}
if(elementsAndFinisher.elements!==undefined){elements=elementsAndFinisher.elements;for(var j=0;j<elements.length-1;j++){for(var k=j+1;k<elements.length;k++){if(elements[j].key===elements[k].key&&elements[j].placement===elements[k].placement){throw new TypeError('Duplicated element ('+elements[j].key+')');}}}}}
return{elements:elements,finishers:finishers,};},fromElementDescriptor:function(element){var obj={kind:element.kind,key:element.key,placement:element.placement,descriptor:element.descriptor,};var desc={value:'Descriptor',configurable:true,};Object.defineProperty(obj,Symbol.toStringTag,desc);if(element.kind==='field')obj.initializer=element.initializer;return obj;},toElementDescriptors:function(elementObjects){if(elementObjects===undefined)return;return _toArray(elementObjects).map(function(elementObject){var element=this.toElementDescriptor(elementObject);this.disallowProperty(elementObject,'finisher','An element descriptor');this.disallowProperty(elementObject,'extras','An element descriptor');return element;},this);},toElementDescriptor:function(elementObject){var kind=String(elementObject.kind);if(kind!=='method'&&kind!=='field'){throw new TypeError('An element descriptor\'s .kind property must be either "method" or'+' "field", but a decorator created an element descriptor with'+' .kind "'+
kind+'"');}
var key=_toPropertyKey(elementObject.key);var placement=String(elementObject.placement);if(placement!=='static'&&placement!=='prototype'&&placement!=='own'){throw new TypeError('An element descriptor\'s .placement property must be one of "static",'+' "prototype" or "own", but a decorator created an element descriptor'+' with .placement "'+
placement+'"');}
var descriptor=elementObject.descriptor;this.disallowProperty(elementObject,'elements','An element descriptor');var element={kind:kind,key:key,placement:placement,descriptor:Object.assign({},descriptor),};if(kind!=='field'){this.disallowProperty(elementObject,'initializer','A method descriptor');}else{this.disallowProperty(descriptor,'get','The property descriptor of a field descriptor');this.disallowProperty(descriptor,'set','The property descriptor of a field descriptor');this.disallowProperty(descriptor,'value','The property descriptor of a field descriptor');element.initializer=elementObject.initializer;}
return element;},toElementFinisherExtras:function(elementObject){var element=this.toElementDescriptor(elementObject);var finisher=_optionalCallableProperty(elementObject,'finisher');var extras=this.toElementDescriptors(elementObject.extras);return{element:element,finisher:finisher,extras:extras,};},fromClassDescriptor:function(elements){var obj={kind:'class',elements:elements.map(this.fromElementDescriptor,this),};var desc={value:'Descriptor',configurable:true,};Object.defineProperty(obj,Symbol.toStringTag,desc);return obj;},toClassDescriptor:function(obj){var kind=String(obj.kind);if(kind!=='class'){throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator'+' created a class descriptor with .kind "'+
kind+'"');}
this.disallowProperty(obj,'key','A class descriptor');this.disallowProperty(obj,'placement','A class descriptor');this.disallowProperty(obj,'descriptor','A class descriptor');this.disallowProperty(obj,'initializer','A class descriptor');this.disallowProperty(obj,'extras','A class descriptor');var finisher=_optionalCallableProperty(obj,'finisher');var elements=this.toElementDescriptors(obj.elements);return{elements:elements,finisher:finisher,};},runClassFinishers:function(constructor,finishers){for(var i=0;i<finishers.length;i++){var newConstructor=(0,finishers[i])(constructor);if(newConstructor!==undefined){if(typeof newConstructor!=='function'){throw new TypeError('Finishers must return a constructor.');}
constructor=newConstructor;}}
return constructor;},disallowProperty:function(obj,name,objectType){if(obj[name]!==undefined){throw new TypeError(objectType+" can't have a ."+name+' property.');}},};return api;}
function _createElementDescriptor(def){var key=_toPropertyKey(def.key);var descriptor;if(def.kind==='method'){descriptor={value:def.value,writable:true,configurable:true,enumerable:false,};}else if(def.kind==='get'){descriptor={get:def.value,configurable:true,enumerable:false,};}else if(def.kind==='set'){descriptor={set:def.value,configurable:true,enumerable:false,};}else if(def.kind==='field'){descriptor={configurable:true,writable:true,enumerable:true,};}
var element={kind:def.kind==='field'?'field':'method',key:key,placement:def.static?'static':def.kind==='field'?'own':'prototype',descriptor:descriptor,};if(def.decorators)element.decorators=def.decorators;if(def.kind==='field')element.initializer=def.value;return element;}
function _coalesceGetterSetter(element,other){if(element.descriptor.get!==undefined){other.descriptor.get=element.descriptor.get;}else{other.descriptor.set=element.descriptor.set;}}
function _coalesceClassElements(elements){var newElements=[];var isSameElement=function(other){return(other.kind==='method'&&other.key===element.key&&other.placement===element.placement);};for(var i=0;i<elements.length;i++){var element=elements[i];var other;if(element.kind==='method'&&(other=newElements.find(isSameElement))){if(_isDataDescriptor(element.descriptor)||_isDataDescriptor(other.descriptor)){if(_hasDecorators(element)||_hasDecorators(other)){throw new ReferenceError('Duplicated methods ('+element.key+") can't be decorated.");}
other.descriptor=element.descriptor;}else{if(_hasDecorators(element)){if(_hasDecorators(other)){throw new ReferenceError("Decorators can't be placed on different accessors with for "+'the same property ('+
element.key+').');}
other.decorators=element.decorators;}
_coalesceGetterSetter(element,other);}}else{newElements.push(element);}}
return newElements;}
function _hasDecorators(element){return element.decorators&&element.decorators.length;}
function _isDataDescriptor(desc){return desc!==undefined&&!(desc.value===undefined&&desc.writable===undefined);}
function _optionalCallableProperty(obj,name){var value=obj[name];if(value!==undefined&&typeof value!=='function'){throw new TypeError("Expected '"+name+"' to be a function");}
return value;}
function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError('attempted to get private field on non-instance');}
return fn;}
function _classPrivateMethodSet(){throw new TypeError('attempted to reassign private method');}
function _wrapRegExp(re,groups){_wrapRegExp=function(re,groups){return new BabelRegExp(re,groups);};var _RegExp=_wrapNativeSuper(RegExp);var _super=RegExp.prototype;var _groups=new WeakMap();function BabelRegExp(re,groups){var _this=_RegExp.call(this,re);_groups.set(_this,groups);return _this;}
_inherits(BabelRegExp,_RegExp);BabelRegExp.prototype.exec=function(str){var result=_super.exec.call(this,str);if(result)result.groups=buildGroups(result,this);return result;};BabelRegExp.prototype[Symbol.replace]=function(str,substitution){if(typeof substitution==='string'){var groups=_groups.get(this);return _super[Symbol.replace].call(this,str,substitution.replace(/\$<([^>]+)>/g,function(_,name){return'$'+groups[name];}));}else if(typeof substitution==='function'){var _this=this;return _super[Symbol.replace].call(this,str,function(){var args=[];args.push.apply(args,arguments);if(typeof args[args.length-1]!=='object'){args.push(buildGroups(args,_this));}
return substitution.apply(this,args);});}else{return _super[Symbol.replace].call(this,str,substitution);}};function buildGroups(result,re){var g=_groups.get(re);return Object.keys(g).reduce(function(groups,name){groups[name]=result[g[name]];return groups;},Object.create(null));}
return _wrapRegExp.apply(this,arguments);}
var arrayRemove=function arrayRemove(arr,index){return arr.splice(index,1);};var run=function run(cb,sync){if(sync){cb();}else if(document.hidden){Promise.resolve(1).then(cb);}else{setTimeout(cb,0);}};var on=function on(){var listeners=[];var off=function off(event,cb){arrayRemove(listeners,listeners.findIndex(function(listener){return listener.event===event&&(listener.cb===cb||!cb);}));};var _fire=function fire(event,args,sync){listeners.filter(function(listener){return listener.event===event;}).map(function(listener){return listener.cb;}).forEach(function(cb){return run(function(){return cb.apply(void 0,_toConsumableArray(args));},sync);});};return{fireSync:function fireSync(event){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}
_fire(event,args,true);},fire:function fire(event){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2];}
_fire(event,args,false);},on:function on(event,cb){listeners.push({event:event,cb:cb});},onOnce:function onOnce(event,_cb){listeners.push({event:event,cb:function cb(){off(event,_cb);_cb.apply(void 0,arguments);},});},off:off,};};var copyObjectPropertiesToObject=function copyObjectPropertiesToObject(src,target,excluded){Object.getOwnPropertyNames(src).filter(function(property){return!excluded.includes(property);}).forEach(function(key){return Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(src,key));});};var PRIVATE=['fire','process','revert','load','on','off','onOnce','retryLoad','extend','archive','archived','release','released','requestProcessing','freeze',];var createItemAPI=function createItemAPI(item){var api={};copyObjectPropertiesToObject(item,api,PRIVATE);return api;};var removeReleasedItems=function removeReleasedItems(items){items.forEach(function(item,index){if(item.released){arrayRemove(items,index);}});};var ItemStatus={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8,};var FileOrigin={INPUT:1,LIMBO:2,LOCAL:3,};var getNonNumeric=function getNonNumeric(str){return/[^0-9]+/.exec(str);};var getDecimalSeparator=function getDecimalSeparator(){return getNonNumeric((1.1).toLocaleString())[0];};var getThousandsSeparator=function getThousandsSeparator(){var decimalSeparator=getDecimalSeparator();var thousandsStringWithSeparator=(1000.0).toLocaleString();var thousandsStringWithoutSeparator=(1000.0).toString();if(thousandsStringWithSeparator!==thousandsStringWithoutSeparator){return getNonNumeric(thousandsStringWithSeparator)[0];}
return decimalSeparator==='.'?',':'.';};var Type={BOOLEAN:'boolean',INT:'int',NUMBER:'number',STRING:'string',ARRAY:'array',OBJECT:'object',FUNCTION:'function',ACTION:'action',SERVER_API:'serverapi',REGEX:'regex',};var filters=[];var applyFilterChain=function applyFilterChain(key,value,utils){return new Promise(function(resolve,reject){var matchingFilters=filters.filter(function(f){return f.key===key;}).map(function(f){return f.cb;});if(matchingFilters.length===0){resolve(value);return;}
var initialFilter=matchingFilters.shift();matchingFilters.reduce(function(current,next){return current.then(function(value){return next(value,utils);});},initialFilter(value,utils)).then(function(value){return resolve(value);}).catch(function(error){return reject(error);});});};var applyFilters=function applyFilters(key,value,utils){return filters.filter(function(f){return f.key===key;}).map(function(f){return f.cb(value,utils);});};var addFilter=function addFilter(key,cb){return filters.push({key:key,cb:cb});};var extendDefaultOptions=function extendDefaultOptions(additionalOptions){return Object.assign(defaultOptions,additionalOptions);};var getOptions=function getOptions(){return Object.assign({},defaultOptions);};var setOptions=function setOptions(opts){forin(opts,function(key,value){if(!defaultOptions[key]){return;}
defaultOptions[key][0]=getValueByType(value,defaultOptions[key][0],defaultOptions[key][1]);});};var defaultOptions={id:[null,Type.STRING],name:['filepond',Type.STRING],disabled:[false,Type.BOOLEAN],className:[null,Type.STRING],required:[false,Type.BOOLEAN],captureMethod:[null,Type.STRING],allowSyncAcceptAttribute:[true,Type.BOOLEAN],allowDrop:[true,Type.BOOLEAN],allowBrowse:[true,Type.BOOLEAN],allowPaste:[true,Type.BOOLEAN],allowMultiple:[false,Type.BOOLEAN],allowReplace:[true,Type.BOOLEAN],allowRevert:[true,Type.BOOLEAN],allowRemove:[true,Type.BOOLEAN],allowProcess:[true,Type.BOOLEAN],allowReorder:[false,Type.BOOLEAN],allowDirectoriesOnly:[false,Type.BOOLEAN],storeAsFile:[false,Type.BOOLEAN],forceRevert:[false,Type.BOOLEAN],maxFiles:[null,Type.INT],checkValidity:[false,Type.BOOLEAN],itemInsertLocationFreedom:[true,Type.BOOLEAN],itemInsertLocation:['before',Type.STRING],itemInsertInterval:[75,Type.INT],dropOnPage:[false,Type.BOOLEAN],dropOnElement:[true,Type.BOOLEAN],dropValidation:[false,Type.BOOLEAN],ignoredFiles:[['.ds_store','thumbs.db','desktop.ini'],Type.ARRAY],instantUpload:[true,Type.BOOLEAN],maxParallelUploads:[2,Type.INT],allowMinimumUploadDuration:[true,Type.BOOLEAN],chunkUploads:[false,Type.BOOLEAN],chunkForce:[false,Type.BOOLEAN],chunkSize:[5000000,Type.INT],chunkRetryDelays:[[500,1000,3000],Type.ARRAY],server:[null,Type.SERVER_API],fileSizeBase:[1000,Type.INT],labelFileSizeBytes:['bytes',Type.STRING],labelFileSizeKilobytes:['KB',Type.STRING],labelFileSizeMegabytes:['MB',Type.STRING],labelFileSizeGigabytes:['GB',Type.STRING],labelDecimalSeparator:[getDecimalSeparator(),Type.STRING],labelThousandsSeparator:[getThousandsSeparator(),Type.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',Type.STRING,],labelInvalidField:['Field contains invalid files',Type.STRING],labelFileWaitingForSize:['Waiting for size',Type.STRING],labelFileSizeNotAvailable:['Size not available',Type.STRING],labelFileCountSingular:['file in list',Type.STRING],labelFileCountPlural:['files in list',Type.STRING],labelFileLoading:['Loading',Type.STRING],labelFileAdded:['Added',Type.STRING],labelFileLoadError:['Error during load',Type.STRING],labelFileRemoved:['Removed',Type.STRING],labelFileRemoveError:['Error during remove',Type.STRING],labelFileProcessing:['Uploading',Type.STRING],labelFileProcessingComplete:['Upload complete',Type.STRING],labelFileProcessingAborted:['Upload cancelled',Type.STRING],labelFileProcessingError:['Error during upload',Type.STRING],labelFileProcessingRevertError:['Error during revert',Type.STRING],labelTapToCancel:['tap to cancel',Type.STRING],labelTapToRetry:['tap to retry',Type.STRING],labelTapToUndo:['tap to undo',Type.STRING],labelButtonRemoveItem:['Remove',Type.STRING],labelButtonAbortItemLoad:['Abort',Type.STRING],labelButtonRetryItemLoad:['Retry',Type.STRING],labelButtonAbortItemProcessing:['Cancel',Type.STRING],labelButtonUndoItemProcessing:['Undo',Type.STRING],labelButtonRetryItemProcessing:['Retry',Type.STRING],labelButtonProcessItem:['Upload',Type.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',Type.STRING,],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',Type.STRING,],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',Type.STRING,],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',Type.STRING,],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',Type.STRING,],oninit:[null,Type.FUNCTION],onwarning:[null,Type.FUNCTION],onerror:[null,Type.FUNCTION],onactivatefile:[null,Type.FUNCTION],oninitfile:[null,Type.FUNCTION],onaddfilestart:[null,Type.FUNCTION],onaddfileprogress:[null,Type.FUNCTION],onaddfile:[null,Type.FUNCTION],onprocessfilestart:[null,Type.FUNCTION],onprocessfileprogress:[null,Type.FUNCTION],onprocessfileabort:[null,Type.FUNCTION],onprocessfilerevert:[null,Type.FUNCTION],onprocessfile:[null,Type.FUNCTION],onprocessfiles:[null,Type.FUNCTION],onremovefile:[null,Type.FUNCTION],onpreparefile:[null,Type.FUNCTION],onupdatefiles:[null,Type.FUNCTION],onreorderfiles:[null,Type.FUNCTION],beforeDropFile:[null,Type.FUNCTION],beforeAddFile:[null,Type.FUNCTION],beforeRemoveFile:[null,Type.FUNCTION],beforePrepareFile:[null,Type.FUNCTION],stylePanelLayout:[null,Type.STRING],stylePanelAspectRatio:[null,Type.STRING],styleItemPanelAspectRatio:[null,Type.STRING],styleButtonRemoveItemPosition:['left',Type.STRING],styleButtonProcessItemPosition:['right',Type.STRING],styleLoadIndicatorPosition:['right',Type.STRING],styleProgressIndicatorPosition:['right',Type.STRING],styleButtonRemoveItemAlign:[false,Type.BOOLEAN],files:[[],Type.ARRAY],credits:[['https://pqina.nl/','Powered by PQINA'],Type.ARRAY],};var getItemByQuery=function getItemByQuery(items,query){if(isEmpty(query)){return items[0]||null;}
if(isInt(query)){return items[query]||null;}
if(typeof query==='object'){query=query.id;}
return(items.find(function(item){return item.id===query;})||null);};var getNumericAspectRatioFromString=function getNumericAspectRatioFromString(aspectRatio){if(isEmpty(aspectRatio)){return aspectRatio;}
if(/:/.test(aspectRatio)){var parts=aspectRatio.split(':');return parts[1]/parts[0];}
return parseFloat(aspectRatio);};var getActiveItems=function getActiveItems(items){return items.filter(function(item){return!item.archived;});};var Status={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4,};var res=null;var canUpdateFileInput=function canUpdateFileInput(){if(res===null){try{var dataTransfer=new DataTransfer();dataTransfer.items.add(new File(['hello world'],'This_Works.txt'));var el=document.createElement('input');el.setAttribute('type','file');el.files=dataTransfer.files;res=el.files.length===1;}catch(err){res=false;}}
return res;};var ITEM_ERROR=[ItemStatus.LOAD_ERROR,ItemStatus.PROCESSING_ERROR,ItemStatus.PROCESSING_REVERT_ERROR,];var ITEM_BUSY=[ItemStatus.LOADING,ItemStatus.PROCESSING,ItemStatus.PROCESSING_QUEUED,ItemStatus.INIT,];var ITEM_READY=[ItemStatus.PROCESSING_COMPLETE];var isItemInErrorState=function isItemInErrorState(item){return ITEM_ERROR.includes(item.status);};var isItemInBusyState=function isItemInBusyState(item){return ITEM_BUSY.includes(item.status);};var isItemInReadyState=function isItemInReadyState(item){return ITEM_READY.includes(item.status);};var isAsync=function isAsync(state){return(isObject(state.options.server)&&(isObject(state.options.server.process)||isFunction(state.options.server.process)));};var queries=function queries(state){return{GET_STATUS:function GET_STATUS(){var items=getActiveItems(state.items);var EMPTY=Status.EMPTY,ERROR=Status.ERROR,BUSY=Status.BUSY,IDLE=Status.IDLE,READY=Status.READY;if(items.length===0)return EMPTY;if(items.some(isItemInErrorState))return ERROR;if(items.some(isItemInBusyState))return BUSY;if(items.some(isItemInReadyState))return READY;return IDLE;},GET_ITEM:function GET_ITEM(query){return getItemByQuery(state.items,query);},GET_ACTIVE_ITEM:function GET_ACTIVE_ITEM(query){return getItemByQuery(getActiveItems(state.items),query);},GET_ACTIVE_ITEMS:function GET_ACTIVE_ITEMS(){return getActiveItems(state.items);},GET_ITEMS:function GET_ITEMS(){return state.items;},GET_ITEM_NAME:function GET_ITEM_NAME(query){var item=getItemByQuery(state.items,query);return item?item.filename:null;},GET_ITEM_SIZE:function GET_ITEM_SIZE(query){var item=getItemByQuery(state.items,query);return item?item.fileSize:null;},GET_STYLES:function GET_STYLES(){return Object.keys(state.options).filter(function(key){return/^style/.test(key);}).map(function(option){return{name:option,value:state.options[option],};});},GET_PANEL_ASPECT_RATIO:function GET_PANEL_ASPECT_RATIO(){var isShapeCircle=/circle/.test(state.options.stylePanelLayout);var aspectRatio=isShapeCircle?1:getNumericAspectRatioFromString(state.options.stylePanelAspectRatio);return aspectRatio;},GET_ITEM_PANEL_ASPECT_RATIO:function GET_ITEM_PANEL_ASPECT_RATIO(){return state.options.styleItemPanelAspectRatio;},GET_ITEMS_BY_STATUS:function GET_ITEMS_BY_STATUS(status){return getActiveItems(state.items).filter(function(item){return item.status===status;});},GET_TOTAL_ITEMS:function GET_TOTAL_ITEMS(){return getActiveItems(state.items).length;},SHOULD_UPDATE_FILE_INPUT:function SHOULD_UPDATE_FILE_INPUT(){return state.options.storeAsFile&&canUpdateFileInput()&&!isAsync(state);},IS_ASYNC:function IS_ASYNC(){return isAsync(state);},GET_FILE_SIZE_LABELS:function GET_FILE_SIZE_LABELS(query){return{labelBytes:query('GET_LABEL_FILE_SIZE_BYTES')||undefined,labelKilobytes:query('GET_LABEL_FILE_SIZE_KILOBYTES')||undefined,labelMegabytes:query('GET_LABEL_FILE_SIZE_MEGABYTES')||undefined,labelGigabytes:query('GET_LABEL_FILE_SIZE_GIGABYTES')||undefined,};},};};var hasRoomForItem=function hasRoomForItem(state){var count=getActiveItems(state.items).length;if(!state.options.allowMultiple){return count===0;}
var maxFileCount=state.options.maxFiles;if(maxFileCount===null){return true;}
if(count<maxFileCount){return true;}
return false;};var limit=function limit(value,min,max){return Math.max(Math.min(max,value),min);};var arrayInsert=function arrayInsert(arr,index,item){return arr.splice(index,0,item);};var insertItem=function insertItem(items,item,index){if(isEmpty(item)){return null;}
if(typeof index==='undefined'){items.push(item);return item;}
index=limit(index,0,items.length);arrayInsert(items,index,item);return item;};var isBase64DataURI=function isBase64DataURI(str){return/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(str);};var getFilenameFromURL=function getFilenameFromURL(url){return(''+url).split('/').pop().split('?').shift();};var getExtensionFromFilename=function getExtensionFromFilename(name){return name.split('.').pop();};var guesstimateExtension=function guesstimateExtension(type){if(typeof type!=='string'){return'';}
var subtype=type.split('/').pop();if(/svg/.test(subtype)){return'svg';}
if(/zip|compressed/.test(subtype)){return'zip';}
if(/plain/.test(subtype)){return'txt';}
if(/msword/.test(subtype)){return'doc';}
if(/[a-z]+/.test(subtype)){if(subtype==='jpeg'){return'jpg';}
return subtype;}
return'';};var leftPad=function leftPad(value){var padding=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';return(padding+value).slice(-padding.length);};var getDateString=function getDateString(){var date=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Date();return(date.getFullYear()+'-'+
leftPad(date.getMonth()+1,'00')+'-'+
leftPad(date.getDate(),'00')+'_'+
leftPad(date.getHours(),'00')+'-'+
leftPad(date.getMinutes(),'00')+'-'+
leftPad(date.getSeconds(),'00'));};var getFileFromBlob=function getFileFromBlob(blob,filename){var type=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var extension=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var file=typeof type==='string'?blob.slice(0,blob.size,type):blob.slice(0,blob.size,blob.type);file.lastModifiedDate=new Date();if(blob._relativePath)file._relativePath=blob._relativePath;if(!isString(filename)){filename=getDateString();}
if(filename&&extension===null&&getExtensionFromFilename(filename)){file.name=filename;}else{extension=extension||guesstimateExtension(file.type);file.name=filename+(extension?'.'+extension:'');}
return file;};var getBlobBuilder=function getBlobBuilder(){return(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);};var createBlob=function createBlob(arrayBuffer,mimeType){var BB=getBlobBuilder();if(BB){var bb=new BB();bb.append(arrayBuffer);return bb.getBlob(mimeType);}
return new Blob([arrayBuffer],{type:mimeType,});};var getBlobFromByteStringWithMimeType=function getBlobFromByteStringWithMimeType(byteString,mimeType){var ab=new ArrayBuffer(byteString.length);var ia=new Uint8Array(ab);for(var i=0;i<byteString.length;i++){ia[i]=byteString.charCodeAt(i);}
return createBlob(ab,mimeType);};var getMimeTypeFromBase64DataURI=function getMimeTypeFromBase64DataURI(dataURI){return(/^data:(.+);/.exec(dataURI)||[])[1]||null;};var getBase64DataFromBase64DataURI=function getBase64DataFromBase64DataURI(dataURI){var data=dataURI.split(',')[1];return data.replace(/\s/g,'');};var getByteStringFromBase64DataURI=function getByteStringFromBase64DataURI(dataURI){return atob(getBase64DataFromBase64DataURI(dataURI));};var getBlobFromBase64DataURI=function getBlobFromBase64DataURI(dataURI){var mimeType=getMimeTypeFromBase64DataURI(dataURI);var byteString=getByteStringFromBase64DataURI(dataURI);return getBlobFromByteStringWithMimeType(byteString,mimeType);};var getFileFromBase64DataURI=function getFileFromBase64DataURI(dataURI,filename,extension){return getFileFromBlob(getBlobFromBase64DataURI(dataURI),filename,null,extension);};var getFileNameFromHeader=function getFileNameFromHeader(header){if(!/^content-disposition:/i.test(header))return null;var matches=header.split(/filename=|filename\*=.+''/).splice(1).map(function(name){return name.trim().replace(/^["']|[;"']{0,2}$/g,'');}).filter(function(name){return name.length;});return matches.length?decodeURI(matches[matches.length-1]):null;};var getFileSizeFromHeader=function getFileSizeFromHeader(header){if(/content-length:/i.test(header)){var size=header.match(/[0-9]+/)[0];return size?parseInt(size,10):null;}
return null;};var getTranfserIdFromHeader=function getTranfserIdFromHeader(header){if(/x-content-transfer-id:/i.test(header)){var id=(header.split(':')[1]||'').trim();return id||null;}
return null;};var getFileInfoFromHeaders=function getFileInfoFromHeaders(headers){var info={source:null,name:null,size:null,};var rows=headers.split('\n');var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=rows[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var header=_step.value;var name=getFileNameFromHeader(header);if(name){info.name=name;continue;}
var size=getFileSizeFromHeader(header);if(size){info.size=size;continue;}
var source=getTranfserIdFromHeader(header);if(source){info.source=source;continue;}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}
return info;};var createFileLoader=function createFileLoader(fetchFn){var state={source:null,complete:false,progress:0,size:null,timestamp:null,duration:0,request:null,};var getProgress=function getProgress(){return state.progress;};var abort=function abort(){if(state.request&&state.request.abort){state.request.abort();}};var load=function load(){var source=state.source;api.fire('init',source);if(source instanceof File){api.fire('load',source);}else if(source instanceof Blob){api.fire('load',getFileFromBlob(source,source.name));}else if(isBase64DataURI(source)){api.fire('load',getFileFromBase64DataURI(source));}else{loadURL(source);}};var loadURL=function loadURL(url){if(!fetchFn){api.fire('error',{type:'error',body:"Can't load URL",code:400,});return;}
state.timestamp=Date.now();state.request=fetchFn(url,function(response){state.duration=Date.now()-state.timestamp;state.complete=true;if(response instanceof Blob){response=getFileFromBlob(response,response.name||getFilenameFromURL(url));}
api.fire('load',response instanceof Blob?response:response?response.body:null);},function(error){api.fire('error',typeof error==='string'?{type:'error',code:0,body:error,}:error);},function(computable,current,total){if(total){state.size=total;}
state.duration=Date.now()-state.timestamp;if(!computable){state.progress=null;return;}
state.progress=current/total;api.fire('progress',state.progress);},function(){api.fire('abort');},function(response){var fileinfo=getFileInfoFromHeaders(typeof response==='string'?response:response.headers);api.fire('meta',{size:state.size||fileinfo.size,filename:fileinfo.name,source:fileinfo.source,});});};var api=Object.assign({},on(),{setSource:function setSource(source){return(state.source=source);},getProgress:getProgress,abort:abort,load:load,});return api;};var isGet=function isGet(method){return/GET|HEAD/.test(method);};var sendRequest=function sendRequest(data,url,options){var api={onheaders:function onheaders(){},onprogress:function onprogress(){},onload:function onload(){},ontimeout:function ontimeout(){},onerror:function onerror(){},onabort:function onabort(){},abort:function abort(){aborted=true;xhr.abort();},};var aborted=false;var headersReceived=false;options=Object.assign({method:'POST',headers:{},withCredentials:false,},options);url=encodeURI(url);if(isGet(options.method)&&data){url=''+
url+
encodeURIComponent(typeof data==='string'?data:JSON.stringify(data));}
var xhr=new XMLHttpRequest();var process=isGet(options.method)?xhr:xhr.upload;process.onprogress=function(e){if(aborted){return;}
api.onprogress(e.lengthComputable,e.loaded,e.total);};xhr.onreadystatechange=function(){if(xhr.readyState<2){return;}
if(xhr.readyState===4&&xhr.status===0){return;}
if(headersReceived){return;}
headersReceived=true;api.onheaders(xhr);};xhr.onload=function(){if(xhr.status>=200&&xhr.status<300){api.onload(xhr);}else{api.onerror(xhr);}};xhr.onerror=function(){return api.onerror(xhr);};xhr.onabort=function(){aborted=true;api.onabort();};xhr.ontimeout=function(){return api.ontimeout(xhr);};xhr.open(options.method,url,true);if(isInt(options.timeout)){xhr.timeout=options.timeout;}
Object.keys(options.headers).forEach(function(key){var value=unescape(encodeURIComponent(options.headers[key]));xhr.setRequestHeader(key,value);});if(options.responseType){xhr.responseType=options.responseType;}
if(options.withCredentials){xhr.withCredentials=true;}
xhr.send(data);return api;};var createResponse=function createResponse(type,code,body,headers){return{type:type,code:code,body:body,headers:headers,};};var createTimeoutResponse=function createTimeoutResponse(cb){return function(xhr){cb(createResponse('error',0,'Timeout',xhr.getAllResponseHeaders()));};};var hasQS=function hasQS(str){return/\?/.test(str);};var buildURL=function buildURL(){var url='';for(var _len=arguments.length,parts=new Array(_len),_key=0;_key<_len;_key++){parts[_key]=arguments[_key];}
parts.forEach(function(part){url+=hasQS(url)&&hasQS(part)?part.replace(/\?/,'&'):part;});return url;};var createFetchFunction=function createFetchFunction(){var apiUrl=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var action=arguments.length>1?arguments[1]:undefined;if(typeof action==='function'){return action;}
if(!action||!isString(action.url)){return null;}
var onload=action.onload||function(res){return res;};var onerror=action.onerror||function(res){return null;};return function(url,load,error,progress,abort,headers){var request=sendRequest(url,buildURL(apiUrl,action.url),Object.assign({},action,{responseType:'blob',}));request.onload=function(xhr){var headers=xhr.getAllResponseHeaders();var filename=getFileInfoFromHeaders(headers).name||getFilenameFromURL(url);load(createResponse('load',xhr.status,action.method==='HEAD'?null:getFileFromBlob(onload(xhr.response),filename),headers));};request.onerror=function(xhr){error(createResponse('error',xhr.status,onerror(xhr.response)||xhr.statusText,xhr.getAllResponseHeaders()));};request.onheaders=function(xhr){headers(createResponse('headers',xhr.status,null,xhr.getAllResponseHeaders()));};request.ontimeout=createTimeoutResponse(error);request.onprogress=progress;request.onabort=abort;return request;};};var ChunkStatus={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4,};var processFileChunked=function processFileChunked(apiUrl,action,name,file,metadata,load,error,progress,abort,transfer,options){var chunks=[];var chunkTransferId=options.chunkTransferId,chunkServer=options.chunkServer,chunkSize=options.chunkSize,chunkRetryDelays=options.chunkRetryDelays;var state={serverId:chunkTransferId,aborted:false,};var ondata=action.ondata||function(fd){return fd;};var onload=action.onload||function(xhr,method){return method==='HEAD'?xhr.getResponseHeader('Upload-Offset'):xhr.response;};var onerror=action.onerror||function(res){return null;};var requestTransferId=function requestTransferId(cb){var formData=new FormData();if(isObject(metadata))formData.append(name,JSON.stringify(metadata));var headers=typeof action.headers==='function'?action.headers(file,metadata):Object.assign({},action.headers,{'Upload-Length':file.size,});var requestParams=Object.assign({},action,{headers:headers,});var request=sendRequest(ondata(formData),buildURL(apiUrl,action.url),requestParams);request.onload=function(xhr){return cb(onload(xhr,requestParams.method));};request.onerror=function(xhr){return error(createResponse('error',xhr.status,onerror(xhr.response)||xhr.statusText,xhr.getAllResponseHeaders()));};request.ontimeout=createTimeoutResponse(error);};var requestTransferOffset=function requestTransferOffset(cb){var requestUrl=buildURL(apiUrl,chunkServer.url,state.serverId);var headers=typeof action.headers==='function'?action.headers(state.serverId):Object.assign({},action.headers);var requestParams={headers:headers,method:'HEAD',};var request=sendRequest(null,requestUrl,requestParams);request.onload=function(xhr){return cb(onload(xhr,requestParams.method));};request.onerror=function(xhr){return error(createResponse('error',xhr.status,onerror(xhr.response)||xhr.statusText,xhr.getAllResponseHeaders()));};request.ontimeout=createTimeoutResponse(error);};var lastChunkIndex=Math.floor(file.size/chunkSize);for(var i=0;i<=lastChunkIndex;i++){var offset=i*chunkSize;var data=file.slice(offset,offset+chunkSize,'application/offset+octet-stream');chunks[i]={index:i,size:data.size,offset:offset,data:data,file:file,progress:0,retries:_toConsumableArray(chunkRetryDelays),status:ChunkStatus.QUEUED,error:null,request:null,timeout:null,};}
var completeProcessingChunks=function completeProcessingChunks(){return load(state.serverId);};var canProcessChunk=function canProcessChunk(chunk){return chunk.status===ChunkStatus.QUEUED||chunk.status===ChunkStatus.ERROR;};var processChunk=function processChunk(chunk){if(state.aborted)return;chunk=chunk||chunks.find(canProcessChunk);if(!chunk){if(chunks.every(function(chunk){return chunk.status===ChunkStatus.COMPLETE;})){completeProcessingChunks();}
return;}
chunk.status=ChunkStatus.PROCESSING;chunk.progress=null;var ondata=chunkServer.ondata||function(fd){return fd;};var onerror=chunkServer.onerror||function(res){return null;};var requestUrl=buildURL(apiUrl,chunkServer.url,state.serverId);var headers=typeof chunkServer.headers==='function'?chunkServer.headers(chunk):Object.assign({},chunkServer.headers,{'Content-Type':'application/offset+octet-stream','Upload-Offset':chunk.offset,'Upload-Length':file.size,'Upload-Name':file.name,});var request=(chunk.request=sendRequest(ondata(chunk.data),requestUrl,Object.assign({},chunkServer,{headers:headers,})));request.onload=function(){chunk.status=ChunkStatus.COMPLETE;chunk.request=null;processChunks();};request.onprogress=function(lengthComputable,loaded,total){chunk.progress=lengthComputable?loaded:null;updateTotalProgress();};request.onerror=function(xhr){chunk.status=ChunkStatus.ERROR;chunk.request=null;chunk.error=onerror(xhr.response)||xhr.statusText;if(!retryProcessChunk(chunk)){error(createResponse('error',xhr.status,onerror(xhr.response)||xhr.statusText,xhr.getAllResponseHeaders()));}};request.ontimeout=function(xhr){chunk.status=ChunkStatus.ERROR;chunk.request=null;if(!retryProcessChunk(chunk)){createTimeoutResponse(error)(xhr);}};request.onabort=function(){chunk.status=ChunkStatus.QUEUED;chunk.request=null;abort();};};var retryProcessChunk=function retryProcessChunk(chunk){if(chunk.retries.length===0)return false;chunk.status=ChunkStatus.WAITING;clearTimeout(chunk.timeout);chunk.timeout=setTimeout(function(){processChunk(chunk);},chunk.retries.shift());return true;};var updateTotalProgress=function updateTotalProgress(){var totalBytesTransfered=chunks.reduce(function(p,chunk){if(p===null||chunk.progress===null)return null;return p+chunk.progress;},0);if(totalBytesTransfered===null)return progress(false,0,0);var totalSize=chunks.reduce(function(total,chunk){return total+chunk.size;},0);progress(true,totalBytesTransfered,totalSize);};var processChunks=function processChunks(){var totalProcessing=chunks.filter(function(chunk){return chunk.status===ChunkStatus.PROCESSING;}).length;if(totalProcessing>=1)return;processChunk();};var abortChunks=function abortChunks(){chunks.forEach(function(chunk){clearTimeout(chunk.timeout);if(chunk.request){chunk.request.abort();}});};if(!state.serverId){requestTransferId(function(serverId){if(state.aborted)return;transfer(serverId);state.serverId=serverId;processChunks();});}else{requestTransferOffset(function(offset){if(state.aborted)return;chunks.filter(function(chunk){return chunk.offset<offset;}).forEach(function(chunk){chunk.status=ChunkStatus.COMPLETE;chunk.progress=chunk.size;});processChunks();});}
return{abort:function abort(){state.aborted=true;abortChunks();},};};var createFileProcessorFunction=function createFileProcessorFunction(apiUrl,action,name,options){return function(file,metadata,load,error,progress,abort,transfer){if(!file)return;var canChunkUpload=options.chunkUploads;var shouldChunkUpload=canChunkUpload&&file.size>options.chunkSize;var willChunkUpload=canChunkUpload&&(shouldChunkUpload||options.chunkForce);if(file instanceof Blob&&willChunkUpload)
return processFileChunked(apiUrl,action,name,file,metadata,load,error,progress,abort,transfer,options);var ondata=action.ondata||function(fd){return fd;};var onload=action.onload||function(res){return res;};var onerror=action.onerror||function(res){return null;};var headers=typeof action.headers==='function'?action.headers(file,metadata)||{}:Object.assign({},action.headers);var requestParams=Object.assign({},action,{headers:headers,});var formData=new FormData();if(isObject(metadata)){formData.append(name,JSON.stringify(metadata));}
(file instanceof Blob?[{name:null,file:file}]:file).forEach(function(item){formData.append(name,item.file,item.name===null?item.file.name:''+item.name+item.file.name);});var request=sendRequest(ondata(formData),buildURL(apiUrl,action.url),requestParams);request.onload=function(xhr){load(createResponse('load',xhr.status,onload(xhr.response),xhr.getAllResponseHeaders()));};request.onerror=function(xhr){error(createResponse('error',xhr.status,onerror(xhr.response)||xhr.statusText,xhr.getAllResponseHeaders()));};request.ontimeout=createTimeoutResponse(error);request.onprogress=progress;request.onabort=abort;return request;};};var createProcessorFunction=function createProcessorFunction(){var apiUrl=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var action=arguments.length>1?arguments[1]:undefined;var name=arguments.length>2?arguments[2]:undefined;var options=arguments.length>3?arguments[3]:undefined;if(typeof action==='function')
return function(){for(var _len=arguments.length,params=new Array(_len),_key=0;_key<_len;_key++){params[_key]=arguments[_key];}
return action.apply(void 0,[name].concat(params,[options]));};if(!action||!isString(action.url))return null;return createFileProcessorFunction(apiUrl,action,name,options);};var createRevertFunction=function createRevertFunction(){var apiUrl=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var action=arguments.length>1?arguments[1]:undefined;if(typeof action==='function'){return action;}
if(!action||!isString(action.url)){return function(uniqueFileId,load){return load();};}
var onload=action.onload||function(res){return res;};var onerror=action.onerror||function(res){return null;};return function(uniqueFileId,load,error){var request=sendRequest(uniqueFileId,apiUrl+action.url,action);request.onload=function(xhr){load(createResponse('load',xhr.status,onload(xhr.response),xhr.getAllResponseHeaders()));};request.onerror=function(xhr){error(createResponse('error',xhr.status,onerror(xhr.response)||xhr.statusText,xhr.getAllResponseHeaders()));};request.ontimeout=createTimeoutResponse(error);return request;};};var getRandomNumber=function getRandomNumber(){var min=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var max=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return min+Math.random()*(max-min);};var createPerceivedPerformanceUpdater=function createPerceivedPerformanceUpdater(cb){var duration=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1000;var offset=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var tickMin=arguments.length>3&&arguments[3]!==undefined?arguments[3]:25;var tickMax=arguments.length>4&&arguments[4]!==undefined?arguments[4]:250;var timeout=null;var start=Date.now();var tick=function tick(){var runtime=Date.now()-start;var delay=getRandomNumber(tickMin,tickMax);if(runtime+delay>duration){delay=runtime+delay-duration;}
var progress=runtime/duration;if(progress>=1||document.hidden){cb(1);return;}
cb(progress);timeout=setTimeout(tick,delay);};if(duration>0)tick();return{clear:function clear(){clearTimeout(timeout);},};};var createFileProcessor=function createFileProcessor(processFn,options){var state={complete:false,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null,};var allowMinimumUploadDuration=options.allowMinimumUploadDuration;var process=function process(file,metadata){var progressFn=function progressFn(){if(state.duration===0||state.progress===null)return;api.fire('progress',api.getProgress());};var completeFn=function completeFn(){state.complete=true;api.fire('load-perceived',state.response.body);};api.fire('start');state.timestamp=Date.now();state.perceivedPerformanceUpdater=createPerceivedPerformanceUpdater(function(progress){state.perceivedProgress=progress;state.perceivedDuration=Date.now()-state.timestamp;progressFn();if(state.response&&state.perceivedProgress===1&&!state.complete){completeFn();}},allowMinimumUploadDuration?getRandomNumber(750,1500):0);state.request=processFn(file,metadata,function(response){state.response=isObject(response)?response:{type:'load',code:200,body:''+response,headers:{},};state.duration=Date.now()-state.timestamp;state.progress=1;api.fire('load',state.response.body);if(!allowMinimumUploadDuration||(allowMinimumUploadDuration&&state.perceivedProgress===1)){completeFn();}},function(error){state.perceivedPerformanceUpdater.clear();api.fire('error',isObject(error)?error:{type:'error',code:0,body:''+error,});},function(computable,current,total){state.duration=Date.now()-state.timestamp;state.progress=computable?current/total:null;progressFn();},function(){state.perceivedPerformanceUpdater.clear();api.fire('abort',state.response?state.response.body:null);},function(transferId){api.fire('transfer',transferId);});};var abort=function abort(){if(!state.request)return;state.perceivedPerformanceUpdater.clear();if(state.request.abort)state.request.abort();state.complete=true;};var reset=function reset(){abort();state.complete=false;state.perceivedProgress=0;state.progress=0;state.timestamp=null;state.perceivedDuration=0;state.duration=0;state.request=null;state.response=null;};var getProgress=allowMinimumUploadDuration?function(){return state.progress?Math.min(state.progress,state.perceivedProgress):null;}:function(){return state.progress||null;};var getDuration=allowMinimumUploadDuration?function(){return Math.min(state.duration,state.perceivedDuration);}:function(){return state.duration;};var api=Object.assign({},on(),{process:process,abort:abort,getProgress:getProgress,getDuration:getDuration,reset:reset,});return api;};var getFilenameWithoutExtension=function getFilenameWithoutExtension(name){return name.substring(0,name.lastIndexOf('.'))||name;};var createFileStub=function createFileStub(source){var data=[source.name,source.size,source.type];if(source instanceof Blob||isBase64DataURI(source)){data[0]=source.name||getDateString();}else if(isBase64DataURI(source)){data[1]=source.length;data[2]=getMimeTypeFromBase64DataURI(source);}else if(isString(source)){data[0]=getFilenameFromURL(source);data[1]=0;data[2]='application/octet-stream';}
return{name:data[0],size:data[1],type:data[2],};};var isFile=function isFile(value){return!!(value instanceof File||(value instanceof Blob&&value.name));};var deepCloneObject=function deepCloneObject(src){if(!isObject(src))return src;var target=isArray(src)?[]:{};for(var key in src){if(!src.hasOwnProperty(key))continue;var v=src[key];target[key]=v&&isObject(v)?deepCloneObject(v):v;}
return target;};var createItem=function createItem(){var origin=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var serverFileReference=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var file=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var id=getUniqueId();var state={archived:false,frozen:false,released:false,source:null,file:file,serverFileReference:serverFileReference,transferId:null,processingAborted:false,status:serverFileReference?ItemStatus.PROCESSING_COMPLETE:ItemStatus.INIT,activeLoader:null,activeProcessor:null,};var abortProcessingRequestComplete=null;var metadata={};var setStatus=function setStatus(status){return(state.status=status);};var fire=function fire(event){if(state.released||state.frozen)return;for(var _len=arguments.length,params=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){params[_key-1]=arguments[_key];}
api.fire.apply(api,[event].concat(params));};var getFileExtension=function getFileExtension(){return getExtensionFromFilename(state.file.name);};var getFileType=function getFileType(){return state.file.type;};var getFileSize=function getFileSize(){return state.file.size;};var getFile=function getFile(){return state.file;};var load=function load(source,loader,onload){state.source=source;api.fireSync('init');if(state.file){api.fireSync('load-skip');return;}
state.file=createFileStub(source);loader.on('init',function(){fire('load-init');});loader.on('meta',function(meta){state.file.size=meta.size;state.file.filename=meta.filename;if(meta.source){origin=FileOrigin.LIMBO;state.serverFileReference=meta.source;state.status=ItemStatus.PROCESSING_COMPLETE;}
fire('load-meta');});loader.on('progress',function(progress){setStatus(ItemStatus.LOADING);fire('load-progress',progress);});loader.on('error',function(error){setStatus(ItemStatus.LOAD_ERROR);fire('load-request-error',error);});loader.on('abort',function(){setStatus(ItemStatus.INIT);fire('load-abort');});loader.on('load',function(file){state.activeLoader=null;var success=function success(result){state.file=isFile(result)?result:state.file;if(origin===FileOrigin.LIMBO&&state.serverFileReference){setStatus(ItemStatus.PROCESSING_COMPLETE);}else{setStatus(ItemStatus.IDLE);}
fire('load');};var error=function error(result){state.file=file;fire('load-meta');setStatus(ItemStatus.LOAD_ERROR);fire('load-file-error',result);};if(state.serverFileReference){success(file);return;}
onload(file,success,error);});loader.setSource(source);state.activeLoader=loader;loader.load();};var retryLoad=function retryLoad(){if(!state.activeLoader){return;}
state.activeLoader.load();};var abortLoad=function abortLoad(){if(state.activeLoader){state.activeLoader.abort();return;}
setStatus(ItemStatus.INIT);fire('load-abort');};var process=function process(processor,onprocess){if(state.processingAborted){state.processingAborted=false;return;}
setStatus(ItemStatus.PROCESSING);abortProcessingRequestComplete=null;if(!(state.file instanceof Blob)){api.on('load',function(){process(processor,onprocess);});return;}
processor.on('load',function(serverFileReference){state.transferId=null;state.serverFileReference=serverFileReference;});processor.on('transfer',function(transferId){state.transferId=transferId;});processor.on('load-perceived',function(serverFileReference){state.activeProcessor=null;state.transferId=null;state.serverFileReference=serverFileReference;setStatus(ItemStatus.PROCESSING_COMPLETE);fire('process-complete',serverFileReference);});processor.on('start',function(){fire('process-start');});processor.on('error',function(error){state.activeProcessor=null;setStatus(ItemStatus.PROCESSING_ERROR);fire('process-error',error);});processor.on('abort',function(serverFileReference){state.activeProcessor=null;state.serverFileReference=serverFileReference;setStatus(ItemStatus.IDLE);fire('process-abort');if(abortProcessingRequestComplete){abortProcessingRequestComplete();}});processor.on('progress',function(progress){fire('process-progress',progress);});var success=function success(file){if(state.archived)return;processor.process(file,Object.assign({},metadata));};var error=console.error;onprocess(state.file,success,error);state.activeProcessor=processor;};var requestProcessing=function requestProcessing(){state.processingAborted=false;setStatus(ItemStatus.PROCESSING_QUEUED);};var abortProcessing=function abortProcessing(){return new Promise(function(resolve){if(!state.activeProcessor){state.processingAborted=true;setStatus(ItemStatus.IDLE);fire('process-abort');resolve();return;}
abortProcessingRequestComplete=function abortProcessingRequestComplete(){resolve();};state.activeProcessor.abort();});};var revert=function revert(revertFileUpload,forceRevert){return new Promise(function(resolve,reject){var serverTransferId=state.serverFileReference!==null?state.serverFileReference:state.transferId;if(serverTransferId===null){resolve();return;}
revertFileUpload(serverTransferId,function(){state.serverFileReference=null;state.transferId=null;resolve();},function(error){if(!forceRevert){resolve();return;}
setStatus(ItemStatus.PROCESSING_REVERT_ERROR);fire('process-revert-error');reject(error);});setStatus(ItemStatus.IDLE);fire('process-revert');});};var _setMetadata=function setMetadata(key,value,silent){var keys=key.split('.');var root=keys[0];var last=keys.pop();var data=metadata;keys.forEach(function(key){return(data=data[key]);});if(JSON.stringify(data[last])===JSON.stringify(value))return;data[last]=value;fire('metadata-update',{key:root,value:metadata[root],silent:silent,});};var getMetadata=function getMetadata(key){return deepCloneObject(key?metadata[key]:metadata);};var api=Object.assign({id:{get:function get(){return id;},},origin:{get:function get(){return origin;},set:function set(value){return(origin=value);},},serverId:{get:function get(){return state.serverFileReference;},},transferId:{get:function get(){return state.transferId;},},status:{get:function get(){return state.status;},},filename:{get:function get(){return state.file.name;},},filenameWithoutExtension:{get:function get(){return getFilenameWithoutExtension(state.file.name);},},fileExtension:{get:getFileExtension},fileType:{get:getFileType},fileSize:{get:getFileSize},file:{get:getFile},relativePath:{get:function get(){return state.file._relativePath;},},source:{get:function get(){return state.source;},},getMetadata:getMetadata,setMetadata:function setMetadata(key,value,silent){if(isObject(key)){var data=key;Object.keys(data).forEach(function(key){_setMetadata(key,data[key],value);});return key;}
_setMetadata(key,value,silent);return value;},extend:function extend(name,handler){return(itemAPI[name]=handler);},abortLoad:abortLoad,retryLoad:retryLoad,requestProcessing:requestProcessing,abortProcessing:abortProcessing,load:load,process:process,revert:revert,},on(),{freeze:function freeze(){return(state.frozen=true);},release:function release(){return(state.released=true);},released:{get:function get(){return state.released;},},archive:function archive(){return(state.archived=true);},archived:{get:function get(){return state.archived;},},});var itemAPI=createObject(api);return itemAPI;};var getItemIndexByQuery=function getItemIndexByQuery(items,query){if(isEmpty(query)){return 0;}
if(!isString(query)){return-1;}
return items.findIndex(function(item){return item.id===query;});};var getItemById=function getItemById(items,itemId){var index=getItemIndexByQuery(items,itemId);if(index<0){return;}
return items[index]||null;};var fetchBlob=function fetchBlob(url,load,error,progress,abort,headers){var request=sendRequest(null,url,{method:'GET',responseType:'blob',});request.onload=function(xhr){var headers=xhr.getAllResponseHeaders();var filename=getFileInfoFromHeaders(headers).name||getFilenameFromURL(url);load(createResponse('load',xhr.status,getFileFromBlob(xhr.response,filename),headers));};request.onerror=function(xhr){error(createResponse('error',xhr.status,xhr.statusText,xhr.getAllResponseHeaders()));};request.onheaders=function(xhr){headers(createResponse('headers',xhr.status,null,xhr.getAllResponseHeaders()));};request.ontimeout=createTimeoutResponse(error);request.onprogress=progress;request.onabort=abort;return request;};var getDomainFromURL=function getDomainFromURL(url){if(url.indexOf('//')===0){url=location.protocol+url;}
return url.toLowerCase().replace('blob:','').replace(/([a-z])?:\/\//,'$1').split('/')[0];};var isExternalURL=function isExternalURL(url){return((url.indexOf(':')>-1||url.indexOf('//')>-1)&&getDomainFromURL(location.href)!==getDomainFromURL(url));};var dynamicLabel=function dynamicLabel(label){return function(){return isFunction(label)?label.apply(void 0,arguments):label;};};var isMockItem=function isMockItem(item){return!isFile(item.file);};var listUpdated=function listUpdated(dispatch,state){clearTimeout(state.listUpdateTimeout);state.listUpdateTimeout=setTimeout(function(){dispatch('DID_UPDATE_ITEMS',{items:getActiveItems(state.items)});},0);};var optionalPromise=function optionalPromise(fn){for(var _len=arguments.length,params=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){params[_key-1]=arguments[_key];}
return new Promise(function(resolve){if(!fn){return resolve(true);}
var result=fn.apply(void 0,params);if(result==null){return resolve(true);}
if(typeof result==='boolean'){return resolve(result);}
if(typeof result.then==='function'){result.then(resolve);}});};var sortItems=function sortItems(state,compare){state.items.sort(function(a,b){return compare(createItemAPI(a),createItemAPI(b));});};var getItemByQueryFromState=function getItemByQueryFromState(state,itemHandler){return function(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var query=_ref.query,_ref$success=_ref.success,success=_ref$success===void 0?function(){}:_ref$success,_ref$failure=_ref.failure,failure=_ref$failure===void 0?function(){}:_ref$failure,options=_objectWithoutProperties(_ref,['query','success','failure']);var item=getItemByQuery(state.items,query);if(!item){failure({error:createResponse('error',0,'Item not found'),file:null,});return;}
itemHandler(item,success,failure,options||{});};};var actions=function actions(dispatch,query,state){return{ABORT_ALL:function ABORT_ALL(){getActiveItems(state.items).forEach(function(item){item.freeze();item.abortLoad();item.abortProcessing();});},DID_SET_FILES:function DID_SET_FILES(_ref2){var _ref2$value=_ref2.value,value=_ref2$value===void 0?[]:_ref2$value;var files=value.map(function(file){return{source:file.source?file.source:file,options:file.options,};});var activeItems=getActiveItems(state.items);activeItems.forEach(function(item){if(!files.find(function(file){return file.source===item.source||file.source===item.file;})){dispatch('REMOVE_ITEM',{query:item,remove:false});}});activeItems=getActiveItems(state.items);files.forEach(function(file,index){if(activeItems.find(function(item){return item.source===file.source||item.file===file.source;}))
return;dispatch('ADD_ITEM',Object.assign({},file,{interactionMethod:InteractionMethod.NONE,index:index,}));});},DID_UPDATE_ITEM_METADATA:function DID_UPDATE_ITEM_METADATA(_ref3){var id=_ref3.id,action=_ref3.action,change=_ref3.change;if(change.silent)return;clearTimeout(state.itemUpdateTimeout);state.itemUpdateTimeout=setTimeout(function(){var item=getItemById(state.items,id);if(!query('IS_ASYNC')){applyFilterChain('SHOULD_PREPARE_OUTPUT',false,{item:item,query:query,action:action,change:change,}).then(function(shouldPrepareOutput){var beforePrepareFile=query('GET_BEFORE_PREPARE_FILE');if(beforePrepareFile)
shouldPrepareOutput=beforePrepareFile(item,shouldPrepareOutput);if(!shouldPrepareOutput)return;dispatch('REQUEST_PREPARE_OUTPUT',{query:id,item:item,success:function success(file){dispatch('DID_PREPARE_OUTPUT',{id:id,file:file});},},true);});return;}
if(item.origin===FileOrigin.LOCAL){dispatch('DID_LOAD_ITEM',{id:item.id,error:null,serverFileReference:item.source,});}
var upload=function upload(){setTimeout(function(){dispatch('REQUEST_ITEM_PROCESSING',{query:id});},32);};var revert=function revert(doUpload){item.revert(createRevertFunction(state.options.server.url,state.options.server.revert),query('GET_FORCE_REVERT')).then(doUpload?upload:function(){}).catch(function(){});};var abort=function abort(doUpload){item.abortProcessing().then(doUpload?upload:function(){});};if(item.status===ItemStatus.PROCESSING_COMPLETE){return revert(state.options.instantUpload);}
if(item.status===ItemStatus.PROCESSING){return abort(state.options.instantUpload);}
if(state.options.instantUpload){upload();}},0);},MOVE_ITEM:function MOVE_ITEM(_ref4){var query=_ref4.query,index=_ref4.index;var item=getItemByQuery(state.items,query);if(!item)return;var currentIndex=state.items.indexOf(item);index=limit(index,0,state.items.length-1);if(currentIndex===index)return;state.items.splice(index,0,state.items.splice(currentIndex,1)[0]);},SORT:function SORT(_ref5){var compare=_ref5.compare;sortItems(state,compare);dispatch('DID_SORT_ITEMS',{items:query('GET_ACTIVE_ITEMS'),});},ADD_ITEMS:function ADD_ITEMS(_ref6){var items=_ref6.items,index=_ref6.index,interactionMethod=_ref6.interactionMethod,_ref6$success=_ref6.success,success=_ref6$success===void 0?function(){}:_ref6$success,_ref6$failure=_ref6.failure,failure=_ref6$failure===void 0?function(){}:_ref6$failure;var currentIndex=index;if(index===-1||typeof index==='undefined'){var insertLocation=query('GET_ITEM_INSERT_LOCATION');var totalItems=query('GET_TOTAL_ITEMS');currentIndex=insertLocation==='before'?0:totalItems;}
var ignoredFiles=query('GET_IGNORED_FILES');var isValidFile=function isValidFile(source){return isFile(source)?!ignoredFiles.includes(source.name.toLowerCase()):!isEmpty(source);};var validItems=items.filter(isValidFile);var promises=validItems.map(function(source){return new Promise(function(resolve,reject){dispatch('ADD_ITEM',{interactionMethod:interactionMethod,source:source.source||source,success:resolve,failure:reject,index:currentIndex++,options:source.options||{},});});});Promise.all(promises).then(success).catch(failure);},ADD_ITEM:function ADD_ITEM(_ref7){var source=_ref7.source,_ref7$index=_ref7.index,index=_ref7$index===void 0?-1:_ref7$index,interactionMethod=_ref7.interactionMethod,_ref7$success=_ref7.success,success=_ref7$success===void 0?function(){}:_ref7$success,_ref7$failure=_ref7.failure,failure=_ref7$failure===void 0?function(){}:_ref7$failure,_ref7$options=_ref7.options,options=_ref7$options===void 0?{}:_ref7$options;if(isEmpty(source)){failure({error:createResponse('error',0,'No source'),file:null,});return;}
if(isFile(source)&&state.options.ignoredFiles.includes(source.name.toLowerCase())){return;}
if(!hasRoomForItem(state)){if(state.options.allowMultiple||(!state.options.allowMultiple&&!state.options.allowReplace)){var error=createResponse('warning',0,'Max files');dispatch('DID_THROW_MAX_FILES',{source:source,error:error,});failure({error:error,file:null});return;}
var _item=getActiveItems(state.items)[0];if(_item.status===ItemStatus.PROCESSING_COMPLETE||_item.status===ItemStatus.PROCESSING_REVERT_ERROR){var forceRevert=query('GET_FORCE_REVERT');_item.revert(createRevertFunction(state.options.server.url,state.options.server.revert),forceRevert).then(function(){if(!forceRevert)return;dispatch('ADD_ITEM',{source:source,index:index,interactionMethod:interactionMethod,success:success,failure:failure,options:options,});}).catch(function(){});if(forceRevert)return;}
dispatch('REMOVE_ITEM',{query:_item.id});}
var origin=options.type==='local'?FileOrigin.LOCAL:options.type==='limbo'?FileOrigin.LIMBO:FileOrigin.INPUT;var item=createItem(origin,origin===FileOrigin.INPUT?null:source,options.file);Object.keys(options.metadata||{}).forEach(function(key){item.setMetadata(key,options.metadata[key]);});applyFilters('DID_CREATE_ITEM',item,{query:query,dispatch:dispatch});var itemInsertLocation=query('GET_ITEM_INSERT_LOCATION');if(!state.options.itemInsertLocationFreedom){index=itemInsertLocation==='before'?-1:state.items.length;}
insertItem(state.items,item,index);if(isFunction(itemInsertLocation)&&source){sortItems(state,itemInsertLocation);}
var id=item.id;item.on('init',function(){dispatch('DID_INIT_ITEM',{id:id});});item.on('load-init',function(){dispatch('DID_START_ITEM_LOAD',{id:id});});item.on('load-meta',function(){dispatch('DID_UPDATE_ITEM_META',{id:id});});item.on('load-progress',function(progress){dispatch('DID_UPDATE_ITEM_LOAD_PROGRESS',{id:id,progress:progress});});item.on('load-request-error',function(error){var mainStatus=dynamicLabel(state.options.labelFileLoadError)(error);if(error.code>=400&&error.code<500){dispatch('DID_THROW_ITEM_INVALID',{id:id,error:error,status:{main:mainStatus,sub:error.code+' ('+error.body+')',},});failure({error:error,file:createItemAPI(item)});return;}
dispatch('DID_THROW_ITEM_LOAD_ERROR',{id:id,error:error,status:{main:mainStatus,sub:state.options.labelTapToRetry,},});});item.on('load-file-error',function(error){dispatch('DID_THROW_ITEM_INVALID',{id:id,error:error.status,status:error.status,});failure({error:error.status,file:createItemAPI(item)});});item.on('load-abort',function(){dispatch('REMOVE_ITEM',{query:id});});item.on('load-skip',function(){dispatch('COMPLETE_LOAD_ITEM',{query:id,item:item,data:{source:source,success:success,},});});item.on('load',function(){var handleAdd=function handleAdd(shouldAdd){if(!shouldAdd){dispatch('REMOVE_ITEM',{query:id,});return;}
item.on('metadata-update',function(change){dispatch('DID_UPDATE_ITEM_METADATA',{id:id,change:change});});applyFilterChain('SHOULD_PREPARE_OUTPUT',false,{item:item,query:query,}).then(function(shouldPrepareOutput){var beforePrepareFile=query('GET_BEFORE_PREPARE_FILE');if(beforePrepareFile)
shouldPrepareOutput=beforePrepareFile(item,shouldPrepareOutput);var loadComplete=function loadComplete(){dispatch('COMPLETE_LOAD_ITEM',{query:id,item:item,data:{source:source,success:success,},});listUpdated(dispatch,state);};if(shouldPrepareOutput){dispatch('REQUEST_PREPARE_OUTPUT',{query:id,item:item,success:function success(file){dispatch('DID_PREPARE_OUTPUT',{id:id,file:file});loadComplete();},},true);return;}
loadComplete();});};applyFilterChain('DID_LOAD_ITEM',item,{query:query,dispatch:dispatch}).then(function(){optionalPromise(query('GET_BEFORE_ADD_FILE'),createItemAPI(item)).then(handleAdd);}).catch(function(e){if(!e||!e.error||!e.status)return handleAdd(false);dispatch('DID_THROW_ITEM_INVALID',{id:id,error:e.error,status:e.status,});});});item.on('process-start',function(){dispatch('DID_START_ITEM_PROCESSING',{id:id});});item.on('process-progress',function(progress){dispatch('DID_UPDATE_ITEM_PROCESS_PROGRESS',{id:id,progress:progress});});item.on('process-error',function(error){dispatch('DID_THROW_ITEM_PROCESSING_ERROR',{id:id,error:error,status:{main:dynamicLabel(state.options.labelFileProcessingError)(error),sub:state.options.labelTapToRetry,},});});item.on('process-revert-error',function(error){dispatch('DID_THROW_ITEM_PROCESSING_REVERT_ERROR',{id:id,error:error,status:{main:dynamicLabel(state.options.labelFileProcessingRevertError)(error),sub:state.options.labelTapToRetry,},});});item.on('process-complete',function(serverFileReference){dispatch('DID_COMPLETE_ITEM_PROCESSING',{id:id,error:null,serverFileReference:serverFileReference,});dispatch('DID_DEFINE_VALUE',{id:id,value:serverFileReference});});item.on('process-abort',function(){dispatch('DID_ABORT_ITEM_PROCESSING',{id:id});});item.on('process-revert',function(){dispatch('DID_REVERT_ITEM_PROCESSING',{id:id});dispatch('DID_DEFINE_VALUE',{id:id,value:null});});dispatch('DID_ADD_ITEM',{id:id,index:index,interactionMethod:interactionMethod,});listUpdated(dispatch,state);var _ref8=state.options.server||{},url=_ref8.url,load=_ref8.load,restore=_ref8.restore,fetch=_ref8.fetch;item.load(source,createFileLoader(origin===FileOrigin.INPUT?isString(source)&&isExternalURL(source)?fetch?createFetchFunction(url,fetch):fetchBlob:fetchBlob:origin===FileOrigin.LIMBO?createFetchFunction(url,restore):createFetchFunction(url,load)),function(file,success,error){applyFilterChain('LOAD_FILE',file,{query:query}).then(success).catch(error);});},REQUEST_PREPARE_OUTPUT:function REQUEST_PREPARE_OUTPUT(_ref9){var item=_ref9.item,success=_ref9.success,_ref9$failure=_ref9.failure,failure=_ref9$failure===void 0?function(){}:_ref9$failure;var err={error:createResponse('error',0,'Item not found'),file:null,};if(item.archived)return failure(err);applyFilterChain('PREPARE_OUTPUT',item.file,{query:query,item:item}).then(function(result){applyFilterChain('COMPLETE_PREPARE_OUTPUT',result,{query:query,item:item,}).then(function(result){if(item.archived)return failure(err);success(result);});});},COMPLETE_LOAD_ITEM:function COMPLETE_LOAD_ITEM(_ref10){var item=_ref10.item,data=_ref10.data;var success=data.success,source=data.source;var itemInsertLocation=query('GET_ITEM_INSERT_LOCATION');if(isFunction(itemInsertLocation)&&source){sortItems(state,itemInsertLocation);}
dispatch('DID_LOAD_ITEM',{id:item.id,error:null,serverFileReference:item.origin===FileOrigin.INPUT?null:source,});success(createItemAPI(item));if(item.origin===FileOrigin.LOCAL){dispatch('DID_LOAD_LOCAL_ITEM',{id:item.id});return;}
if(item.origin===FileOrigin.LIMBO){dispatch('DID_COMPLETE_ITEM_PROCESSING',{id:item.id,error:null,serverFileReference:source,});dispatch('DID_DEFINE_VALUE',{id:item.id,value:item.serverId||source,});return;}
if(query('IS_ASYNC')&&state.options.instantUpload){dispatch('REQUEST_ITEM_PROCESSING',{query:item.id});}},RETRY_ITEM_LOAD:getItemByQueryFromState(state,function(item){item.retryLoad();}),REQUEST_ITEM_PREPARE:getItemByQueryFromState(state,function(item,_success,failure){dispatch('REQUEST_PREPARE_OUTPUT',{query:item.id,item:item,success:function success(file){dispatch('DID_PREPARE_OUTPUT',{id:item.id,file:file});_success({file:item,output:file,});},failure:failure,},true);}),REQUEST_ITEM_PROCESSING:getItemByQueryFromState(state,function(item,success,failure){var itemCanBeQueuedForProcessing=item.status===ItemStatus.IDLE||item.status===ItemStatus.PROCESSING_ERROR;if(!itemCanBeQueuedForProcessing){var processNow=function processNow(){return dispatch('REQUEST_ITEM_PROCESSING',{query:item,success:success,failure:failure,});};var process=function process(){return document.hidden?processNow():setTimeout(processNow,32);};if(item.status===ItemStatus.PROCESSING_COMPLETE||item.status===ItemStatus.PROCESSING_REVERT_ERROR){item.revert(createRevertFunction(state.options.server.url,state.options.server.revert),query('GET_FORCE_REVERT')).then(process).catch(function(){});}else if(item.status===ItemStatus.PROCESSING){item.abortProcessing().then(process);}
return;}
if(item.status===ItemStatus.PROCESSING_QUEUED)return;item.requestProcessing();dispatch('DID_REQUEST_ITEM_PROCESSING',{id:item.id});dispatch('PROCESS_ITEM',{query:item,success:success,failure:failure},true);}),PROCESS_ITEM:getItemByQueryFromState(state,function(item,success,failure){var maxParallelUploads=query('GET_MAX_PARALLEL_UPLOADS');var totalCurrentUploads=query('GET_ITEMS_BY_STATUS',ItemStatus.PROCESSING).length;if(totalCurrentUploads===maxParallelUploads){state.processingQueue.push({id:item.id,success:success,failure:failure,});return;}
if(item.status===ItemStatus.PROCESSING)return;var processNext=function processNext(){var queueEntry=state.processingQueue.shift();if(!queueEntry)return;var id=queueEntry.id,success=queueEntry.success,failure=queueEntry.failure;var itemReference=getItemByQuery(state.items,id);if(!itemReference||itemReference.archived){processNext();return;}
dispatch('PROCESS_ITEM',{query:id,success:success,failure:failure},true);};item.onOnce('process-complete',function(){success(createItemAPI(item));processNext();var server=state.options.server;var instantUpload=state.options.instantUpload;if(instantUpload&&item.origin===FileOrigin.LOCAL&&isFunction(server.remove)){var noop=function noop(){};item.origin=FileOrigin.LIMBO;state.options.server.remove(item.source,noop,noop);}
var allItemsProcessed=query('GET_ITEMS_BY_STATUS',ItemStatus.PROCESSING_COMPLETE).length===state.items.length;if(allItemsProcessed){dispatch('DID_COMPLETE_ITEM_PROCESSING_ALL');}});item.onOnce('process-error',function(error){failure({error:error,file:createItemAPI(item)});processNext();});var options=state.options;item.process(createFileProcessor(createProcessorFunction(options.server.url,options.server.process,options.name,{chunkTransferId:item.transferId,chunkServer:options.server.patch,chunkUploads:options.chunkUploads,chunkForce:options.chunkForce,chunkSize:options.chunkSize,chunkRetryDelays:options.chunkRetryDelays,}),{allowMinimumUploadDuration:query('GET_ALLOW_MINIMUM_UPLOAD_DURATION'),}),function(file,success,error){applyFilterChain('PREPARE_OUTPUT',file,{query:query,item:item}).then(function(file){dispatch('DID_PREPARE_OUTPUT',{id:item.id,file:file});success(file);}).catch(error);});}),RETRY_ITEM_PROCESSING:getItemByQueryFromState(state,function(item){dispatch('REQUEST_ITEM_PROCESSING',{query:item});}),REQUEST_REMOVE_ITEM:getItemByQueryFromState(state,function(item){optionalPromise(query('GET_BEFORE_REMOVE_FILE'),createItemAPI(item)).then(function(shouldRemove){if(!shouldRemove){return;}
dispatch('REMOVE_ITEM',{query:item});});}),RELEASE_ITEM:getItemByQueryFromState(state,function(item){item.release();}),REMOVE_ITEM:getItemByQueryFromState(state,function(item,success,failure,options){var removeFromView=function removeFromView(){var id=item.id;getItemById(state.items,id).archive();dispatch('DID_REMOVE_ITEM',{error:null,id:id,item:item});listUpdated(dispatch,state);success(createItemAPI(item));};var server=state.options.server;if(item.origin===FileOrigin.LOCAL&&server&&isFunction(server.remove)&&options.remove!==false){dispatch('DID_START_ITEM_REMOVE',{id:item.id});server.remove(item.source,function(){return removeFromView();},function(status){dispatch('DID_THROW_ITEM_REMOVE_ERROR',{id:item.id,error:createResponse('error',0,status,null),status:{main:dynamicLabel(state.options.labelFileRemoveError)(status),sub:state.options.labelTapToRetry,},});});}else{if((options.revert&&item.origin!==FileOrigin.LOCAL&&item.serverId!==null)||(state.options.chunkUploads&&item.file.size>state.options.chunkSize)||(state.options.chunkUploads&&state.options.chunkForce)){item.revert(createRevertFunction(state.options.server.url,state.options.server.revert),query('GET_FORCE_REVERT'));}
removeFromView();}}),ABORT_ITEM_LOAD:getItemByQueryFromState(state,function(item){item.abortLoad();}),ABORT_ITEM_PROCESSING:getItemByQueryFromState(state,function(item){if(item.serverId){dispatch('REVERT_ITEM_PROCESSING',{id:item.id});return;}
item.abortProcessing().then(function(){var shouldRemove=state.options.instantUpload;if(shouldRemove){dispatch('REMOVE_ITEM',{query:item.id});}});}),REQUEST_REVERT_ITEM_PROCESSING:getItemByQueryFromState(state,function(item){if(!state.options.instantUpload){dispatch('REVERT_ITEM_PROCESSING',{query:item});return;}
var handleRevert=function handleRevert(shouldRevert){if(!shouldRevert)return;dispatch('REVERT_ITEM_PROCESSING',{query:item});};var fn=query('GET_BEFORE_REMOVE_FILE');if(!fn){return handleRevert(true);}
var requestRemoveResult=fn(createItemAPI(item));if(requestRemoveResult==null){return handleRevert(true);}
if(typeof requestRemoveResult==='boolean'){return handleRevert(requestRemoveResult);}
if(typeof requestRemoveResult.then==='function'){requestRemoveResult.then(handleRevert);}}),REVERT_ITEM_PROCESSING:getItemByQueryFromState(state,function(item){item.revert(createRevertFunction(state.options.server.url,state.options.server.revert),query('GET_FORCE_REVERT')).then(function(){var shouldRemove=state.options.instantUpload||isMockItem(item);if(shouldRemove){dispatch('REMOVE_ITEM',{query:item.id});}}).catch(function(){});}),SET_OPTIONS:function SET_OPTIONS(_ref11){var options=_ref11.options;var optionKeys=Object.keys(options);var prioritizedOptionKeys=PrioritizedOptions.filter(function(key){return optionKeys.includes(key);});var orderedOptionKeys=[].concat(_toConsumableArray(prioritizedOptionKeys),_toConsumableArray(Object.keys(options).filter(function(key){return!prioritizedOptionKeys.includes(key);})));orderedOptionKeys.forEach(function(key){dispatch('SET_'+fromCamels(key,'_').toUpperCase(),{value:options[key],});});},};};var PrioritizedOptions=['server'];var formatFilename=function formatFilename(name){return name;};var createElement$1=function createElement(tagName){return document.createElement(tagName);};var text=function text(node,value){var textNode=node.childNodes[0];if(!textNode){textNode=document.createTextNode(value);node.appendChild(textNode);}else if(value!==textNode.nodeValue){textNode.nodeValue=value;}};var polarToCartesian=function polarToCartesian(centerX,centerY,radius,angleInDegrees){var angleInRadians=(((angleInDegrees%360)-90)*Math.PI)/180.0;return{x:centerX+radius*Math.cos(angleInRadians),y:centerY+radius*Math.sin(angleInRadians),};};var describeArc=function describeArc(x,y,radius,startAngle,endAngle,arcSweep){var start=polarToCartesian(x,y,radius,endAngle);var end=polarToCartesian(x,y,radius,startAngle);return['M',start.x,start.y,'A',radius,radius,0,arcSweep,0,end.x,end.y].join(' ');};var percentageArc=function percentageArc(x,y,radius,from,to){var arcSweep=1;if(to>from&&to-from<=0.5){arcSweep=0;}
if(from>to&&from-to>=0.5){arcSweep=0;}
return describeArc(x,y,radius,Math.min(0.9999,from)*360,Math.min(0.9999,to)*360,arcSweep);};var create=function create(_ref){var root=_ref.root,props=_ref.props;props.spin=false;props.progress=0;props.opacity=0;var svg=createElement('svg');root.ref.path=createElement('path',{'stroke-width':2,'stroke-linecap':'round',});svg.appendChild(root.ref.path);root.ref.svg=svg;root.appendChild(svg);};var write=function write(_ref2){var root=_ref2.root,props=_ref2.props;if(props.opacity===0){return;}
if(props.align){root.element.dataset.align=props.align;}
var ringStrokeWidth=parseInt(attr(root.ref.path,'stroke-width'),10);var size=root.rect.element.width*0.5;var ringFrom=0;var ringTo=0;if(props.spin){ringFrom=0;ringTo=0.5;}else{ringFrom=0;ringTo=props.progress;}
var coordinates=percentageArc(size,size,size-ringStrokeWidth,ringFrom,ringTo);attr(root.ref.path,'d',coordinates);attr(root.ref.path,'stroke-opacity',props.spin||props.progress>0?1:0);};var progressIndicator=createView({tag:'div',name:'progress-indicator',ignoreRectUpdate:true,ignoreRect:true,create:create,write:write,mixins:{apis:['progress','spin','align'],styles:['opacity'],animations:{opacity:{type:'tween',duration:500},progress:{type:'spring',stiffness:0.95,damping:0.65,mass:10,},},},});var create$1=function create(_ref){var root=_ref.root,props=_ref.props;root.element.innerHTML=(props.icon||'')+('<span>'+props.label+'</span>');props.isDisabled=false;};var write$1=function write(_ref2){var root=_ref2.root,props=_ref2.props;var isDisabled=props.isDisabled;var shouldDisable=root.query('GET_DISABLED')||props.opacity===0;if(shouldDisable&&!isDisabled){props.isDisabled=true;attr(root.element,'disabled','disabled');}else if(!shouldDisable&&isDisabled){props.isDisabled=false;root.element.removeAttribute('disabled');}};var fileActionButton=createView({tag:'button',attributes:{type:'button',},ignoreRect:true,ignoreRectUpdate:true,name:'file-action-button',mixins:{apis:['label'],styles:['translateX','translateY','scaleX','scaleY','opacity'],animations:{scaleX:'spring',scaleY:'spring',translateX:'spring',translateY:'spring',opacity:{type:'tween',duration:250},},listeners:true,},create:create$1,write:write$1,});var toNaturalFileSize=function toNaturalFileSize(bytes){var decimalSeparator=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'.';var base=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1000;var options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _options$labelBytes=options.labelBytes,labelBytes=_options$labelBytes===void 0?'bytes':_options$labelBytes,_options$labelKilobyt=options.labelKilobytes,labelKilobytes=_options$labelKilobyt===void 0?'KB':_options$labelKilobyt,_options$labelMegabyt=options.labelMegabytes,labelMegabytes=_options$labelMegabyt===void 0?'MB':_options$labelMegabyt,_options$labelGigabyt=options.labelGigabytes,labelGigabytes=_options$labelGigabyt===void 0?'GB':_options$labelGigabyt;bytes=Math.round(Math.abs(bytes));var KB=base;var MB=base*base;var GB=base*base*base;if(bytes<KB){return bytes+' '+labelBytes;}
if(bytes<MB){return Math.floor(bytes/KB)+' '+labelKilobytes;}
if(bytes<GB){return removeDecimalsWhenZero(bytes/MB,1,decimalSeparator)+' '+labelMegabytes;}
return removeDecimalsWhenZero(bytes/GB,2,decimalSeparator)+' '+labelGigabytes;};var removeDecimalsWhenZero=function removeDecimalsWhenZero(value,decimalCount,separator){return value.toFixed(decimalCount).split('.').filter(function(part){return part!=='0';}).join(separator);};var create$2=function create(_ref){var root=_ref.root,props=_ref.props;var fileName=createElement$1('span');fileName.className='filepond--file-info-main';attr(fileName,'aria-hidden','true');root.appendChild(fileName);root.ref.fileName=fileName;var fileSize=createElement$1('span');fileSize.className='filepond--file-info-sub';root.appendChild(fileSize);root.ref.fileSize=fileSize;text(fileSize,root.query('GET_LABEL_FILE_WAITING_FOR_SIZE'));text(fileName,formatFilename(root.query('GET_ITEM_NAME',props.id)));};var updateFile=function updateFile(_ref2){var root=_ref2.root,props=_ref2.props;text(root.ref.fileSize,toNaturalFileSize(root.query('GET_ITEM_SIZE',props.id),'.',root.query('GET_FILE_SIZE_BASE'),root.query('GET_FILE_SIZE_LABELS',root.query)));text(root.ref.fileName,formatFilename(root.query('GET_ITEM_NAME',props.id)));};var updateFileSizeOnError=function updateFileSizeOnError(_ref3){var root=_ref3.root,props=_ref3.props;if(isInt(root.query('GET_ITEM_SIZE',props.id))){updateFile({root:root,props:props});return;}
text(root.ref.fileSize,root.query('GET_LABEL_FILE_SIZE_NOT_AVAILABLE'));};var fileInfo=createView({name:'file-info',ignoreRect:true,ignoreRectUpdate:true,write:createRoute({DID_LOAD_ITEM:updateFile,DID_UPDATE_ITEM_META:updateFile,DID_THROW_ITEM_LOAD_ERROR:updateFileSizeOnError,DID_THROW_ITEM_INVALID:updateFileSizeOnError,}),didCreateView:function didCreateView(root){applyFilters('CREATE_VIEW',Object.assign({},root,{view:root}));},create:create$2,mixins:{styles:['translateX','translateY'],animations:{translateX:'spring',translateY:'spring',},},});var toPercentage=function toPercentage(value){return Math.round(value*100);};var create$3=function create(_ref){var root=_ref.root;var main=createElement$1('span');main.className='filepond--file-status-main';root.appendChild(main);root.ref.main=main;var sub=createElement$1('span');sub.className='filepond--file-status-sub';root.appendChild(sub);root.ref.sub=sub;didSetItemLoadProgress({root:root,action:{progress:null}});};var didSetItemLoadProgress=function didSetItemLoadProgress(_ref2){var root=_ref2.root,action=_ref2.action;var title=action.progress===null?root.query('GET_LABEL_FILE_LOADING'):root.query('GET_LABEL_FILE_LOADING')+' '+toPercentage(action.progress)+'%';text(root.ref.main,title);text(root.ref.sub,root.query('GET_LABEL_TAP_TO_CANCEL'));};var didSetItemProcessProgress=function didSetItemProcessProgress(_ref3){var root=_ref3.root,action=_ref3.action;var title=action.progress===null?root.query('GET_LABEL_FILE_PROCESSING'):root.query('GET_LABEL_FILE_PROCESSING')+' '+
toPercentage(action.progress)+'%';text(root.ref.main,title);text(root.ref.sub,root.query('GET_LABEL_TAP_TO_CANCEL'));};var didRequestItemProcessing=function didRequestItemProcessing(_ref4){var root=_ref4.root;text(root.ref.main,root.query('GET_LABEL_FILE_PROCESSING'));text(root.ref.sub,root.query('GET_LABEL_TAP_TO_CANCEL'));};var didAbortItemProcessing=function didAbortItemProcessing(_ref5){var root=_ref5.root;text(root.ref.main,root.query('GET_LABEL_FILE_PROCESSING_ABORTED'));text(root.ref.sub,root.query('GET_LABEL_TAP_TO_RETRY'));};var didCompleteItemProcessing=function didCompleteItemProcessing(_ref6){var root=_ref6.root;text(root.ref.main,root.query('GET_LABEL_FILE_PROCESSING_COMPLETE'));text(root.ref.sub,root.query('GET_LABEL_TAP_TO_UNDO'));};var clear=function clear(_ref7){var root=_ref7.root;text(root.ref.main,'');text(root.ref.sub,'');};var error=function error(_ref8){var root=_ref8.root,action=_ref8.action;text(root.ref.main,action.status.main);text(root.ref.sub,action.status.sub);};var fileStatus=createView({name:'file-status',ignoreRect:true,ignoreRectUpdate:true,write:createRoute({DID_LOAD_ITEM:clear,DID_REVERT_ITEM_PROCESSING:clear,DID_REQUEST_ITEM_PROCESSING:didRequestItemProcessing,DID_ABORT_ITEM_PROCESSING:didAbortItemProcessing,DID_COMPLETE_ITEM_PROCESSING:didCompleteItemProcessing,DID_UPDATE_ITEM_PROCESS_PROGRESS:didSetItemProcessProgress,DID_UPDATE_ITEM_LOAD_PROGRESS:didSetItemLoadProgress,DID_THROW_ITEM_LOAD_ERROR:error,DID_THROW_ITEM_INVALID:error,DID_THROW_ITEM_PROCESSING_ERROR:error,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:error,DID_THROW_ITEM_REMOVE_ERROR:error,}),didCreateView:function didCreateView(root){applyFilters('CREATE_VIEW',Object.assign({},root,{view:root}));},create:create$3,mixins:{styles:['translateX','translateY','opacity'],animations:{opacity:{type:'tween',duration:250},translateX:'spring',translateY:'spring',},},});var Buttons={AbortItemLoad:{label:'GET_LABEL_BUTTON_ABORT_ITEM_LOAD',action:'ABORT_ITEM_LOAD',className:'filepond--action-abort-item-load',align:'LOAD_INDICATOR_POSITION',},RetryItemLoad:{label:'GET_LABEL_BUTTON_RETRY_ITEM_LOAD',action:'RETRY_ITEM_LOAD',icon:'GET_ICON_RETRY',className:'filepond--action-retry-item-load',align:'BUTTON_PROCESS_ITEM_POSITION',},RemoveItem:{label:'GET_LABEL_BUTTON_REMOVE_ITEM',action:'REQUEST_REMOVE_ITEM',icon:'GET_ICON_REMOVE',className:'filepond--action-remove-item',align:'BUTTON_REMOVE_ITEM_POSITION',},ProcessItem:{label:'GET_LABEL_BUTTON_PROCESS_ITEM',action:'REQUEST_ITEM_PROCESSING',icon:'GET_ICON_PROCESS',className:'filepond--action-process-item',align:'BUTTON_PROCESS_ITEM_POSITION',},AbortItemProcessing:{label:'GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING',action:'ABORT_ITEM_PROCESSING',className:'filepond--action-abort-item-processing',align:'BUTTON_PROCESS_ITEM_POSITION',},RetryItemProcessing:{label:'GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING',action:'RETRY_ITEM_PROCESSING',icon:'GET_ICON_RETRY',className:'filepond--action-retry-item-processing',align:'BUTTON_PROCESS_ITEM_POSITION',},RevertItemProcessing:{label:'GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING',action:'REQUEST_REVERT_ITEM_PROCESSING',icon:'GET_ICON_UNDO',className:'filepond--action-revert-item-processing',align:'BUTTON_PROCESS_ITEM_POSITION',},};var ButtonKeys=[];forin(Buttons,function(key){ButtonKeys.push(key);});var calculateFileInfoOffset=function calculateFileInfoOffset(root){if(getRemoveIndicatorAligment(root)==='right')return 0;var buttonRect=root.ref.buttonRemoveItem.rect.element;return buttonRect.hidden?null:buttonRect.width+buttonRect.left;};var calculateButtonWidth=function calculateButtonWidth(root){var buttonRect=root.ref.buttonAbortItemLoad.rect.element;return buttonRect.width;};var calculateFileVerticalCenterOffset=function calculateFileVerticalCenterOffset(root){return Math.floor(root.ref.buttonRemoveItem.rect.element.height/4);};var calculateFileHorizontalCenterOffset=function calculateFileHorizontalCenterOffset(root){return Math.floor(root.ref.buttonRemoveItem.rect.element.left/2);};var getLoadIndicatorAlignment=function getLoadIndicatorAlignment(root){return root.query('GET_STYLE_LOAD_INDICATOR_POSITION');};var getProcessIndicatorAlignment=function getProcessIndicatorAlignment(root){return root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION');};var getRemoveIndicatorAligment=function getRemoveIndicatorAligment(root){return root.query('GET_STYLE_BUTTON_REMOVE_ITEM_POSITION');};var DefaultStyle={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:getLoadIndicatorAlignment},processProgressIndicator:{opacity:0,align:getProcessIndicatorAlignment},processingCompleteIndicator:{opacity:0,scaleX:0.75,scaleY:0.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0},};var IdleStyle={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:calculateFileInfoOffset},status:{translateX:calculateFileInfoOffset},};var ProcessingStyle={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1},};var StyleMap={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:calculateFileInfoOffset},status:{translateX:calculateFileInfoOffset,opacity:1},},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1},},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:calculateFileInfoOffset},status:{opacity:1},},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:getRemoveIndicatorAligment},info:{translateX:calculateFileInfoOffset},status:{opacity:0},},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:getRemoveIndicatorAligment},buttonRemoveItem:{opacity:1},info:{translateX:calculateFileInfoOffset},status:{opacity:1,translateX:calculateFileInfoOffset},},DID_LOAD_ITEM:IdleStyle,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:calculateFileInfoOffset},status:{translateX:calculateFileInfoOffset},},DID_START_ITEM_PROCESSING:ProcessingStyle,DID_REQUEST_ITEM_PROCESSING:ProcessingStyle,DID_UPDATE_ITEM_PROCESS_PROGRESS:ProcessingStyle,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1},},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:calculateFileInfoOffset},},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1},},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:calculateFileInfoOffset},status:{opacity:1},},DID_REVERT_ITEM_PROCESSING:IdleStyle,};var processingCompleteIndicatorView=createView({create:function create(_ref){var root=_ref.root;root.element.innerHTML=root.query('GET_ICON_DONE');},name:'processing-complete-indicator',ignoreRect:true,mixins:{styles:['scaleX','scaleY','opacity'],animations:{scaleX:'spring',scaleY:'spring',opacity:{type:'tween',duration:250},},},});var create$4=function create(_ref2){var root=_ref2.root,props=_ref2.props;var LocalButtons=Object.keys(Buttons).reduce(function(prev,curr){prev[curr]=Object.assign({},Buttons[curr]);return prev;},{});var id=props.id;var allowRevert=root.query('GET_ALLOW_REVERT');var allowRemove=root.query('GET_ALLOW_REMOVE');var allowProcess=root.query('GET_ALLOW_PROCESS');var instantUpload=root.query('GET_INSTANT_UPLOAD');var isAsync=root.query('IS_ASYNC');var alignRemoveItemButton=root.query('GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN');var buttonFilter;if(isAsync){if(allowProcess&&!allowRevert){buttonFilter=function buttonFilter(key){return!/RevertItemProcessing/.test(key);};}else if(!allowProcess&&allowRevert){buttonFilter=function buttonFilter(key){return!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(key);};}else if(!allowProcess&&!allowRevert){buttonFilter=function buttonFilter(key){return!/Process/.test(key);};}}else{buttonFilter=function buttonFilter(key){return!/Process/.test(key);};}
var enabledButtons=buttonFilter?ButtonKeys.filter(buttonFilter):ButtonKeys.concat();if(instantUpload&&allowRevert){LocalButtons['RevertItemProcessing'].label='GET_LABEL_BUTTON_REMOVE_ITEM';LocalButtons['RevertItemProcessing'].icon='GET_ICON_REMOVE';}
if(isAsync&&!allowRevert){var map=StyleMap['DID_COMPLETE_ITEM_PROCESSING'];map.info.translateX=calculateFileHorizontalCenterOffset;map.info.translateY=calculateFileVerticalCenterOffset;map.status.translateY=calculateFileVerticalCenterOffset;map.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1};}
if(isAsync&&!allowProcess){['DID_START_ITEM_PROCESSING','DID_REQUEST_ITEM_PROCESSING','DID_UPDATE_ITEM_PROCESS_PROGRESS','DID_THROW_ITEM_PROCESSING_ERROR',].forEach(function(key){StyleMap[key].status.translateY=calculateFileVerticalCenterOffset;});StyleMap['DID_THROW_ITEM_PROCESSING_ERROR'].status.translateX=calculateButtonWidth;}
if(alignRemoveItemButton&&allowRevert){LocalButtons['RevertItemProcessing'].align='BUTTON_REMOVE_ITEM_POSITION';var _map=StyleMap['DID_COMPLETE_ITEM_PROCESSING'];_map.info.translateX=calculateFileInfoOffset;_map.status.translateY=calculateFileVerticalCenterOffset;_map.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1};}
if(!allowRemove){LocalButtons['RemoveItem'].disabled=true;}
forin(LocalButtons,function(key,definition){var buttonView=root.createChildView(fileActionButton,{label:root.query(definition.label),icon:root.query(definition.icon),opacity:0,});if(enabledButtons.includes(key)){root.appendChildView(buttonView);}
if(definition.disabled){buttonView.element.setAttribute('disabled','disabled');buttonView.element.setAttribute('hidden','hidden');}
buttonView.element.dataset.align=root.query('GET_STYLE_'+definition.align);buttonView.element.classList.add(definition.className);buttonView.on('click',function(e){e.stopPropagation();if(definition.disabled)return;root.dispatch(definition.action,{query:id});});root.ref['button'+key]=buttonView;});root.ref.processingCompleteIndicator=root.appendChildView(root.createChildView(processingCompleteIndicatorView));root.ref.processingCompleteIndicator.element.dataset.align=root.query('GET_STYLE_BUTTON_PROCESS_ITEM_POSITION');root.ref.info=root.appendChildView(root.createChildView(fileInfo,{id:id}));root.ref.status=root.appendChildView(root.createChildView(fileStatus,{id:id}));var loadIndicatorView=root.appendChildView(root.createChildView(progressIndicator,{opacity:0,align:root.query('GET_STYLE_LOAD_INDICATOR_POSITION'),}));loadIndicatorView.element.classList.add('filepond--load-indicator');root.ref.loadProgressIndicator=loadIndicatorView;var progressIndicatorView=root.appendChildView(root.createChildView(progressIndicator,{opacity:0,align:root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION'),}));progressIndicatorView.element.classList.add('filepond--process-indicator');root.ref.processProgressIndicator=progressIndicatorView;root.ref.activeStyles=[];};var write$2=function write(_ref3){var root=_ref3.root,actions=_ref3.actions,props=_ref3.props;route({root:root,actions:actions,props:props});var action=actions.concat().filter(function(action){return/^DID_/.test(action.type);}).reverse().find(function(action){return StyleMap[action.type];});if(action){root.ref.activeStyles=[];var stylesToApply=StyleMap[action.type];forin(DefaultStyle,function(name,defaultStyles){var control=root.ref[name];forin(defaultStyles,function(key,defaultValue){var value=stylesToApply[name]&&typeof stylesToApply[name][key]!=='undefined'?stylesToApply[name][key]:defaultValue;root.ref.activeStyles.push({control:control,key:key,value:value});});});}
root.ref.activeStyles.forEach(function(_ref4){var control=_ref4.control,key=_ref4.key,value=_ref4.value;control[key]=typeof value==='function'?value(root):value;});};var route=createRoute({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:function DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING(_ref5){var root=_ref5.root,action=_ref5.action;root.ref.buttonAbortItemProcessing.label=action.value;},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:function DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD(_ref6){var root=_ref6.root,action=_ref6.action;root.ref.buttonAbortItemLoad.label=action.value;},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:function DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL(_ref7){var root=_ref7.root,action=_ref7.action;root.ref.buttonAbortItemRemoval.label=action.value;},DID_REQUEST_ITEM_PROCESSING:function DID_REQUEST_ITEM_PROCESSING(_ref8){var root=_ref8.root;root.ref.processProgressIndicator.spin=true;root.ref.processProgressIndicator.progress=0;},DID_START_ITEM_LOAD:function DID_START_ITEM_LOAD(_ref9){var root=_ref9.root;root.ref.loadProgressIndicator.spin=true;root.ref.loadProgressIndicator.progress=0;},DID_START_ITEM_REMOVE:function DID_START_ITEM_REMOVE(_ref10){var root=_ref10.root;root.ref.processProgressIndicator.spin=true;root.ref.processProgressIndicator.progress=0;},DID_UPDATE_ITEM_LOAD_PROGRESS:function DID_UPDATE_ITEM_LOAD_PROGRESS(_ref11){var root=_ref11.root,action=_ref11.action;root.ref.loadProgressIndicator.spin=false;root.ref.loadProgressIndicator.progress=action.progress;},DID_UPDATE_ITEM_PROCESS_PROGRESS:function DID_UPDATE_ITEM_PROCESS_PROGRESS(_ref12){var root=_ref12.root,action=_ref12.action;root.ref.processProgressIndicator.spin=false;root.ref.processProgressIndicator.progress=action.progress;},});var file=createView({create:create$4,write:write$2,didCreateView:function didCreateView(root){applyFilters('CREATE_VIEW',Object.assign({},root,{view:root}));},name:'file',});var create$5=function create(_ref){var root=_ref.root,props=_ref.props;root.ref.fileName=createElement$1('legend');root.appendChild(root.ref.fileName);root.ref.file=root.appendChildView(root.createChildView(file,{id:props.id}));root.ref.data=false;};var didLoadItem=function didLoadItem(_ref2){var root=_ref2.root,props=_ref2.props;text(root.ref.fileName,formatFilename(root.query('GET_ITEM_NAME',props.id)));};var fileWrapper=createView({create:create$5,ignoreRect:true,write:createRoute({DID_LOAD_ITEM:didLoadItem,}),didCreateView:function didCreateView(root){applyFilters('CREATE_VIEW',Object.assign({},root,{view:root}));},tag:'fieldset',name:'file-wrapper',});var PANEL_SPRING_PROPS={type:'spring',damping:0.6,mass:7};var create$6=function create(_ref){var root=_ref.root,props=_ref.props;[{name:'top',},{name:'center',props:{translateY:null,scaleY:null,},mixins:{animations:{scaleY:PANEL_SPRING_PROPS,},styles:['translateY','scaleY'],},},{name:'bottom',props:{translateY:null,},mixins:{animations:{translateY:PANEL_SPRING_PROPS,},styles:['translateY'],},},].forEach(function(section){createSection(root,section,props.name);});root.element.classList.add('filepond--'+props.name);root.ref.scalable=null;};var createSection=function createSection(root,section,className){var viewConstructor=createView({name:'panel-'+section.name+' filepond--'+className,mixins:section.mixins,ignoreRectUpdate:true,});var view=root.createChildView(viewConstructor,section.props);root.ref[section.name]=root.appendChildView(view);};var write$3=function write(_ref2){var root=_ref2.root,props=_ref2.props;if(root.ref.scalable===null||props.scalable!==root.ref.scalable){root.ref.scalable=isBoolean(props.scalable)?props.scalable:true;root.element.dataset.scalable=root.ref.scalable;}
if(!props.height)return;var topRect=root.ref.top.rect.element;var bottomRect=root.ref.bottom.rect.element;var height=Math.max(topRect.height+bottomRect.height,props.height);root.ref.center.translateY=topRect.height;root.ref.center.scaleY=(height-topRect.height-bottomRect.height)/100;root.ref.bottom.translateY=height-bottomRect.height;};var panel=createView({name:'panel',read:function read(_ref3){var root=_ref3.root,props=_ref3.props;return(props.heightCurrent=root.ref.bottom.translateY);},write:write$3,create:create$6,ignoreRect:true,mixins:{apis:['height','heightCurrent','scalable'],},});var createDragHelper=function createDragHelper(items){var itemIds=items.map(function(item){return item.id;});var prevIndex=undefined;return{setIndex:function setIndex(index){prevIndex=index;},getIndex:function getIndex(){return prevIndex;},getItemIndex:function getItemIndex(item){return itemIds.indexOf(item.id);},};};var ITEM_TRANSLATE_SPRING={type:'spring',stiffness:0.75,damping:0.45,mass:10,};var ITEM_SCALE_SPRING='spring';var StateMap={DID_START_ITEM_LOAD:'busy',DID_UPDATE_ITEM_LOAD_PROGRESS:'loading',DID_THROW_ITEM_INVALID:'load-invalid',DID_THROW_ITEM_LOAD_ERROR:'load-error',DID_LOAD_ITEM:'idle',DID_THROW_ITEM_REMOVE_ERROR:'remove-error',DID_START_ITEM_REMOVE:'busy',DID_START_ITEM_PROCESSING:'busy processing',DID_REQUEST_ITEM_PROCESSING:'busy processing',DID_UPDATE_ITEM_PROCESS_PROGRESS:'processing',DID_COMPLETE_ITEM_PROCESSING:'processing-complete',DID_THROW_ITEM_PROCESSING_ERROR:'processing-error',DID_THROW_ITEM_PROCESSING_REVERT_ERROR:'processing-revert-error',DID_ABORT_ITEM_PROCESSING:'cancelled',DID_REVERT_ITEM_PROCESSING:'idle',};var create$7=function create(_ref){var root=_ref.root,props=_ref.props;root.ref.handleClick=function(e){return root.dispatch('DID_ACTIVATE_ITEM',{id:props.id});};root.element.id='filepond--item-'+props.id;root.element.addEventListener('click',root.ref.handleClick);root.ref.container=root.appendChildView(root.createChildView(fileWrapper,{id:props.id}));root.ref.panel=root.appendChildView(root.createChildView(panel,{name:'item-panel'}));root.ref.panel.height=null;props.markedForRemoval=false;if(!root.query('GET_ALLOW_REORDER'))return;root.element.dataset.dragState='idle';var grab=function grab(e){if(!e.isPrimary)return;var removedActivateListener=false;var origin={x:e.pageX,y:e.pageY,};props.dragOrigin={x:root.translateX,y:root.translateY,};props.dragCenter={x:e.offsetX,y:e.offsetY,};var dragState=createDragHelper(root.query('GET_ACTIVE_ITEMS'));root.dispatch('DID_GRAB_ITEM',{id:props.id,dragState:dragState});var drag=function drag(e){if(!e.isPrimary)return;e.stopPropagation();e.preventDefault();props.dragOffset={x:e.pageX-origin.x,y:e.pageY-origin.y,};var dist=props.dragOffset.x*props.dragOffset.x+
props.dragOffset.y*props.dragOffset.y;if(dist>16&&!removedActivateListener){removedActivateListener=true;root.element.removeEventListener('click',root.ref.handleClick);}
root.dispatch('DID_DRAG_ITEM',{id:props.id,dragState:dragState});};var drop=function drop(e){if(!e.isPrimary)return;document.removeEventListener('pointermove',drag);document.removeEventListener('pointerup',drop);props.dragOffset={x:e.pageX-origin.x,y:e.pageY-origin.y,};root.dispatch('DID_DROP_ITEM',{id:props.id,dragState:dragState});if(removedActivateListener){setTimeout(function(){return root.element.addEventListener('click',root.ref.handleClick);},0);}};document.addEventListener('pointermove',drag);document.addEventListener('pointerup',drop);};root.element.addEventListener('pointerdown',grab);};var route$1=createRoute({DID_UPDATE_PANEL_HEIGHT:function DID_UPDATE_PANEL_HEIGHT(_ref2){var root=_ref2.root,action=_ref2.action;root.height=action.height;},});var write$4=createRoute({DID_GRAB_ITEM:function DID_GRAB_ITEM(_ref3){var root=_ref3.root,props=_ref3.props;props.dragOrigin={x:root.translateX,y:root.translateY,};},DID_DRAG_ITEM:function DID_DRAG_ITEM(_ref4){var root=_ref4.root;root.element.dataset.dragState='drag';},DID_DROP_ITEM:function DID_DROP_ITEM(_ref5){var root=_ref5.root,props=_ref5.props;props.dragOffset=null;props.dragOrigin=null;root.element.dataset.dragState='drop';},},function(_ref6){var root=_ref6.root,actions=_ref6.actions,props=_ref6.props,shouldOptimize=_ref6.shouldOptimize;if(root.element.dataset.dragState==='drop'){if(root.scaleX<=1){root.element.dataset.dragState='idle';}}
var action=actions.concat().filter(function(action){return/^DID_/.test(action.type);}).reverse().find(function(action){return StateMap[action.type];});if(action&&action.type!==props.currentState){props.currentState=action.type;root.element.dataset.filepondItemState=StateMap[props.currentState]||'';}
var aspectRatio=root.query('GET_ITEM_PANEL_ASPECT_RATIO')||root.query('GET_PANEL_ASPECT_RATIO');if(!aspectRatio){route$1({root:root,actions:actions,props:props});if(!root.height&&root.ref.container.rect.element.height>0){root.height=root.ref.container.rect.element.height;}}else if(!shouldOptimize){root.height=root.rect.element.width*aspectRatio;}
if(shouldOptimize){root.ref.panel.height=null;}
root.ref.panel.height=root.height;});var item=createView({create:create$7,write:write$4,destroy:function destroy(_ref7){var root=_ref7.root,props=_ref7.props;root.element.removeEventListener('click',root.ref.handleClick);root.dispatch('RELEASE_ITEM',{query:props.id});},tag:'li',name:'item',mixins:{apis:['id','interactionMethod','markedForRemoval','spawnDate','dragCenter','dragOrigin','dragOffset',],styles:['translateX','translateY','scaleX','scaleY','opacity','height'],animations:{scaleX:ITEM_SCALE_SPRING,scaleY:ITEM_SCALE_SPRING,translateX:ITEM_TRANSLATE_SPRING,translateY:ITEM_TRANSLATE_SPRING,opacity:{type:'tween',duration:150},},},});var getItemsPerRow=function(horizontalSpace,itemWidth){return Math.max(1,Math.floor((horizontalSpace+1)/itemWidth));};var getItemIndexByPosition=function getItemIndexByPosition(view,children,positionInView){if(!positionInView)return;var horizontalSpace=view.rect.element.width;var l=children.length;var last=null;if(l===0||positionInView.top<children[0].rect.element.top)return-1;var item=children[0];var itemRect=item.rect.element;var itemHorizontalMargin=itemRect.marginLeft+itemRect.marginRight;var itemWidth=itemRect.width+itemHorizontalMargin;var itemsPerRow=getItemsPerRow(horizontalSpace,itemWidth);if(itemsPerRow===1){for(var index=0;index<l;index++){var child=children[index];var childMid=child.rect.outer.top+child.rect.element.height*0.5;if(positionInView.top<childMid){return index;}}
return l;}
var itemVerticalMargin=itemRect.marginTop+itemRect.marginBottom;var itemHeight=itemRect.height+itemVerticalMargin;for(var _index=0;_index<l;_index++){var indexX=_index%itemsPerRow;var indexY=Math.floor(_index/itemsPerRow);var offsetX=indexX*itemWidth;var offsetY=indexY*itemHeight;var itemTop=offsetY-itemRect.marginTop;var itemRight=offsetX+itemWidth;var itemBottom=offsetY+itemHeight+itemRect.marginBottom;if(positionInView.top<itemBottom&&positionInView.top>itemTop){if(positionInView.left<itemRight){return _index;}else if(_index!==l-1){last=_index;}else{last=null;}}}
if(last!==null){return last;}
return l;};var dropAreaDimensions={height:0,width:0,get getHeight(){return this.height;},set setHeight(val){if(this.height===0||val===0)this.height=val;},get getWidth(){return this.width;},set setWidth(val){if(this.width===0||val===0)this.width=val;},setDimensions:function setDimensions(height,width){if(this.height===0||height===0)this.height=height;if(this.width===0||width===0)this.width=width;},};var create$8=function create(_ref){var root=_ref.root;attr(root.element,'role','list');root.ref.lastItemSpanwDate=Date.now();};var addItemView=function addItemView(_ref2){var root=_ref2.root,action=_ref2.action;var id=action.id,index=action.index,interactionMethod=action.interactionMethod;root.ref.addIndex=index;var now=Date.now();var spawnDate=now;var opacity=1;if(interactionMethod!==InteractionMethod.NONE){opacity=0;var cooldown=root.query('GET_ITEM_INSERT_INTERVAL');var dist=now-root.ref.lastItemSpanwDate;spawnDate=dist<cooldown?now+(cooldown-dist):now;}
root.ref.lastItemSpanwDate=spawnDate;root.appendChildView(root.createChildView(item,{spawnDate:spawnDate,id:id,opacity:opacity,interactionMethod:interactionMethod,}),index);};var moveItem=function moveItem(item,x,y){var vx=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var vy=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;if(item.dragOffset){item.translateX=null;item.translateY=null;item.translateX=item.dragOrigin.x+item.dragOffset.x;item.translateY=item.dragOrigin.y+item.dragOffset.y;item.scaleX=1.025;item.scaleY=1.025;}else{item.translateX=x;item.translateY=y;if(Date.now()>item.spawnDate){if(item.opacity===0){introItemView(item,x,y,vx,vy);}
item.scaleX=1;item.scaleY=1;item.opacity=1;}}};var introItemView=function introItemView(item,x,y,vx,vy){if(item.interactionMethod===InteractionMethod.NONE){item.translateX=null;item.translateX=x;item.translateY=null;item.translateY=y;}else if(item.interactionMethod===InteractionMethod.DROP){item.translateX=null;item.translateX=x-vx*20;item.translateY=null;item.translateY=y-vy*10;item.scaleX=0.8;item.scaleY=0.8;}else if(item.interactionMethod===InteractionMethod.BROWSE){item.translateY=null;item.translateY=y-30;}else if(item.interactionMethod===InteractionMethod.API){item.translateX=null;item.translateX=x-30;item.translateY=null;}};var removeItemView=function removeItemView(_ref3){var root=_ref3.root,action=_ref3.action;var id=action.id;var view=root.childViews.find(function(child){return child.id===id;});if(!view){return;}
view.scaleX=0.9;view.scaleY=0.9;view.opacity=0;view.markedForRemoval=true;};var getItemHeight=function getItemHeight(child){return(child.rect.element.height+
child.rect.element.marginBottom*0.5+
child.rect.element.marginTop*0.5);};var getItemWidth=function getItemWidth(child){return(child.rect.element.width+
child.rect.element.marginLeft*0.5+
child.rect.element.marginRight*0.5);};var dragItem=function dragItem(_ref4){var root=_ref4.root,action=_ref4.action;var id=action.id,dragState=action.dragState;var item=root.query('GET_ITEM',{id:id});var view=root.childViews.find(function(child){return child.id===id;});var numItems=root.childViews.length;var oldIndex=dragState.getItemIndex(item);if(!view)return;var dragPosition={x:view.dragOrigin.x+view.dragOffset.x+view.dragCenter.x,y:view.dragOrigin.y+view.dragOffset.y+view.dragCenter.y,};var dragHeight=getItemHeight(view);var dragWidth=getItemWidth(view);var cols=Math.floor(root.rect.outer.width/dragWidth);if(cols>numItems)cols=numItems;var rows=Math.floor(numItems/cols+1);dropAreaDimensions.setHeight=dragHeight*rows;dropAreaDimensions.setWidth=dragWidth*cols;var location={y:Math.floor(dragPosition.y/dragHeight),x:Math.floor(dragPosition.x/dragWidth),getGridIndex:function getGridIndex(){if(dragPosition.y>dropAreaDimensions.getHeight||dragPosition.y<0||dragPosition.x>dropAreaDimensions.getWidth||dragPosition.x<0)
return oldIndex;return this.y*cols+this.x;},getColIndex:function getColIndex(){var items=root.query('GET_ACTIVE_ITEMS');var visibleChildren=root.childViews.filter(function(child){return child.rect.element.height;});var children=items.map(function(item){return visibleChildren.find(function(childView){return childView.id===item.id;});});var currentIndex=children.findIndex(function(child){return child===view;});var dragHeight=getItemHeight(view);var l=children.length;var idx=l;var childHeight=0;var childBottom=0;var childTop=0;for(var i=0;i<l;i++){childHeight=getItemHeight(children[i]);childTop=childBottom;childBottom=childTop+childHeight;if(dragPosition.y<childBottom){if(currentIndex>i){if(dragPosition.y<childTop+dragHeight){idx=i;break;}
continue;}
idx=i;break;}}
return idx;},};var index=cols>1?location.getGridIndex():location.getColIndex();root.dispatch('MOVE_ITEM',{query:view,index:index});var currentIndex=dragState.getIndex();if(currentIndex===undefined||currentIndex!==index){dragState.setIndex(index);if(currentIndex===undefined)return;root.dispatch('DID_REORDER_ITEMS',{items:root.query('GET_ACTIVE_ITEMS'),origin:oldIndex,target:index,});}};var route$2=createRoute({DID_ADD_ITEM:addItemView,DID_REMOVE_ITEM:removeItemView,DID_DRAG_ITEM:dragItem,});var write$5=function write(_ref5){var root=_ref5.root,props=_ref5.props,actions=_ref5.actions,shouldOptimize=_ref5.shouldOptimize;route$2({root:root,props:props,actions:actions});var dragCoordinates=props.dragCoordinates;var horizontalSpace=root.rect.element.width;var visibleChildren=root.childViews.filter(function(child){return child.rect.element.height;});var children=root.query('GET_ACTIVE_ITEMS').map(function(item){return visibleChildren.find(function(child){return child.id===item.id;});}).filter(function(item){return item;});var dragIndex=dragCoordinates?getItemIndexByPosition(root,children,dragCoordinates):null;var addIndex=root.ref.addIndex||null;root.ref.addIndex=null;var dragIndexOffset=0;var removeIndexOffset=0;var addIndexOffset=0;if(children.length===0)return;var childRect=children[0].rect.element;var itemVerticalMargin=childRect.marginTop+childRect.marginBottom;var itemHorizontalMargin=childRect.marginLeft+childRect.marginRight;var itemWidth=childRect.width+itemHorizontalMargin;var itemHeight=childRect.height+itemVerticalMargin;var itemsPerRow=getItemsPerRow(horizontalSpace,itemWidth);if(itemsPerRow===1){var offsetY=0;var dragOffset=0;children.forEach(function(child,index){if(dragIndex){var dist=index-dragIndex;if(dist===-2){dragOffset=-itemVerticalMargin*0.25;}else if(dist===-1){dragOffset=-itemVerticalMargin*0.75;}else if(dist===0){dragOffset=itemVerticalMargin*0.75;}else if(dist===1){dragOffset=itemVerticalMargin*0.25;}else{dragOffset=0;}}
if(shouldOptimize){child.translateX=null;child.translateY=null;}
if(!child.markedForRemoval){moveItem(child,0,offsetY+dragOffset);}
var itemHeight=child.rect.element.height+itemVerticalMargin;var visualHeight=itemHeight*(child.markedForRemoval?child.opacity:1);offsetY+=visualHeight;});}
else{var prevX=0;var prevY=0;children.forEach(function(child,index){if(index===dragIndex){dragIndexOffset=1;}
if(index===addIndex){addIndexOffset+=1;}
if(child.markedForRemoval&&child.opacity<0.5){removeIndexOffset-=1;}
var visualIndex=index+addIndexOffset+dragIndexOffset+removeIndexOffset;var indexX=visualIndex%itemsPerRow;var indexY=Math.floor(visualIndex/itemsPerRow);var offsetX=indexX*itemWidth;var offsetY=indexY*itemHeight;var vectorX=Math.sign(offsetX-prevX);var vectorY=Math.sign(offsetY-prevY);prevX=offsetX;prevY=offsetY;if(child.markedForRemoval)return;if(shouldOptimize){child.translateX=null;child.translateY=null;}
moveItem(child,offsetX,offsetY,vectorX,vectorY);});}};var filterSetItemActions=function filterSetItemActions(child,actions){return actions.filter(function(action){if(action.data&&action.data.id){return child.id===action.data.id;}
return true;});};var list=createView({create:create$8,write:write$5,tag:'ul',name:'list',didWriteView:function didWriteView(_ref6){var root=_ref6.root;root.childViews.filter(function(view){return view.markedForRemoval&&view.opacity===0&&view.resting;}).forEach(function(view){view._destroy();root.removeChildView(view);});},filterFrameActionsForChild:filterSetItemActions,mixins:{apis:['dragCoordinates'],},});var create$9=function create(_ref){var root=_ref.root,props=_ref.props;root.ref.list=root.appendChildView(root.createChildView(list));props.dragCoordinates=null;props.overflowing=false;};var storeDragCoordinates=function storeDragCoordinates(_ref2){var root=_ref2.root,props=_ref2.props,action=_ref2.action;if(!root.query('GET_ITEM_INSERT_LOCATION_FREEDOM'))return;props.dragCoordinates={left:action.position.scopeLeft-root.ref.list.rect.element.left,top:action.position.scopeTop-
(root.rect.outer.top+root.rect.element.marginTop+root.rect.element.scrollTop),};};var clearDragCoordinates=function clearDragCoordinates(_ref3){var props=_ref3.props;props.dragCoordinates=null;};var route$3=createRoute({DID_DRAG:storeDragCoordinates,DID_END_DRAG:clearDragCoordinates,});var write$6=function write(_ref4){var root=_ref4.root,props=_ref4.props,actions=_ref4.actions;route$3({root:root,props:props,actions:actions});root.ref.list.dragCoordinates=props.dragCoordinates;if(props.overflowing&&!props.overflow){props.overflowing=false;root.element.dataset.state='';root.height=null;}
if(props.overflow){var newHeight=Math.round(props.overflow);if(newHeight!==root.height){props.overflowing=true;root.element.dataset.state='overflow';root.height=newHeight;}}};var listScroller=createView({create:create$9,write:write$6,name:'list-scroller',mixins:{apis:['overflow','dragCoordinates'],styles:['height','translateY'],animations:{translateY:'spring',},},});var attrToggle=function attrToggle(element,name,state){var enabledValue=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'';if(state){attr(element,name,enabledValue);}else{element.removeAttribute(name);}};var resetFileInput=function resetFileInput(input){if(!input||input.value===''){return;}
try{input.value='';}catch(err){}
if(input.value){var form=createElement$1('form');var parentNode=input.parentNode;var ref=input.nextSibling;form.appendChild(input);form.reset();if(ref){parentNode.insertBefore(input,ref);}else{parentNode.appendChild(input);}}};var create$a=function create(_ref){var root=_ref.root,props=_ref.props;root.element.id='filepond--browser-'+props.id;attr(root.element,'name',root.query('GET_NAME'));attr(root.element,'aria-controls','filepond--assistant-'+props.id);attr(root.element,'aria-labelledby','filepond--drop-label-'+props.id);setAcceptedFileTypes({root:root,action:{value:root.query('GET_ACCEPTED_FILE_TYPES')},});toggleAllowMultiple({root:root,action:{value:root.query('GET_ALLOW_MULTIPLE')}});toggleDirectoryFilter({root:root,action:{value:root.query('GET_ALLOW_DIRECTORIES_ONLY')},});toggleDisabled({root:root});toggleRequired({root:root,action:{value:root.query('GET_REQUIRED')}});setCaptureMethod({root:root,action:{value:root.query('GET_CAPTURE_METHOD')}});root.ref.handleChange=function(e){if(!root.element.value){return;}
var files=Array.from(root.element.files).map(function(file){file._relativePath=file.webkitRelativePath;return file;});setTimeout(function(){props.onload(files);resetFileInput(root.element);},250);};root.element.addEventListener('change',root.ref.handleChange);};var setAcceptedFileTypes=function setAcceptedFileTypes(_ref2){var root=_ref2.root,action=_ref2.action;if(!root.query('GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE'))return;attrToggle(root.element,'accept',!!action.value,action.value?action.value.join(','):'');};var toggleAllowMultiple=function toggleAllowMultiple(_ref3){var root=_ref3.root,action=_ref3.action;attrToggle(root.element,'multiple',action.value);};var toggleDirectoryFilter=function toggleDirectoryFilter(_ref4){var root=_ref4.root,action=_ref4.action;attrToggle(root.element,'webkitdirectory',action.value);};var toggleDisabled=function toggleDisabled(_ref5){var root=_ref5.root;var isDisabled=root.query('GET_DISABLED');var doesAllowBrowse=root.query('GET_ALLOW_BROWSE');var disableField=isDisabled||!doesAllowBrowse;attrToggle(root.element,'disabled',disableField);};var toggleRequired=function toggleRequired(_ref6){var root=_ref6.root,action=_ref6.action;if(!action.value){attrToggle(root.element,'required',false);}
else if(root.query('GET_TOTAL_ITEMS')===0){attrToggle(root.element,'required',true);}};var setCaptureMethod=function setCaptureMethod(_ref7){var root=_ref7.root,action=_ref7.action;attrToggle(root.element,'capture',!!action.value,action.value===true?'':action.value);};var updateRequiredStatus=function updateRequiredStatus(_ref8){var root=_ref8.root;var element=root.element;if(root.query('GET_TOTAL_ITEMS')>0){attrToggle(element,'required',false);attrToggle(element,'name',false);}else{attrToggle(element,'name',true,root.query('GET_NAME'));var shouldCheckValidity=root.query('GET_CHECK_VALIDITY');if(shouldCheckValidity){element.setCustomValidity('');}
if(root.query('GET_REQUIRED')){attrToggle(element,'required',true);}}};var updateFieldValidityStatus=function updateFieldValidityStatus(_ref9){var root=_ref9.root;var shouldCheckValidity=root.query('GET_CHECK_VALIDITY');if(!shouldCheckValidity)return;root.element.setCustomValidity(root.query('GET_LABEL_INVALID_FIELD'));};var browser=createView({tag:'input',name:'browser',ignoreRect:true,ignoreRectUpdate:true,attributes:{type:'file',},create:create$a,destroy:function destroy(_ref10){var root=_ref10.root;root.element.removeEventListener('change',root.ref.handleChange);},write:createRoute({DID_LOAD_ITEM:updateRequiredStatus,DID_REMOVE_ITEM:updateRequiredStatus,DID_THROW_ITEM_INVALID:updateFieldValidityStatus,DID_SET_DISABLED:toggleDisabled,DID_SET_ALLOW_BROWSE:toggleDisabled,DID_SET_ALLOW_DIRECTORIES_ONLY:toggleDirectoryFilter,DID_SET_ALLOW_MULTIPLE:toggleAllowMultiple,DID_SET_ACCEPTED_FILE_TYPES:setAcceptedFileTypes,DID_SET_CAPTURE_METHOD:setCaptureMethod,DID_SET_REQUIRED:toggleRequired,}),});var Key={ENTER:13,SPACE:32,};var create$b=function create(_ref){var root=_ref.root,props=_ref.props;var label=createElement$1('label');attr(label,'for','filepond--browser-'+props.id);attr(label,'id','filepond--drop-label-'+props.id);attr(label,'aria-hidden','true');root.ref.handleKeyDown=function(e){var isActivationKey=e.keyCode===Key.ENTER||e.keyCode===Key.SPACE;if(!isActivationKey)return;e.preventDefault();root.ref.label.click();};root.ref.handleClick=function(e){var isLabelClick=e.target===label||label.contains(e.target);if(isLabelClick)return;root.ref.label.click();};label.addEventListener('keydown',root.ref.handleKeyDown);root.element.addEventListener('click',root.ref.handleClick);updateLabelValue(label,props.caption);root.appendChild(label);root.ref.label=label;};var updateLabelValue=function updateLabelValue(label,value){label.innerHTML=value;var clickable=label.querySelector('.filepond--label-action');if(clickable){attr(clickable,'tabindex','0');}
return value;};var dropLabel=createView({name:'drop-label',ignoreRect:true,create:create$b,destroy:function destroy(_ref2){var root=_ref2.root;root.ref.label.addEventListener('keydown',root.ref.handleKeyDown);root.element.removeEventListener('click',root.ref.handleClick);},write:createRoute({DID_SET_LABEL_IDLE:function DID_SET_LABEL_IDLE(_ref3){var root=_ref3.root,action=_ref3.action;updateLabelValue(root.ref.label,action.value);},}),mixins:{styles:['opacity','translateX','translateY'],animations:{opacity:{type:'tween',duration:150},translateX:'spring',translateY:'spring',},},});var blob=createView({name:'drip-blob',ignoreRect:true,mixins:{styles:['translateX','translateY','scaleX','scaleY','opacity'],animations:{scaleX:'spring',scaleY:'spring',translateX:'spring',translateY:'spring',opacity:{type:'tween',duration:250},},},});var addBlob=function addBlob(_ref){var root=_ref.root;var centerX=root.rect.element.width*0.5;var centerY=root.rect.element.height*0.5;root.ref.blob=root.appendChildView(root.createChildView(blob,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:centerX,translateY:centerY,}));};var moveBlob=function moveBlob(_ref2){var root=_ref2.root,action=_ref2.action;if(!root.ref.blob){addBlob({root:root});return;}
root.ref.blob.translateX=action.position.scopeLeft;root.ref.blob.translateY=action.position.scopeTop;root.ref.blob.scaleX=1;root.ref.blob.scaleY=1;root.ref.blob.opacity=1;};var hideBlob=function hideBlob(_ref3){var root=_ref3.root;if(!root.ref.blob){return;}
root.ref.blob.opacity=0;};var explodeBlob=function explodeBlob(_ref4){var root=_ref4.root;if(!root.ref.blob){return;}
root.ref.blob.scaleX=2.5;root.ref.blob.scaleY=2.5;root.ref.blob.opacity=0;};var write$7=function write(_ref5){var root=_ref5.root,props=_ref5.props,actions=_ref5.actions;route$4({root:root,props:props,actions:actions});var blob=root.ref.blob;if(actions.length===0&&blob&&blob.opacity===0){root.removeChildView(blob);root.ref.blob=null;}};var route$4=createRoute({DID_DRAG:moveBlob,DID_DROP:explodeBlob,DID_END_DRAG:hideBlob,});var drip=createView({ignoreRect:true,ignoreRectUpdate:true,name:'drip',write:write$7,});var setInputFiles=function setInputFiles(element,files){try{var dataTransfer=new DataTransfer();files.forEach(function(file){if(file instanceof File){dataTransfer.items.add(file);}else{dataTransfer.items.add(new File([file],file.name,{type:file.type,}));}});element.files=dataTransfer.files;}catch(err){return false;}
return true;};var create$c=function create(_ref){var root=_ref.root;return(root.ref.fields={});};var getField=function getField(root,id){return root.ref.fields[id];};var syncFieldPositionsWithItems=function syncFieldPositionsWithItems(root){root.query('GET_ACTIVE_ITEMS').forEach(function(item){if(!root.ref.fields[item.id])return;root.element.appendChild(root.ref.fields[item.id]);});};var didReorderItems=function didReorderItems(_ref2){var root=_ref2.root;return syncFieldPositionsWithItems(root);};var didAddItem=function didAddItem(_ref3){var root=_ref3.root,action=_ref3.action;var fileItem=root.query('GET_ITEM',action.id);var isLocalFile=fileItem.origin===FileOrigin.LOCAL;var shouldUseFileInput=!isLocalFile&&root.query('SHOULD_UPDATE_FILE_INPUT');var dataContainer=createElement$1('input');dataContainer.type=shouldUseFileInput?'file':'hidden';dataContainer.name=root.query('GET_NAME');dataContainer.disabled=root.query('GET_DISABLED');root.ref.fields[action.id]=dataContainer;syncFieldPositionsWithItems(root);};var didLoadItem$1=function didLoadItem(_ref4){var root=_ref4.root,action=_ref4.action;var field=getField(root,action.id);if(!field)return;if(action.serverFileReference!==null)field.value=action.serverFileReference;if(!root.query('SHOULD_UPDATE_FILE_INPUT'))return;var fileItem=root.query('GET_ITEM',action.id);setInputFiles(field,[fileItem.file]);};var didPrepareOutput=function didPrepareOutput(_ref5){var root=_ref5.root,action=_ref5.action;if(!root.query('SHOULD_UPDATE_FILE_INPUT'))return;setTimeout(function(){var field=getField(root,action.id);if(!field)return;setInputFiles(field,[action.file]);},0);};var didSetDisabled=function didSetDisabled(_ref6){var root=_ref6.root;root.element.disabled=root.query('GET_DISABLED');};var didRemoveItem=function didRemoveItem(_ref7){var root=_ref7.root,action=_ref7.action;var field=getField(root,action.id);if(!field)return;if(field.parentNode)field.parentNode.removeChild(field);delete root.ref.fields[action.id];};var didDefineValue=function didDefineValue(_ref8){var root=_ref8.root,action=_ref8.action;var field=getField(root,action.id);if(!field)return;if(action.value===null){field.removeAttribute('value');}else{if(field.type!='file'){field.value=action.value;}}
syncFieldPositionsWithItems(root);};var write$8=createRoute({DID_SET_DISABLED:didSetDisabled,DID_ADD_ITEM:didAddItem,DID_LOAD_ITEM:didLoadItem$1,DID_REMOVE_ITEM:didRemoveItem,DID_DEFINE_VALUE:didDefineValue,DID_PREPARE_OUTPUT:didPrepareOutput,DID_REORDER_ITEMS:didReorderItems,DID_SORT_ITEMS:didReorderItems,});var data=createView({tag:'fieldset',name:'data',create:create$c,write:write$8,ignoreRect:true,});var getRootNode=function getRootNode(element){return'getRootNode'in element?element.getRootNode():document;};var images=['jpg','jpeg','png','gif','bmp','webp','svg','tiff'];var text$1=['css','csv','html','txt'];var map={zip:'zip|compressed',epub:'application/epub+zip',};var guesstimateMimeType=function guesstimateMimeType(){var extension=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';extension=extension.toLowerCase();if(images.includes(extension)){return('image/'+
(extension==='jpg'?'jpeg':extension==='svg'?'svg+xml':extension));}
if(text$1.includes(extension)){return'text/'+extension;}
return map[extension]||'';};var requestDataTransferItems=function requestDataTransferItems(dataTransfer){return new Promise(function(resolve,reject){var links=getLinks(dataTransfer);if(links.length&&!hasFiles(dataTransfer)){return resolve(links);}
getFiles(dataTransfer).then(resolve);});};var hasFiles=function hasFiles(dataTransfer){if(dataTransfer.files)return dataTransfer.files.length>0;return false;};var getFiles=function getFiles(dataTransfer){return new Promise(function(resolve,reject){var promisedFiles=(dataTransfer.items?Array.from(dataTransfer.items):[]).filter(function(item){return isFileSystemItem(item);}).map(function(item){return getFilesFromItem(item);});if(!promisedFiles.length){resolve(dataTransfer.files?Array.from(dataTransfer.files):[]);return;}
Promise.all(promisedFiles).then(function(returnedFileGroups){var files=[];returnedFileGroups.forEach(function(group){files.push.apply(files,group);});resolve(files.filter(function(file){return file;}).map(function(file){if(!file._relativePath)
file._relativePath=file.webkitRelativePath;return file;}));}).catch(console.error);});};var isFileSystemItem=function isFileSystemItem(item){if(isEntry(item)){var entry=getAsEntry(item);if(entry){return entry.isFile||entry.isDirectory;}}
return item.kind==='file';};var getFilesFromItem=function getFilesFromItem(item){return new Promise(function(resolve,reject){if(isDirectoryEntry(item)){getFilesInDirectory(getAsEntry(item)).then(resolve).catch(reject);return;}
resolve([item.getAsFile()]);});};var getFilesInDirectory=function getFilesInDirectory(entry){return new Promise(function(resolve,reject){var files=[];var dirCounter=0;var fileCounter=0;var resolveIfDone=function resolveIfDone(){if(fileCounter===0&&dirCounter===0){resolve(files);}};var readEntries=function readEntries(dirEntry){dirCounter++;var directoryReader=dirEntry.createReader();var readBatch=function readBatch(){directoryReader.readEntries(function(entries){if(entries.length===0){dirCounter--;resolveIfDone();return;}
entries.forEach(function(entry){if(entry.isDirectory){readEntries(entry);}else{fileCounter++;entry.file(function(file){var correctedFile=correctMissingFileType(file);if(entry.fullPath)
correctedFile._relativePath=entry.fullPath;files.push(correctedFile);fileCounter--;resolveIfDone();});}});readBatch();},reject);};readBatch();};readEntries(entry);});};var correctMissingFileType=function correctMissingFileType(file){if(file.type.length)return file;var date=file.lastModifiedDate;var name=file.name;var type=guesstimateMimeType(getExtensionFromFilename(file.name));if(!type.length)return file;file=file.slice(0,file.size,type);file.name=name;file.lastModifiedDate=date;return file;};var isDirectoryEntry=function isDirectoryEntry(item){return isEntry(item)&&(getAsEntry(item)||{}).isDirectory;};var isEntry=function isEntry(item){return'webkitGetAsEntry'in item;};var getAsEntry=function getAsEntry(item){return item.webkitGetAsEntry();};var getLinks=function getLinks(dataTransfer){var links=[];try{links=getLinksFromTransferMetaData(dataTransfer);if(links.length){return links;}
links=getLinksFromTransferURLData(dataTransfer);}catch(e){}
return links;};var getLinksFromTransferURLData=function getLinksFromTransferURLData(dataTransfer){var data=dataTransfer.getData('url');if(typeof data==='string'&&data.length){return[data];}
return[];};var getLinksFromTransferMetaData=function getLinksFromTransferMetaData(dataTransfer){var data=dataTransfer.getData('text/html');if(typeof data==='string'&&data.length){var matches=data.match(/src\s*=\s*"(.+?)"/);if(matches){return[matches[1]];}}
return[];};var dragNDropObservers=[];var eventPosition=function eventPosition(e){return{pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY,};};var createDragNDropClient=function createDragNDropClient(element,scopeToObserve,filterElement){var observer=getDragNDropObserver(scopeToObserve);var client={element:element,filterElement:filterElement,state:null,ondrop:function ondrop(){},onenter:function onenter(){},ondrag:function ondrag(){},onexit:function onexit(){},onload:function onload(){},allowdrop:function allowdrop(){},};client.destroy=observer.addListener(client);return client;};var getDragNDropObserver=function getDragNDropObserver(element){var observer=dragNDropObservers.find(function(item){return item.element===element;});if(observer){return observer;}
var newObserver=createDragNDropObserver(element);dragNDropObservers.push(newObserver);return newObserver;};var createDragNDropObserver=function createDragNDropObserver(element){var clients=[];var routes={dragenter:dragenter,dragover:dragover,dragleave:dragleave,drop:drop,};var handlers={};forin(routes,function(event,createHandler){handlers[event]=createHandler(element,clients);element.addEventListener(event,handlers[event],false);});var observer={element:element,addListener:function addListener(client){clients.push(client);return function(){clients.splice(clients.indexOf(client),1);if(clients.length===0){dragNDropObservers.splice(dragNDropObservers.indexOf(observer),1);forin(routes,function(event){element.removeEventListener(event,handlers[event],false);});}};},};return observer;};var elementFromPoint=function elementFromPoint(root,point){if(!('elementFromPoint'in root)){root=document;}
return root.elementFromPoint(point.x,point.y);};var isEventTarget=function isEventTarget(e,target){var root=getRootNode(target);var elementAtPosition=elementFromPoint(root,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset,});return elementAtPosition===target||target.contains(elementAtPosition);};var initialTarget=null;var setDropEffect=function setDropEffect(dataTransfer,effect){try{dataTransfer.dropEffect=effect;}catch(e){}};var dragenter=function dragenter(root,clients){return function(e){e.preventDefault();initialTarget=e.target;clients.forEach(function(client){var element=client.element,onenter=client.onenter;if(isEventTarget(e,element)){client.state='enter';onenter(eventPosition(e));}});};};var dragover=function dragover(root,clients){return function(e){e.preventDefault();var dataTransfer=e.dataTransfer;requestDataTransferItems(dataTransfer).then(function(items){var overDropTarget=false;clients.some(function(client){var filterElement=client.filterElement,element=client.element,onenter=client.onenter,onexit=client.onexit,ondrag=client.ondrag,allowdrop=client.allowdrop;setDropEffect(dataTransfer,'copy');var allowsTransfer=allowdrop(items);if(!allowsTransfer){setDropEffect(dataTransfer,'none');return;}
if(isEventTarget(e,element)){overDropTarget=true;if(client.state===null){client.state='enter';onenter(eventPosition(e));return;}
client.state='over';if(filterElement&&!allowsTransfer){setDropEffect(dataTransfer,'none');return;}
ondrag(eventPosition(e));}else{if(filterElement&&!overDropTarget){setDropEffect(dataTransfer,'none');}
if(client.state){client.state=null;onexit(eventPosition(e));}}});});};};var drop=function drop(root,clients){return function(e){e.preventDefault();var dataTransfer=e.dataTransfer;requestDataTransferItems(dataTransfer).then(function(items){clients.forEach(function(client){var filterElement=client.filterElement,element=client.element,ondrop=client.ondrop,onexit=client.onexit,allowdrop=client.allowdrop;client.state=null;if(filterElement&&!isEventTarget(e,element))return;if(!allowdrop(items))return onexit(eventPosition(e));ondrop(eventPosition(e),items);});});};};var dragleave=function dragleave(root,clients){return function(e){if(initialTarget!==e.target){return;}
clients.forEach(function(client){var onexit=client.onexit;client.state=null;onexit(eventPosition(e));});};};var createHopper=function createHopper(scope,validateItems,options){scope.classList.add('filepond--hopper');var catchesDropsOnPage=options.catchesDropsOnPage,requiresDropOnElement=options.requiresDropOnElement,_options$filterItems=options.filterItems,filterItems=_options$filterItems===void 0?function(items){return items;}:_options$filterItems;var client=createDragNDropClient(scope,catchesDropsOnPage?document.documentElement:scope,requiresDropOnElement);var lastState='';var currentState='';client.allowdrop=function(items){return validateItems(filterItems(items));};client.ondrop=function(position,items){var filteredItems=filterItems(items);if(!validateItems(filteredItems)){api.ondragend(position);return;}
currentState='drag-drop';api.onload(filteredItems,position);};client.ondrag=function(position){api.ondrag(position);};client.onenter=function(position){currentState='drag-over';api.ondragstart(position);};client.onexit=function(position){currentState='drag-exit';api.ondragend(position);};var api={updateHopperState:function updateHopperState(){if(lastState!==currentState){scope.dataset.hopperState=currentState;lastState=currentState;}},onload:function onload(){},ondragstart:function ondragstart(){},ondrag:function ondrag(){},ondragend:function ondragend(){},destroy:function destroy(){client.destroy();},};return api;};var listening=false;var listeners$1=[];var handlePaste=function handlePaste(e){var activeEl=document.activeElement;if(activeEl&&/textarea|input/i.test(activeEl.nodeName)){var inScope=false;var element=activeEl;while(element!==document.body){if(element.classList.contains('filepond--root')){inScope=true;break;}
element=element.parentNode;}
if(!inScope)return;}
requestDataTransferItems(e.clipboardData).then(function(files){if(!files.length){return;}
listeners$1.forEach(function(listener){return listener(files);});});};var listen=function listen(cb){if(listeners$1.includes(cb)){return;}
listeners$1.push(cb);if(listening){return;}
listening=true;document.addEventListener('paste',handlePaste);};var unlisten=function unlisten(listener){arrayRemove(listeners$1,listeners$1.indexOf(listener));if(listeners$1.length===0){document.removeEventListener('paste',handlePaste);listening=false;}};var createPaster=function createPaster(){var cb=function cb(files){api.onload(files);};var api={destroy:function destroy(){unlisten(cb);},onload:function onload(){},};listen(cb);return api;};var create$d=function create(_ref){var root=_ref.root,props=_ref.props;root.element.id='filepond--assistant-'+props.id;attr(root.element,'role','status');attr(root.element,'aria-live','polite');attr(root.element,'aria-relevant','additions');};var addFilesNotificationTimeout=null;var notificationClearTimeout=null;var filenames=[];var assist=function assist(root,message){root.element.textContent=message;};var clear$1=function clear(root){root.element.textContent='';};var listModified=function listModified(root,filename,label){var total=root.query('GET_TOTAL_ITEMS');assist(root,label+' '+
filename+', '+
total+' '+
(total===1?root.query('GET_LABEL_FILE_COUNT_SINGULAR'):root.query('GET_LABEL_FILE_COUNT_PLURAL')));clearTimeout(notificationClearTimeout);notificationClearTimeout=setTimeout(function(){clear$1(root);},1500);};var isUsingFilePond=function isUsingFilePond(root){return root.element.parentNode.contains(document.activeElement);};var itemAdded=function itemAdded(_ref2){var root=_ref2.root,action=_ref2.action;if(!isUsingFilePond(root)){return;}
root.element.textContent='';var item=root.query('GET_ITEM',action.id);filenames.push(item.filename);clearTimeout(addFilesNotificationTimeout);addFilesNotificationTimeout=setTimeout(function(){listModified(root,filenames.join(', '),root.query('GET_LABEL_FILE_ADDED'));filenames.length=0;},750);};var itemRemoved=function itemRemoved(_ref3){var root=_ref3.root,action=_ref3.action;if(!isUsingFilePond(root)){return;}
var item=action.item;listModified(root,item.filename,root.query('GET_LABEL_FILE_REMOVED'));};var itemProcessed=function itemProcessed(_ref4){var root=_ref4.root,action=_ref4.action;var item=root.query('GET_ITEM',action.id);var filename=item.filename;var label=root.query('GET_LABEL_FILE_PROCESSING_COMPLETE');assist(root,filename+' '+label);};var itemProcessedUndo=function itemProcessedUndo(_ref5){var root=_ref5.root,action=_ref5.action;var item=root.query('GET_ITEM',action.id);var filename=item.filename;var label=root.query('GET_LABEL_FILE_PROCESSING_ABORTED');assist(root,filename+' '+label);};var itemError=function itemError(_ref6){var root=_ref6.root,action=_ref6.action;var item=root.query('GET_ITEM',action.id);var filename=item.filename;assist(root,action.status.main+' '+filename+' '+action.status.sub);};var assistant=createView({create:create$d,ignoreRect:true,ignoreRectUpdate:true,write:createRoute({DID_LOAD_ITEM:itemAdded,DID_REMOVE_ITEM:itemRemoved,DID_COMPLETE_ITEM_PROCESSING:itemProcessed,DID_ABORT_ITEM_PROCESSING:itemProcessedUndo,DID_REVERT_ITEM_PROCESSING:itemProcessedUndo,DID_THROW_ITEM_REMOVE_ERROR:itemError,DID_THROW_ITEM_LOAD_ERROR:itemError,DID_THROW_ITEM_INVALID:itemError,DID_THROW_ITEM_PROCESSING_ERROR:itemError,}),tag:'span',name:'assistant',});var toCamels=function toCamels(string){var separator=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'-';return string.replace(new RegExp(separator+'.','g'),function(sub){return sub.charAt(1).toUpperCase();});};var debounce=function debounce(func){var interval=arguments.length>1&&arguments[1]!==undefined?arguments[1]:16;var immidiateOnly=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var last=Date.now();var timeout=null;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
clearTimeout(timeout);var dist=Date.now()-last;var fn=function fn(){last=Date.now();func.apply(void 0,args);};if(dist<interval){if(!immidiateOnly){timeout=setTimeout(fn,interval-dist);}}else{fn();}};};var MAX_FILES_LIMIT=1000000;var prevent=function prevent(e){return e.preventDefault();};var create$e=function create(_ref){var root=_ref.root,props=_ref.props;var id=root.query('GET_ID');if(id){root.element.id=id;}
var className=root.query('GET_CLASS_NAME');if(className){className.split(' ').filter(function(name){return name.length;}).forEach(function(name){root.element.classList.add(name);});}
root.ref.label=root.appendChildView(root.createChildView(dropLabel,Object.assign({},props,{translateY:null,caption:root.query('GET_LABEL_IDLE'),})));root.ref.list=root.appendChildView(root.createChildView(listScroller,{translateY:null}));root.ref.panel=root.appendChildView(root.createChildView(panel,{name:'panel-root'}));root.ref.assistant=root.appendChildView(root.createChildView(assistant,Object.assign({},props)));root.ref.data=root.appendChildView(root.createChildView(data,Object.assign({},props)));root.ref.measure=createElement$1('div');root.ref.measure.style.height='100%';root.element.appendChild(root.ref.measure);root.ref.bounds=null;root.query('GET_STYLES').filter(function(style){return!isEmpty(style.value);}).map(function(_ref2){var name=_ref2.name,value=_ref2.value;root.element.dataset[name]=value;});root.ref.widthPrevious=null;root.ref.widthUpdated=debounce(function(){root.ref.updateHistory=[];root.dispatch('DID_RESIZE_ROOT');},250);root.ref.previousAspectRatio=null;root.ref.updateHistory=[];var canHover=window.matchMedia('(pointer: fine) and (hover: hover)').matches;var hasPointerEvents='PointerEvent'in window;if(root.query('GET_ALLOW_REORDER')&&hasPointerEvents&&!canHover){root.element.addEventListener('touchmove',prevent,{passive:false});root.element.addEventListener('gesturestart',prevent);}
var credits=root.query('GET_CREDITS');var hasCredits=credits.length===2;if(hasCredits){var frag=document.createElement('a');frag.className='filepond--credits';frag.setAttribute('aria-hidden','true');frag.href=credits[0];frag.tabindex=-1;frag.target='_blank';frag.rel='noopener noreferrer';frag.textContent=credits[1];root.element.appendChild(frag);root.ref.credits=frag;}};var write$9=function write(_ref3){var root=_ref3.root,props=_ref3.props,actions=_ref3.actions;route$5({root:root,props:props,actions:actions});actions.filter(function(action){return/^DID_SET_STYLE_/.test(action.type);}).filter(function(action){return!isEmpty(action.data.value);}).map(function(_ref4){var type=_ref4.type,data=_ref4.data;var name=toCamels(type.substring(8).toLowerCase(),'_');root.element.dataset[name]=data.value;root.invalidateLayout();});if(root.rect.element.hidden)return;if(root.rect.element.width!==root.ref.widthPrevious){root.ref.widthPrevious=root.rect.element.width;root.ref.widthUpdated();}
var bounds=root.ref.bounds;if(!bounds){bounds=root.ref.bounds=calculateRootBoundingBoxHeight(root);root.element.removeChild(root.ref.measure);root.ref.measure=null;}
var _root$ref=root.ref,hopper=_root$ref.hopper,label=_root$ref.label,list=_root$ref.list,panel=_root$ref.panel;if(hopper){hopper.updateHopperState();}
var aspectRatio=root.query('GET_PANEL_ASPECT_RATIO');var isMultiItem=root.query('GET_ALLOW_MULTIPLE');var totalItems=root.query('GET_TOTAL_ITEMS');var maxItems=isMultiItem?root.query('GET_MAX_FILES')||MAX_FILES_LIMIT:1;var atMaxCapacity=totalItems===maxItems;var addAction=actions.find(function(action){return action.type==='DID_ADD_ITEM';});if(atMaxCapacity&&addAction){var interactionMethod=addAction.data.interactionMethod;label.opacity=0;if(isMultiItem){label.translateY=-40;}else{if(interactionMethod===InteractionMethod.API){label.translateX=40;}else if(interactionMethod===InteractionMethod.BROWSE){label.translateY=40;}else{label.translateY=30;}}}else if(!atMaxCapacity){label.opacity=1;label.translateX=0;label.translateY=0;}
var listItemMargin=calculateListItemMargin(root);var listHeight=calculateListHeight(root);var labelHeight=label.rect.element.height;var currentLabelHeight=!isMultiItem||atMaxCapacity?0:labelHeight;var listMarginTop=atMaxCapacity?list.rect.element.marginTop:0;var listMarginBottom=totalItems===0?0:list.rect.element.marginBottom;var visualHeight=currentLabelHeight+listMarginTop+listHeight.visual+listMarginBottom;var boundsHeight=currentLabelHeight+listMarginTop+listHeight.bounds+listMarginBottom;list.translateY=Math.max(0,currentLabelHeight-list.rect.element.marginTop)-listItemMargin.top;if(aspectRatio){var width=root.rect.element.width;var height=width*aspectRatio;if(aspectRatio!==root.ref.previousAspectRatio){root.ref.previousAspectRatio=aspectRatio;root.ref.updateHistory=[];}
var history=root.ref.updateHistory;history.push(width);var MAX_BOUNCES=2;if(history.length>MAX_BOUNCES*2){var l=history.length;var bottom=l-10;var bounces=0;for(var i=l;i>=bottom;i--){if(history[i]===history[i-2]){bounces++;}
if(bounces>=MAX_BOUNCES){return;}}}
panel.scalable=false;panel.height=height;var listAvailableHeight=height-
currentLabelHeight-
(listMarginBottom-listItemMargin.bottom)-
(atMaxCapacity?listMarginTop:0);if(listHeight.visual>listAvailableHeight){list.overflow=listAvailableHeight;}else{list.overflow=null;}
root.height=height;}else if(bounds.fixedHeight){panel.scalable=false;var _listAvailableHeight=bounds.fixedHeight-
currentLabelHeight-
(listMarginBottom-listItemMargin.bottom)-
(atMaxCapacity?listMarginTop:0);if(listHeight.visual>_listAvailableHeight){list.overflow=_listAvailableHeight;}else{list.overflow=null;}}else if(bounds.cappedHeight){var isCappedHeight=visualHeight>=bounds.cappedHeight;var panelHeight=Math.min(bounds.cappedHeight,visualHeight);panel.scalable=true;panel.height=isCappedHeight?panelHeight:panelHeight-listItemMargin.top-listItemMargin.bottom;var _listAvailableHeight2=panelHeight-
currentLabelHeight-
(listMarginBottom-listItemMargin.bottom)-
(atMaxCapacity?listMarginTop:0);if(visualHeight>bounds.cappedHeight&&listHeight.visual>_listAvailableHeight2){list.overflow=_listAvailableHeight2;}else{list.overflow=null;}
root.height=Math.min(bounds.cappedHeight,boundsHeight-listItemMargin.top-listItemMargin.bottom);}else{var itemMargin=totalItems>0?listItemMargin.top+listItemMargin.bottom:0;panel.scalable=true;panel.height=Math.max(labelHeight,visualHeight-itemMargin);root.height=Math.max(labelHeight,boundsHeight-itemMargin);}
if(root.ref.credits&&panel.heightCurrent)
root.ref.credits.style.transform='translateY('+panel.heightCurrent+'px)';};var calculateListItemMargin=function calculateListItemMargin(root){var item=root.ref.list.childViews[0].childViews[0];return item?{top:item.rect.element.marginTop,bottom:item.rect.element.marginBottom,}:{top:0,bottom:0,};};var calculateListHeight=function calculateListHeight(root){var visual=0;var bounds=0;var scrollList=root.ref.list;var itemList=scrollList.childViews[0];var visibleChildren=itemList.childViews.filter(function(child){return child.rect.element.height;});var children=root.query('GET_ACTIVE_ITEMS').map(function(item){return visibleChildren.find(function(child){return child.id===item.id;});}).filter(function(item){return item;});if(children.length===0)return{visual:visual,bounds:bounds};var horizontalSpace=itemList.rect.element.width;var dragIndex=getItemIndexByPosition(itemList,children,scrollList.dragCoordinates);var childRect=children[0].rect.element;var itemVerticalMargin=childRect.marginTop+childRect.marginBottom;var itemHorizontalMargin=childRect.marginLeft+childRect.marginRight;var itemWidth=childRect.width+itemHorizontalMargin;var itemHeight=childRect.height+itemVerticalMargin;var newItem=typeof dragIndex!=='undefined'&&dragIndex>=0?1:0;var removedItem=children.find(function(child){return child.markedForRemoval&&child.opacity<0.45;})?-1:0;var verticalItemCount=children.length+newItem+removedItem;var itemsPerRow=getItemsPerRow(horizontalSpace,itemWidth);if(itemsPerRow===1){children.forEach(function(item){var height=item.rect.element.height+itemVerticalMargin;bounds+=height;visual+=height*item.opacity;});}
else{bounds=Math.ceil(verticalItemCount/itemsPerRow)*itemHeight;visual=bounds;}
return{visual:visual,bounds:bounds};};var calculateRootBoundingBoxHeight=function calculateRootBoundingBoxHeight(root){var height=root.ref.measureHeight||null;var cappedHeight=parseInt(root.style.maxHeight,10)||null;var fixedHeight=height===0?null:height;return{cappedHeight:cappedHeight,fixedHeight:fixedHeight,};};var exceedsMaxFiles=function exceedsMaxFiles(root,items){var allowReplace=root.query('GET_ALLOW_REPLACE');var allowMultiple=root.query('GET_ALLOW_MULTIPLE');var totalItems=root.query('GET_TOTAL_ITEMS');var maxItems=root.query('GET_MAX_FILES');var totalBrowseItems=items.length;if(!allowMultiple&&totalBrowseItems>1){root.dispatch('DID_THROW_MAX_FILES',{source:items,error:createResponse('warning',0,'Max files'),});return true;}
maxItems=allowMultiple?maxItems:1;if(!allowMultiple&&allowReplace){return false;}
var hasMaxItems=isInt(maxItems);if(hasMaxItems&&totalItems+totalBrowseItems>maxItems){root.dispatch('DID_THROW_MAX_FILES',{source:items,error:createResponse('warning',0,'Max files'),});return true;}
return false;};var getDragIndex=function getDragIndex(list,children,position){var itemList=list.childViews[0];return getItemIndexByPosition(itemList,children,{left:position.scopeLeft-itemList.rect.element.left,top:position.scopeTop-
(list.rect.outer.top+list.rect.element.marginTop+list.rect.element.scrollTop),});};var toggleDrop=function toggleDrop(root){var isAllowed=root.query('GET_ALLOW_DROP');var isDisabled=root.query('GET_DISABLED');var enabled=isAllowed&&!isDisabled;if(enabled&&!root.ref.hopper){var hopper=createHopper(root.element,function(items){var beforeDropFile=root.query('GET_BEFORE_DROP_FILE')||function(){return true;};var dropValidation=root.query('GET_DROP_VALIDATION');return dropValidation?items.every(function(item){return(applyFilters('ALLOW_HOPPER_ITEM',item,{query:root.query,}).every(function(result){return result===true;})&&beforeDropFile(item));}):true;},{filterItems:function filterItems(items){var ignoredFiles=root.query('GET_IGNORED_FILES');return items.filter(function(item){if(isFile(item)){return!ignoredFiles.includes(item.name.toLowerCase());}
return true;});},catchesDropsOnPage:root.query('GET_DROP_ON_PAGE'),requiresDropOnElement:root.query('GET_DROP_ON_ELEMENT'),});hopper.onload=function(items,position){var list=root.ref.list.childViews[0];var visibleChildren=list.childViews.filter(function(child){return child.rect.element.height;});var children=root.query('GET_ACTIVE_ITEMS').map(function(item){return visibleChildren.find(function(child){return child.id===item.id;});}).filter(function(item){return item;});applyFilterChain('ADD_ITEMS',items,{dispatch:root.dispatch}).then(function(queue){if(exceedsMaxFiles(root,queue))return false;root.dispatch('ADD_ITEMS',{items:queue,index:getDragIndex(root.ref.list,children,position),interactionMethod:InteractionMethod.DROP,});});root.dispatch('DID_DROP',{position:position});root.dispatch('DID_END_DRAG',{position:position});};hopper.ondragstart=function(position){root.dispatch('DID_START_DRAG',{position:position});};hopper.ondrag=debounce(function(position){root.dispatch('DID_DRAG',{position:position});});hopper.ondragend=function(position){root.dispatch('DID_END_DRAG',{position:position});};root.ref.hopper=hopper;root.ref.drip=root.appendChildView(root.createChildView(drip));}else if(!enabled&&root.ref.hopper){root.ref.hopper.destroy();root.ref.hopper=null;root.removeChildView(root.ref.drip);}};var toggleBrowse=function toggleBrowse(root,props){var isAllowed=root.query('GET_ALLOW_BROWSE');var isDisabled=root.query('GET_DISABLED');var enabled=isAllowed&&!isDisabled;if(enabled&&!root.ref.browser){root.ref.browser=root.appendChildView(root.createChildView(browser,Object.assign({},props,{onload:function onload(items){applyFilterChain('ADD_ITEMS',items,{dispatch:root.dispatch,}).then(function(queue){if(exceedsMaxFiles(root,queue))return false;root.dispatch('ADD_ITEMS',{items:queue,index:-1,interactionMethod:InteractionMethod.BROWSE,});});},})),0);}else if(!enabled&&root.ref.browser){root.removeChildView(root.ref.browser);root.ref.browser=null;}};var togglePaste=function togglePaste(root){var isAllowed=root.query('GET_ALLOW_PASTE');var isDisabled=root.query('GET_DISABLED');var enabled=isAllowed&&!isDisabled;if(enabled&&!root.ref.paster){root.ref.paster=createPaster();root.ref.paster.onload=function(items){applyFilterChain('ADD_ITEMS',items,{dispatch:root.dispatch}).then(function(queue){if(exceedsMaxFiles(root,queue))return false;root.dispatch('ADD_ITEMS',{items:queue,index:-1,interactionMethod:InteractionMethod.PASTE,});});};}else if(!enabled&&root.ref.paster){root.ref.paster.destroy();root.ref.paster=null;}};var route$5=createRoute({DID_SET_ALLOW_BROWSE:function DID_SET_ALLOW_BROWSE(_ref5){var root=_ref5.root,props=_ref5.props;toggleBrowse(root,props);},DID_SET_ALLOW_DROP:function DID_SET_ALLOW_DROP(_ref6){var root=_ref6.root;toggleDrop(root);},DID_SET_ALLOW_PASTE:function DID_SET_ALLOW_PASTE(_ref7){var root=_ref7.root;togglePaste(root);},DID_SET_DISABLED:function DID_SET_DISABLED(_ref8){var root=_ref8.root,props=_ref8.props;toggleDrop(root);togglePaste(root);toggleBrowse(root,props);var isDisabled=root.query('GET_DISABLED');if(isDisabled){root.element.dataset.disabled='disabled';}else{root.element.removeAttribute('data-disabled');}},});var root=createView({name:'root',read:function read(_ref9){var root=_ref9.root;if(root.ref.measure){root.ref.measureHeight=root.ref.measure.offsetHeight;}},create:create$e,write:write$9,destroy:function destroy(_ref10){var root=_ref10.root;if(root.ref.paster){root.ref.paster.destroy();}
if(root.ref.hopper){root.ref.hopper.destroy();}
root.element.removeEventListener('touchmove',prevent);root.element.removeEventListener('gesturestart',prevent);},mixins:{styles:['height'],},});var createApp=function createApp(){var initialOptions=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var originalElement=null;var defaultOptions=getOptions();var store=createStore(createInitialState(defaultOptions),[queries,createOptionQueries(defaultOptions)],[actions,createOptionActions(defaultOptions)]);store.dispatch('SET_OPTIONS',{options:initialOptions});var visibilityHandler=function visibilityHandler(){if(document.hidden)return;store.dispatch('KICK');};document.addEventListener('visibilitychange',visibilityHandler);var resizeDoneTimer=null;var isResizing=false;var isResizingHorizontally=false;var initialWindowWidth=null;var currentWindowWidth=null;var resizeHandler=function resizeHandler(){if(!isResizing){isResizing=true;}
clearTimeout(resizeDoneTimer);resizeDoneTimer=setTimeout(function(){isResizing=false;initialWindowWidth=null;currentWindowWidth=null;if(isResizingHorizontally){isResizingHorizontally=false;store.dispatch('DID_STOP_RESIZE');}},500);};window.addEventListener('resize',resizeHandler);var view=root(store,{id:getUniqueId()});var isResting=false;var isHidden=false;var readWriteApi={_read:function _read(){if(isResizing){currentWindowWidth=window.innerWidth;if(!initialWindowWidth){initialWindowWidth=currentWindowWidth;}
if(!isResizingHorizontally&&currentWindowWidth!==initialWindowWidth){store.dispatch('DID_START_RESIZE');isResizingHorizontally=true;}}
if(isHidden&&isResting){isResting=view.element.offsetParent===null;}
if(isResting)return;view._read();isHidden=view.rect.element.hidden;},_write:function _write(ts){var actions=store.processActionQueue().filter(function(action){return!/^SET_/.test(action.type);});if(isResting&&!actions.length)return;routeActionsToEvents(actions);isResting=view._write(ts,actions,isResizingHorizontally);removeReleasedItems(store.query('GET_ITEMS'));if(isResting){store.processDispatchQueue();}},};var createEvent=function createEvent(name){return function(data){var event={type:name,};if(!data){return event;}
if(data.hasOwnProperty('error')){event.error=data.error?Object.assign({},data.error):null;}
if(data.status){event.status=Object.assign({},data.status);}
if(data.file){event.output=data.file;}
if(data.source){event.file=data.source;}else if(data.item||data.id){var item=data.item?data.item:store.query('GET_ITEM',data.id);event.file=item?createItemAPI(item):null;}
if(data.items){event.items=data.items.map(createItemAPI);}
if(/progress/.test(name)){event.progress=data.progress;}
if(data.hasOwnProperty('origin')&&data.hasOwnProperty('target')){event.origin=data.origin;event.target=data.target;}
return event;};};var eventRoutes={DID_DESTROY:createEvent('destroy'),DID_INIT:createEvent('init'),DID_THROW_MAX_FILES:createEvent('warning'),DID_INIT_ITEM:createEvent('initfile'),DID_START_ITEM_LOAD:createEvent('addfilestart'),DID_UPDATE_ITEM_LOAD_PROGRESS:createEvent('addfileprogress'),DID_LOAD_ITEM:createEvent('addfile'),DID_THROW_ITEM_INVALID:[createEvent('error'),createEvent('addfile')],DID_THROW_ITEM_LOAD_ERROR:[createEvent('error'),createEvent('addfile')],DID_THROW_ITEM_REMOVE_ERROR:[createEvent('error'),createEvent('removefile')],DID_PREPARE_OUTPUT:createEvent('preparefile'),DID_START_ITEM_PROCESSING:createEvent('processfilestart'),DID_UPDATE_ITEM_PROCESS_PROGRESS:createEvent('processfileprogress'),DID_ABORT_ITEM_PROCESSING:createEvent('processfileabort'),DID_COMPLETE_ITEM_PROCESSING:createEvent('processfile'),DID_COMPLETE_ITEM_PROCESSING_ALL:createEvent('processfiles'),DID_REVERT_ITEM_PROCESSING:createEvent('processfilerevert'),DID_THROW_ITEM_PROCESSING_ERROR:[createEvent('error'),createEvent('processfile')],DID_REMOVE_ITEM:createEvent('removefile'),DID_UPDATE_ITEMS:createEvent('updatefiles'),DID_ACTIVATE_ITEM:createEvent('activatefile'),DID_REORDER_ITEMS:createEvent('reorderfiles'),};var exposeEvent=function exposeEvent(event){var detail=Object.assign({pond:exports},event);delete detail.type;view.element.dispatchEvent(new CustomEvent('FilePond:'+event.type,{detail:detail,bubbles:true,cancelable:true,composed:true,}));var params=[];if(event.hasOwnProperty('error')){params.push(event.error);}
if(event.hasOwnProperty('file')){params.push(event.file);}
var filtered=['type','error','file'];Object.keys(event).filter(function(key){return!filtered.includes(key);}).forEach(function(key){return params.push(event[key]);});exports.fire.apply(exports,[event.type].concat(params));var handler=store.query('GET_ON'+event.type.toUpperCase());if(handler){handler.apply(void 0,params);}};var routeActionsToEvents=function routeActionsToEvents(actions){if(!actions.length)return;actions.filter(function(action){return eventRoutes[action.type];}).forEach(function(action){var routes=eventRoutes[action.type];(Array.isArray(routes)?routes:[routes]).forEach(function(route){if(action.type==='DID_INIT_ITEM'){exposeEvent(route(action.data));}else{setTimeout(function(){exposeEvent(route(action.data));},0);}});});};var setOptions=function setOptions(options){return store.dispatch('SET_OPTIONS',{options:options});};var getFile=function getFile(query){return store.query('GET_ACTIVE_ITEM',query);};var prepareFile=function prepareFile(query){return new Promise(function(resolve,reject){store.dispatch('REQUEST_ITEM_PREPARE',{query:query,success:function success(item){resolve(item);},failure:function failure(error){reject(error);},});});};var addFile=function addFile(source){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new Promise(function(resolve,reject){addFiles([{source:source,options:options}],{index:options.index}).then(function(items){return resolve(items&&items[0]);}).catch(reject);});};var isFilePondFile=function isFilePondFile(obj){return obj.file&&obj.id;};var removeFile=function removeFile(query,options){if(typeof query==='object'&&!isFilePondFile(query)&&!options){options=query;query=undefined;}
store.dispatch('REMOVE_ITEM',Object.assign({},options,{query:query}));return store.query('GET_ACTIVE_ITEM',query)===null;};var addFiles=function addFiles(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
return new Promise(function(resolve,reject){var sources=[];var options={};if(isArray(args[0])){sources.push.apply(sources,args[0]);Object.assign(options,args[1]||{});}else{var lastArgument=args[args.length-1];if(typeof lastArgument==='object'&&!(lastArgument instanceof Blob)){Object.assign(options,args.pop());}
sources.push.apply(sources,args);}
store.dispatch('ADD_ITEMS',{items:sources,index:options.index,interactionMethod:InteractionMethod.API,success:resolve,failure:reject,});});};var getFiles=function getFiles(){return store.query('GET_ACTIVE_ITEMS');};var processFile=function processFile(query){return new Promise(function(resolve,reject){store.dispatch('REQUEST_ITEM_PROCESSING',{query:query,success:function success(item){resolve(item);},failure:function failure(error){reject(error);},});});};var prepareFiles=function prepareFiles(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}
var queries=Array.isArray(args[0])?args[0]:args;var items=queries.length?queries:getFiles();return Promise.all(items.map(prepareFile));};var processFiles=function processFiles(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}
var queries=Array.isArray(args[0])?args[0]:args;if(!queries.length){var files=getFiles().filter(function(item){return(!(item.status===ItemStatus.IDLE&&item.origin===FileOrigin.LOCAL)&&item.status!==ItemStatus.PROCESSING&&item.status!==ItemStatus.PROCESSING_COMPLETE&&item.status!==ItemStatus.PROCESSING_REVERT_ERROR);});return Promise.all(files.map(processFile));}
return Promise.all(queries.map(processFile));};var removeFiles=function removeFiles(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}
var queries=Array.isArray(args[0])?args[0]:args;var options;if(typeof queries[queries.length-1]==='object'){options=queries.pop();}else if(Array.isArray(args[0])){options=args[1];}
var files=getFiles();if(!queries.length)
return Promise.all(files.map(function(file){return removeFile(file,options);}));var mappedQueries=queries.map(function(query){return isNumber(query)?(files[query]?files[query].id:null):query;}).filter(function(query){return query;});return mappedQueries.map(function(q){return removeFile(q,options);});};var exports=Object.assign({},on(),{},readWriteApi,{},createOptionAPI(store,defaultOptions),{setOptions:setOptions,addFile:addFile,addFiles:addFiles,getFile:getFile,processFile:processFile,prepareFile:prepareFile,removeFile:removeFile,moveFile:function moveFile(query,index){return store.dispatch('MOVE_ITEM',{query:query,index:index});},getFiles:getFiles,processFiles:processFiles,removeFiles:removeFiles,prepareFiles:prepareFiles,sort:function sort(compare){return store.dispatch('SORT',{compare:compare});},browse:function browse(){var input=view.element.querySelector('input[type=file]');if(input){input.click();}},destroy:function destroy(){exports.fire('destroy',view.element);store.dispatch('ABORT_ALL');view._destroy();window.removeEventListener('resize',resizeHandler);document.removeEventListener('visibilitychange',visibilityHandler);store.dispatch('DID_DESTROY');},insertBefore:function insertBefore$1(element){return insertBefore(view.element,element);},insertAfter:function insertAfter$1(element){return insertAfter(view.element,element);},appendTo:function appendTo(element){return element.appendChild(view.element);},replaceElement:function replaceElement(element){insertBefore(view.element,element);element.parentNode.removeChild(element);originalElement=element;},restoreElement:function restoreElement(){if(!originalElement){return;}
insertAfter(originalElement,view.element);view.element.parentNode.removeChild(view.element);originalElement=null;},isAttachedTo:function isAttachedTo(element){return view.element===element||originalElement===element;},element:{get:function get(){return view.element;},},status:{get:function get(){return store.query('GET_STATUS');},},});store.dispatch('DID_INIT');return createObject(exports);};var createAppObject=function createAppObject(){var customOptions=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var defaultOptions={};forin(getOptions(),function(key,value){defaultOptions[key]=value[0];});var app=createApp(Object.assign({},defaultOptions,{},customOptions));return app;};var lowerCaseFirstLetter=function lowerCaseFirstLetter(string){return string.charAt(0).toLowerCase()+string.slice(1);};var attributeNameToPropertyName=function attributeNameToPropertyName(attributeName){return toCamels(attributeName.replace(/^data-/,''));};var mapObject=function mapObject(object,propertyMap){forin(propertyMap,function(selector,mapping){forin(object,function(property,value){var selectorRegExp=new RegExp(selector);var matches=selectorRegExp.test(property);if(!matches){return;}
delete object[property];if(mapping===false){return;}
if(isString(mapping)){object[mapping]=value;return;}
var group=mapping.group;if(isObject(mapping)&&!object[group]){object[group]={};}
object[group][lowerCaseFirstLetter(property.replace(selectorRegExp,''))]=value;});if(mapping.mapping){mapObject(object[mapping.group],mapping.mapping);}});};var getAttributesAsObject=function getAttributesAsObject(node){var attributeMapping=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var attributes=[];forin(node.attributes,function(index){attributes.push(node.attributes[index]);});var output=attributes.filter(function(attribute){return attribute.name;}).reduce(function(obj,attribute){var value=attr(node,attribute.name);obj[attributeNameToPropertyName(attribute.name)]=value===attribute.name?true:value;return obj;},{});mapObject(output,attributeMapping);return output;};var createAppAtElement=function createAppAtElement(element){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var attributeMapping={'^class$':'className','^multiple$':'allowMultiple','^capture$':'captureMethod','^webkitdirectory$':'allowDirectoriesOnly','^server':{group:'server',mapping:{'^process':{group:'process',},'^revert':{group:'revert',},'^fetch':{group:'fetch',},'^restore':{group:'restore',},'^load':{group:'load',},},},'^type$':false,'^files$':false,};applyFilters('SET_ATTRIBUTE_TO_OPTION_MAP',attributeMapping);var mergedOptions=Object.assign({},options);var attributeOptions=getAttributesAsObject(element.nodeName==='FIELDSET'?element.querySelector('input[type=file]'):element,attributeMapping);Object.keys(attributeOptions).forEach(function(key){if(isObject(attributeOptions[key])){if(!isObject(mergedOptions[key])){mergedOptions[key]={};}
Object.assign(mergedOptions[key],attributeOptions[key]);}else{mergedOptions[key]=attributeOptions[key];}});mergedOptions.files=(options.files||[]).concat(Array.from(element.querySelectorAll('input:not([type=file])')).map(function(input){return{source:input.value,options:{type:input.dataset.type,},};}));var app=createAppObject(mergedOptions);if(element.files){Array.from(element.files).forEach(function(file){app.addFile(file);});}
app.replaceElement(element);return app;};var createApp$1=function createApp(){return isNode(arguments.length<=0?undefined:arguments[0])?createAppAtElement.apply(void 0,arguments):createAppObject.apply(void 0,arguments);};var PRIVATE_METHODS=['fire','_read','_write'];var createAppAPI=function createAppAPI(app){var api={};copyObjectPropertiesToObject(app,api,PRIVATE_METHODS);return api;};var replaceInString=function replaceInString(string,replacements){return string.replace(/(?:{([a-zA-Z]+)})/g,function(match,group){return replacements[group];});};var createWorker=function createWorker(fn){var workerBlob=new Blob(['(',fn.toString(),')()'],{type:'application/javascript',});var workerURL=URL.createObjectURL(workerBlob);var worker=new Worker(workerURL);return{transfer:function transfer(message,cb){},post:function post(message,cb,transferList){var id=getUniqueId();worker.onmessage=function(e){if(e.data.id===id){cb(e.data.message);}};worker.postMessage({id:id,message:message,},transferList);},terminate:function terminate(){worker.terminate();URL.revokeObjectURL(workerURL);},};};var loadImage=function loadImage(url){return new Promise(function(resolve,reject){var img=new Image();img.onload=function(){resolve(img);};img.onerror=function(e){reject(e);};img.src=url;});};var renameFile=function renameFile(file,name){var renamedFile=file.slice(0,file.size,file.type);renamedFile.lastModifiedDate=file.lastModifiedDate;renamedFile.name=name;return renamedFile;};var copyFile=function copyFile(file){return renameFile(file,file.name);};var registeredPlugins=[];var createAppPlugin=function createAppPlugin(plugin){if(registeredPlugins.includes(plugin)){return;}
registeredPlugins.push(plugin);var pluginOutline=plugin({addFilter:addFilter,utils:{Type:Type,forin:forin,isString:isString,isFile:isFile,toNaturalFileSize:toNaturalFileSize,replaceInString:replaceInString,getExtensionFromFilename:getExtensionFromFilename,getFilenameWithoutExtension:getFilenameWithoutExtension,guesstimateMimeType:guesstimateMimeType,getFileFromBlob:getFileFromBlob,getFilenameFromURL:getFilenameFromURL,createRoute:createRoute,createWorker:createWorker,createView:createView,createItemAPI:createItemAPI,loadImage:loadImage,copyFile:copyFile,renameFile:renameFile,createBlob:createBlob,applyFilterChain:applyFilterChain,text:text,getNumericAspectRatioFromString:getNumericAspectRatioFromString,},views:{fileActionButton:fileActionButton,},});extendDefaultOptions(pluginOutline.options);};var isOperaMini=function isOperaMini(){return Object.prototype.toString.call(window.operamini)==='[object OperaMini]';};var hasPromises=function hasPromises(){return'Promise'in window;};var hasBlobSlice=function hasBlobSlice(){return'slice'in Blob.prototype;};var hasCreateObjectURL=function hasCreateObjectURL(){return'URL'in window&&'createObjectURL'in window.URL;};var hasVisibility=function hasVisibility(){return'visibilityState'in document;};var hasTiming=function hasTiming(){return'performance'in window;};var hasCSSSupports=function hasCSSSupports(){return'supports'in(window.CSS||{});};var isIE11=function isIE11(){return/MSIE|Trident/.test(window.navigator.userAgent);};var supported=(function(){var isSupported=isBrowser()&&!isOperaMini()&&hasVisibility()&&hasPromises()&&hasBlobSlice()&&hasCreateObjectURL()&&hasTiming()&&(hasCSSSupports()||isIE11());return function(){return isSupported;};})();var state={apps:[],};var name='filepond';var fn=function fn(){};exports.Status={};exports.FileStatus={};exports.FileOrigin={};exports.OptionTypes={};exports.create=fn;exports.destroy=fn;exports.parse=fn;exports.find=fn;exports.registerPlugin=fn;exports.getOptions=fn;exports.setOptions=fn;if(supported()){createPainter(function(){state.apps.forEach(function(app){return app._read();});},function(ts){state.apps.forEach(function(app){return app._write(ts);});});var dispatch=function dispatch(){document.dispatchEvent(new CustomEvent('FilePond:loaded',{detail:{supported:supported,create:exports.create,destroy:exports.destroy,parse:exports.parse,find:exports.find,registerPlugin:exports.registerPlugin,setOptions:exports.setOptions,},}));document.removeEventListener('DOMContentLoaded',dispatch);};if(document.readyState!=='loading'){setTimeout(function(){return dispatch();},0);}else{document.addEventListener('DOMContentLoaded',dispatch);}
var updateOptionTypes=function updateOptionTypes(){return forin(getOptions(),function(key,value){exports.OptionTypes[key]=value[1];});};exports.Status=Object.assign({},Status);exports.FileOrigin=Object.assign({},FileOrigin);exports.FileStatus=Object.assign({},ItemStatus);exports.OptionTypes={};updateOptionTypes();exports.create=function create(){var app=createApp$1.apply(void 0,arguments);app.on('destroy',exports.destroy);state.apps.push(app);return createAppAPI(app);};exports.destroy=function destroy(hook){var indexToRemove=state.apps.findIndex(function(app){return app.isAttachedTo(hook);});if(indexToRemove>=0){var app=state.apps.splice(indexToRemove,1)[0];app.restoreElement();return true;}
return false;};exports.parse=function parse(context){var matchedHooks=Array.from(context.querySelectorAll('.'+name));var newHooks=matchedHooks.filter(function(newHook){return!state.apps.find(function(app){return app.isAttachedTo(newHook);});});return newHooks.map(function(hook){return exports.create(hook);});};exports.find=function find(hook){var app=state.apps.find(function(app){return app.isAttachedTo(hook);});if(!app){return null;}
return createAppAPI(app);};exports.registerPlugin=function registerPlugin(){for(var _len=arguments.length,plugins=new Array(_len),_key=0;_key<_len;_key++){plugins[_key]=arguments[_key];}
plugins.forEach(createAppPlugin);updateOptionTypes();};exports.getOptions=function getOptions$1(){var opts={};forin(getOptions(),function(key,value){opts[key]=value[0];});return opts;};exports.setOptions=function setOptions$1(opts){if(isObject(opts)){state.apps.forEach(function(app){app.setOptions(opts);});setOptions(opts);}
return exports.getOptions();};}
exports.supported=supported;Object.defineProperty(exports,'__esModule',{value:true});});;(function($,FilePond){'use strict';if(!$||!FilePond){return;}
if(!FilePond.supported()){$.fn.filepond=function(){};return;}
function argsToArray(args){return Array.prototype.slice.call(args);}
function isFactory(args){return!args.length||typeof args[0]==='object';}
function isGetter(obj,key){var descriptor=Object.getOwnPropertyDescriptor(obj,key);return descriptor?typeof descriptor.get!=='undefined':false;}
function isSetter(obj,key){var descriptor=Object.getOwnPropertyDescriptor(obj,key);return descriptor?typeof descriptor.set!=='undefined':false;}
function isMethod(obj,key){return typeof obj[key]==='function';}
$.fn.filepond=function(){var args=argsToArray(arguments);var results=[];var items=this.each(function(){if(isFactory(args)){FilePond.create(this,args[0])
return;}
var pond=FilePond.find(this);if(!pond){return;}
var key=args[0];var params=args.concat().slice(1);if(isMethod(pond,key)){results.push(pond[key].apply(pond,params));return;}
if(isSetter(pond,key)&&params.length){pond[key]=params[0];return;}
if(isGetter(pond,key)){results.push(pond[key]);return;}
console.warn('$().filepond("'+key+'") is an unknown property or method.');});return results.length?this.length===1?results[0]:results:items;};Object.keys(FilePond).forEach(function(key){$.fn.filepond[key]=FilePond[key];});$.fn.filepond.setDefaults=FilePond.setOptions;}(jQuery,FilePond));;/*!
 * FilePondPluginFileValidateSize 2.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?(module.exports=factory()):typeof define==='function'&&define.amd?define(factory):((global=global||self),(global.FilePondPluginFileValidateSize=factory()));})(this,function(){'use strict';var plugin=function plugin(_ref){var addFilter=_ref.addFilter,utils=_ref.utils;var Type=utils.Type,replaceInString=utils.replaceInString,toNaturalFileSize=utils.toNaturalFileSize;addFilter('ALLOW_HOPPER_ITEM',function(file,_ref2){var query=_ref2.query;if(!query('GET_ALLOW_FILE_SIZE_VALIDATION')){return true;}
var sizeMax=query('GET_MAX_FILE_SIZE');if(sizeMax!==null&&file.size>sizeMax){return false;}
var sizeMin=query('GET_MIN_FILE_SIZE');if(sizeMin!==null&&file.size<sizeMin){return false;}
return true;});addFilter('LOAD_FILE',function(file,_ref3){var query=_ref3.query;return new Promise(function(resolve,reject){if(!query('GET_ALLOW_FILE_SIZE_VALIDATION')){return resolve(file);}
var fileFilter=query('GET_FILE_VALIDATE_SIZE_FILTER');if(fileFilter&&!fileFilter(file)){return resolve(file);}
var sizeMax=query('GET_MAX_FILE_SIZE');if(sizeMax!==null&&file.size>sizeMax){reject({status:{main:query('GET_LABEL_MAX_FILE_SIZE_EXCEEDED'),sub:replaceInString(query('GET_LABEL_MAX_FILE_SIZE'),{filesize:toNaturalFileSize(sizeMax,'.',query('GET_FILE_SIZE_BASE'),query('GET_FILE_SIZE_LABELS',query)),}),},});return;}
var sizeMin=query('GET_MIN_FILE_SIZE');if(sizeMin!==null&&file.size<sizeMin){reject({status:{main:query('GET_LABEL_MIN_FILE_SIZE_EXCEEDED'),sub:replaceInString(query('GET_LABEL_MIN_FILE_SIZE'),{filesize:toNaturalFileSize(sizeMin,'.',query('GET_FILE_SIZE_BASE'),query('GET_FILE_SIZE_LABELS',query)),}),},});return;}
var totalSizeMax=query('GET_MAX_TOTAL_FILE_SIZE');if(totalSizeMax!==null){var currentTotalSize=query('GET_ACTIVE_ITEMS').reduce(function(total,item){return total+item.fileSize;},0);if(currentTotalSize>totalSizeMax){reject({status:{main:query('GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED'),sub:replaceInString(query('GET_LABEL_MAX_TOTAL_FILE_SIZE'),{filesize:toNaturalFileSize(totalSizeMax,'.',query('GET_FILE_SIZE_BASE'),query('GET_FILE_SIZE_LABELS',query)),}),},});return;}}
resolve(file);});});return{options:{allowFileSizeValidation:[true,Type.BOOLEAN],maxFileSize:[null,Type.INT],minFileSize:[null,Type.INT],maxTotalFileSize:[null,Type.INT],fileValidateSizeFilter:[null,Type.FUNCTION],labelMinFileSizeExceeded:['File is too small',Type.STRING],labelMinFileSize:['Minimum file size is {filesize}',Type.STRING],labelMaxFileSizeExceeded:['File is too large',Type.STRING],labelMaxFileSize:['Maximum file size is {filesize}',Type.STRING],labelMaxTotalFileSizeExceeded:['Maximum total size exceeded',Type.STRING],labelMaxTotalFileSize:['Maximum total file size is {filesize}',Type.STRING],},};};var isBrowser=typeof window!=='undefined'&&typeof window.document!=='undefined';if(isBrowser){document.dispatchEvent(new CustomEvent('FilePond:pluginloaded',{detail:plugin}));}
return plugin;});;/*!
 * FilePondPluginFileValidateType 1.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?(module.exports=factory()):typeof define==='function'&&define.amd?define(factory):((global=global||self),(global.FilePondPluginFileValidateType=factory()));})(this,function(){'use strict';var plugin=function plugin(_ref){var addFilter=_ref.addFilter,utils=_ref.utils;var Type=utils.Type,isString=utils.isString,replaceInString=utils.replaceInString,guesstimateMimeType=utils.guesstimateMimeType,getExtensionFromFilename=utils.getExtensionFromFilename,getFilenameFromURL=utils.getFilenameFromURL;var mimeTypeMatchesWildCard=function mimeTypeMatchesWildCard(mimeType,wildcard){var mimeTypeGroup=(/^[^/]+/.exec(mimeType)||[]).pop();var wildcardGroup=wildcard.slice(0,-2);return mimeTypeGroup===wildcardGroup;};var isValidMimeType=function isValidMimeType(acceptedTypes,userInputType){return acceptedTypes.some(function(acceptedType){if(/\*$/.test(acceptedType)){return mimeTypeMatchesWildCard(userInputType,acceptedType);}
return acceptedType===userInputType;});};var getItemType=function getItemType(item){var type='';if(isString(item)){var filename=getFilenameFromURL(item);var extension=getExtensionFromFilename(filename);if(extension){type=guesstimateMimeType(extension);}}else{type=item.type;}
return type;};var validateFile=function validateFile(item,acceptedFileTypes,typeDetector){if(acceptedFileTypes.length===0){return true;}
var type=getItemType(item);if(!typeDetector){return isValidMimeType(acceptedFileTypes,type);}
return new Promise(function(resolve,reject){typeDetector(item,type).then(function(detectedType){if(isValidMimeType(acceptedFileTypes,detectedType)){resolve();}else{reject();}}).catch(reject);});};var applyMimeTypeMap=function applyMimeTypeMap(map){return function(acceptedFileType){return map[acceptedFileType]===null?false:map[acceptedFileType]||acceptedFileType;};};addFilter('SET_ATTRIBUTE_TO_OPTION_MAP',function(map){return Object.assign(map,{accept:'acceptedFileTypes'});});addFilter('ALLOW_HOPPER_ITEM',function(file,_ref2){var query=_ref2.query;if(!query('GET_ALLOW_FILE_TYPE_VALIDATION')){return true;}
return validateFile(file,query('GET_ACCEPTED_FILE_TYPES'));});addFilter('LOAD_FILE',function(file,_ref3){var query=_ref3.query;return new Promise(function(resolve,reject){if(!query('GET_ALLOW_FILE_TYPE_VALIDATION')){resolve(file);return;}
var acceptedFileTypes=query('GET_ACCEPTED_FILE_TYPES');var typeDetector=query('GET_FILE_VALIDATE_TYPE_DETECT_TYPE');var validationResult=validateFile(file,acceptedFileTypes,typeDetector);var handleRejection=function handleRejection(){var acceptedFileTypesMapped=acceptedFileTypes.map(applyMimeTypeMap(query('GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP'))).filter(function(label){return label!==false;});var acceptedFileTypesMapped_unique=acceptedFileTypesMapped.filter(function(item,index){return acceptedFileTypesMapped.indexOf(item)===index;});reject({status:{main:query('GET_LABEL_FILE_TYPE_NOT_ALLOWED'),sub:replaceInString(query('GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES'),{allTypes:acceptedFileTypesMapped_unique.join(', '),allButLastType:acceptedFileTypesMapped_unique.slice(0,-1).join(', '),lastType:acceptedFileTypesMapped_unique[acceptedFileTypesMapped.length-1]})}});};if(typeof validationResult==='boolean'){if(!validationResult){return handleRejection();}
return resolve(file);}
validationResult.then(function(){resolve(file);}).catch(handleRejection);});});return{options:{allowFileTypeValidation:[true,Type.BOOLEAN],acceptedFileTypes:[[],Type.ARRAY],labelFileTypeNotAllowed:['File is of invalid type',Type.STRING],fileValidateTypeLabelExpectedTypes:['Expects {allButLastType} or {lastType}',Type.STRING],fileValidateTypeLabelExpectedTypesMap:[{},Type.OBJECT],fileValidateTypeDetectType:[null,Type.FUNCTION]}};};var isBrowser=typeof window!=='undefined'&&typeof window.document!=='undefined';if(isBrowser){document.dispatchEvent(new CustomEvent('FilePond:pluginloaded',{detail:plugin}));}
return plugin;});;/*!
 * FilePondPluginImagePreview 4.6.12
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?(module.exports=factory()):typeof define==='function'&&define.amd?define(factory):((global=global||self),(global.FilePondPluginImagePreview=factory()));})(this,function(){'use strict';var isPreviewableImage=function isPreviewableImage(file){return/^image/.test(file.type);};function _typeof(obj){if(typeof Symbol==='function'&&typeof Symbol.iterator==='symbol'){_typeof=function(obj){return typeof obj;};}else{_typeof=function(obj){return obj&&typeof Symbol==='function'&&obj.constructor===Symbol&&obj!==Symbol.prototype?'symbol':typeof obj;};}
return _typeof(obj);}
var REACT_ELEMENT_TYPE;function _jsx(type,props,key,children){if(!REACT_ELEMENT_TYPE){REACT_ELEMENT_TYPE=(typeof Symbol==='function'&&Symbol.for&&Symbol.for('react.element'))||0xeac7;}
var defaultProps=type&&type.defaultProps;var childrenLength=arguments.length-3;if(!props&&childrenLength!==0){props={children:void 0};}
if(props&&defaultProps){for(var propName in defaultProps){if(props[propName]===void 0){props[propName]=defaultProps[propName];}}}else if(!props){props=defaultProps||{};}
if(childrenLength===1){props.children=children;}else if(childrenLength>1){var childArray=new Array(childrenLength);for(var i=0;i<childrenLength;i++){childArray[i]=arguments[i+3];}
props.children=childArray;}
return{$$typeof:REACT_ELEMENT_TYPE,type:type,key:key===undefined?null:''+key,ref:null,props:props,_owner:null};}
function _asyncIterator(iterable){var method;if(typeof Symbol==='function'){if(Symbol.asyncIterator){method=iterable[Symbol.asyncIterator];if(method!=null)return method.call(iterable);}
if(Symbol.iterator){method=iterable[Symbol.iterator];if(method!=null)return method.call(iterable);}}
throw new TypeError('Object is not async iterable');}
function _AwaitValue(value){this.wrapped=value;}
function _AsyncGenerator(gen){var front,back;function send(key,arg){return new Promise(function(resolve,reject){var request={key:key,arg:arg,resolve:resolve,reject:reject,next:null};if(back){back=back.next=request;}else{front=back=request;resume(key,arg);}});}
function resume(key,arg){try{var result=gen[key](arg);var value=result.value;var wrappedAwait=value instanceof _AwaitValue;Promise.resolve(wrappedAwait?value.wrapped:value).then(function(arg){if(wrappedAwait){resume('next',arg);return;}
settle(result.done?'return':'normal',arg);},function(err){resume('throw',err);});}catch(err){settle('throw',err);}}
function settle(type,value){switch(type){case'return':front.resolve({value:value,done:true});break;case'throw':front.reject(value);break;default:front.resolve({value:value,done:false});break;}
front=front.next;if(front){resume(front.key,front.arg);}else{back=null;}}
this._invoke=send;if(typeof gen.return!=='function'){this.return=undefined;}}
if(typeof Symbol==='function'&&Symbol.asyncIterator){_AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this;};}
_AsyncGenerator.prototype.next=function(arg){return this._invoke('next',arg);};_AsyncGenerator.prototype.throw=function(arg){return this._invoke('throw',arg);};_AsyncGenerator.prototype.return=function(arg){return this._invoke('return',arg);};function _wrapAsyncGenerator(fn){return function(){return new _AsyncGenerator(fn.apply(this,arguments));};}
function _awaitAsyncGenerator(value){return new _AwaitValue(value);}
function _asyncGeneratorDelegate(inner,awaitWrap){var iter={},waiting=false;function pump(key,value){waiting=true;value=new Promise(function(resolve){resolve(inner[key](value));});return{done:false,value:awaitWrap(value)};}
if(typeof Symbol==='function'&&Symbol.iterator){iter[Symbol.iterator]=function(){return this;};}
iter.next=function(value){if(waiting){waiting=false;return value;}
return pump('next',value);};if(typeof inner.throw==='function'){iter.throw=function(value){if(waiting){waiting=false;throw value;}
return pump('throw',value);};}
if(typeof inner.return==='function'){iter.return=function(value){return pump('return',value);};}
return iter;}
function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}
if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}
function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,'next',value);}
function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,'throw',err);}
_next(undefined);});};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
function _defineEnumerableProperties(obj,descs){for(var key in descs){var desc=descs[key];desc.configurable=desc.enumerable=true;if('value'in desc)desc.writable=true;Object.defineProperty(obj,key,desc);}
if(Object.getOwnPropertySymbols){var objectSymbols=Object.getOwnPropertySymbols(descs);for(var i=0;i<objectSymbols.length;i++){var sym=objectSymbols[i];var desc=descs[sym];desc.configurable=desc.enumerable=true;if('value'in desc)desc.writable=true;Object.defineProperty(obj,sym,desc);}}
return obj;}
function _defaults(obj,defaults){var keys=Object.getOwnPropertyNames(defaults);for(var i=0;i<keys.length;i++){var key=keys[i];var value=Object.getOwnPropertyDescriptor(defaults,key);if(value&&value.configurable&&obj[key]===undefined){Object.defineProperty(obj,key,value);}}
return obj;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}
return obj;}
function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}
return target;};return _extends.apply(this,arguments);}
function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==='function'){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}
ownKeys.forEach(function(key){_defineProperty(target,key,source[key]);});}
return target;}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function');}
subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}
function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass;}
function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}
function isNativeReflectConstruct(){if(typeof Reflect==='undefined'||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==='function')return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}
function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct;}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor();if(Class)_setPrototypeOf(instance,Class.prototype);return instance;};}
return _construct.apply(null,arguments);}
function _isNativeFunction(fn){return Function.toString.call(fn).indexOf('[native code]')!==-1;}
function _wrapNativeSuper(Class){var _cache=typeof Map==='function'?new Map():undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=='function'){throw new TypeError('Super expression must either be null or a function');}
if(typeof _cache!=='undefined'){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper);}
function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor);}
Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class);};return _wrapNativeSuper(Class);}
function _instanceof(left,right){if(right!=null&&typeof Symbol!=='undefined'&&right[Symbol.hasInstance]){return right[Symbol.hasInstance](left);}else{return left instanceof right;}}
function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}
function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}}
newObj.default=obj;return newObj;}}
function _newArrowCheck(innerThis,boundThis){if(innerThis!==boundThis){throw new TypeError('Cannot instantiate an arrow function');}}
function _objectDestructuringEmpty(obj){if(obj==null)throw new TypeError('Cannot destructure undefined');}
function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key];}
return target;}
function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key];}}
return target;}
function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}
return self;}
function _possibleConstructorReturn(self,call){if(call&&(typeof call==='object'||typeof call==='function')){return call;}
return _assertThisInitialized(self);}
function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}
return object;}
function _get(target,property,receiver){if(typeof Reflect!=='undefined'&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}
return desc.value;};}
return _get(target,property,receiver||target);}
function set(target,property,value,receiver){if(typeof Reflect!=='undefined'&&Reflect.set){set=Reflect.set;}else{set=function set(target,property,value,receiver){var base=_superPropBase(target,property);var desc;if(base){desc=Object.getOwnPropertyDescriptor(base,property);if(desc.set){desc.set.call(receiver,value);return true;}else if(!desc.writable){return false;}}
desc=Object.getOwnPropertyDescriptor(receiver,property);if(desc){if(!desc.writable){return false;}
desc.value=value;Object.defineProperty(receiver,property,desc);}else{_defineProperty(receiver,property,value);}
return true;};}
return set(target,property,value,receiver);}
function _set(target,property,value,receiver,isStrict){var s=set(target,property,value,receiver||target);if(!s&&isStrict){throw new Error('failed to set property');}
return value;}
function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0);}
return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}));}
function _taggedTemplateLiteralLoose(strings,raw){if(!raw){raw=strings.slice(0);}
strings.raw=raw;return strings;}
function _temporalRef(val,name){if(val===_temporalUndefined){throw new ReferenceError(name+' is not defined - temporal dead zone');}else{return val;}}
function _readOnlyError(name){throw new Error('"'+name+'" is read-only');}
function _classNameTDZError(name){throw new Error('Class "'+name+'" cannot be referenced in computed property keys.');}
var _temporalUndefined={};function _slicedToArray(arr,i){return(_arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest());}
function _slicedToArrayLoose(arr,i){return(_arrayWithHoles(arr)||_iterableToArrayLimitLoose(arr,i)||_nonIterableRest());}
function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_nonIterableRest();}
function _toConsumableArray(arr){return(_arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread());}
function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)
arr2[i]=arr[i];return arr2;}}
function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}
function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==='[object Arguments]')
return Array.from(iter);}
function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i['return']!=null)_i['return']();}finally{if(_d)throw _e;}}
return _arr;}
function _iterableToArrayLimitLoose(arr,i){var _arr=[];for(var _iterator=arr[Symbol.iterator](),_step;!(_step=_iterator.next()).done;){_arr.push(_step.value);if(i&&_arr.length===i)break;}
return _arr;}
function _nonIterableSpread(){throw new TypeError('Invalid attempt to spread non-iterable instance');}
function _nonIterableRest(){throw new TypeError('Invalid attempt to destructure non-iterable instance');}
function _skipFirstGeneratorNext(fn){return function(){var it=fn.apply(this,arguments);it.next();return it;};}
function _toPrimitive(input,hint){if(typeof input!=='object'||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||'default');if(typeof res!=='object')return res;throw new TypeError('@@toPrimitive must return a primitive value.');}
return(hint==='string'?String:Number)(input);}
function _toPropertyKey(arg){var key=_toPrimitive(arg,'string');return typeof key==='symbol'?key:String(key);}
function _initializerWarningHelper(descriptor,context){throw new Error('Decorating class property failed. Please ensure that '+'proposal-class-properties is enabled and set to use loose mode. '+'To use proposal-class-properties in spec mode with decorators, wait for '+'the next major version of decorators in stage 2.');}
function _initializerDefineProperty(target,property,descriptor,context){if(!descriptor)return;Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0});}
function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}
desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}
if(desc.initializer===void 0){Object.defineProperty(target,property,desc);desc=null;}
return desc;}
var id=0;function _classPrivateFieldLooseKey(name){return'__private_'+id++ +'_'+name;}
function _classPrivateFieldLooseBase(receiver,privateKey){if(!Object.prototype.hasOwnProperty.call(receiver,privateKey)){throw new TypeError('attempted to use private field on non-instance');}
return receiver;}
function _classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver)){throw new TypeError('attempted to get private field on non-instance');}
var descriptor=privateMap.get(receiver);if(descriptor.get){return descriptor.get.call(receiver);}
return descriptor.value;}
function _classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver)){throw new TypeError('attempted to set private field on non-instance');}
var descriptor=privateMap.get(receiver);if(descriptor.set){descriptor.set.call(receiver,value);}else{if(!descriptor.writable){throw new TypeError('attempted to set read only private field');}
descriptor.value=value;}
return value;}
function _classStaticPrivateFieldSpecGet(receiver,classConstructor,descriptor){if(receiver!==classConstructor){throw new TypeError('Private static access of wrong provenance');}
return descriptor.value;}
function _classStaticPrivateFieldSpecSet(receiver,classConstructor,descriptor,value){if(receiver!==classConstructor){throw new TypeError('Private static access of wrong provenance');}
if(!descriptor.writable){throw new TypeError('attempted to set read only private field');}
descriptor.value=value;return value;}
function _classStaticPrivateMethodGet(receiver,classConstructor,method){if(receiver!==classConstructor){throw new TypeError('Private static access of wrong provenance');}
return method;}
function _classStaticPrivateMethodSet(){throw new TypeError('attempted to set read only static private field');}
function _decorate(decorators,factory,superClass,mixins){var api=_getDecoratorsApi();if(mixins){for(var i=0;i<mixins.length;i++){api=mixins[i](api);}}
var r=factory(function initialize(O){api.initializeInstanceElements(O,decorated.elements);},superClass);var decorated=api.decorateClass(_coalesceClassElements(r.d.map(_createElementDescriptor)),decorators);api.initializeClassElements(r.F,decorated.elements);return api.runClassFinishers(r.F,decorated.finishers);}
function _getDecoratorsApi(){_getDecoratorsApi=function(){return api;};var api={elementsDefinitionOrder:[['method'],['field']],initializeInstanceElements:function(O,elements){['method','field'].forEach(function(kind){elements.forEach(function(element){if(element.kind===kind&&element.placement==='own'){this.defineClassElement(O,element);}},this);},this);},initializeClassElements:function(F,elements){var proto=F.prototype;['method','field'].forEach(function(kind){elements.forEach(function(element){var placement=element.placement;if(element.kind===kind&&(placement==='static'||placement==='prototype')){var receiver=placement==='static'?F:proto;this.defineClassElement(receiver,element);}},this);},this);},defineClassElement:function(receiver,element){var descriptor=element.descriptor;if(element.kind==='field'){var initializer=element.initializer;descriptor={enumerable:descriptor.enumerable,writable:descriptor.writable,configurable:descriptor.configurable,value:initializer===void 0?void 0:initializer.call(receiver)};}
Object.defineProperty(receiver,element.key,descriptor);},decorateClass:function(elements,decorators){var newElements=[];var finishers=[];var placements={static:[],prototype:[],own:[]};elements.forEach(function(element){this.addElementPlacement(element,placements);},this);elements.forEach(function(element){if(!_hasDecorators(element))return newElements.push(element);var elementFinishersExtras=this.decorateElement(element,placements);newElements.push(elementFinishersExtras.element);newElements.push.apply(newElements,elementFinishersExtras.extras);finishers.push.apply(finishers,elementFinishersExtras.finishers);},this);if(!decorators){return{elements:newElements,finishers:finishers};}
var result=this.decorateConstructor(newElements,decorators);finishers.push.apply(finishers,result.finishers);result.finishers=finishers;return result;},addElementPlacement:function(element,placements,silent){var keys=placements[element.placement];if(!silent&&keys.indexOf(element.key)!==-1){throw new TypeError('Duplicated element ('+element.key+')');}
keys.push(element.key);},decorateElement:function(element,placements){var extras=[];var finishers=[];for(var decorators=element.decorators,i=decorators.length-1;i>=0;i--){var keys=placements[element.placement];keys.splice(keys.indexOf(element.key),1);var elementObject=this.fromElementDescriptor(element);var elementFinisherExtras=this.toElementFinisherExtras((0,decorators[i])(elementObject)||elementObject);element=elementFinisherExtras.element;this.addElementPlacement(element,placements);if(elementFinisherExtras.finisher){finishers.push(elementFinisherExtras.finisher);}
var newExtras=elementFinisherExtras.extras;if(newExtras){for(var j=0;j<newExtras.length;j++){this.addElementPlacement(newExtras[j],placements);}
extras.push.apply(extras,newExtras);}}
return{element:element,finishers:finishers,extras:extras};},decorateConstructor:function(elements,decorators){var finishers=[];for(var i=decorators.length-1;i>=0;i--){var obj=this.fromClassDescriptor(elements);var elementsAndFinisher=this.toClassDescriptor((0,decorators[i])(obj)||obj);if(elementsAndFinisher.finisher!==undefined){finishers.push(elementsAndFinisher.finisher);}
if(elementsAndFinisher.elements!==undefined){elements=elementsAndFinisher.elements;for(var j=0;j<elements.length-1;j++){for(var k=j+1;k<elements.length;k++){if(elements[j].key===elements[k].key&&elements[j].placement===elements[k].placement){throw new TypeError('Duplicated element ('+elements[j].key+')');}}}}}
return{elements:elements,finishers:finishers};},fromElementDescriptor:function(element){var obj={kind:element.kind,key:element.key,placement:element.placement,descriptor:element.descriptor};var desc={value:'Descriptor',configurable:true};Object.defineProperty(obj,Symbol.toStringTag,desc);if(element.kind==='field')obj.initializer=element.initializer;return obj;},toElementDescriptors:function(elementObjects){if(elementObjects===undefined)return;return _toArray(elementObjects).map(function(elementObject){var element=this.toElementDescriptor(elementObject);this.disallowProperty(elementObject,'finisher','An element descriptor');this.disallowProperty(elementObject,'extras','An element descriptor');return element;},this);},toElementDescriptor:function(elementObject){var kind=String(elementObject.kind);if(kind!=='method'&&kind!=='field'){throw new TypeError('An element descriptor\'s .kind property must be either "method" or'+' "field", but a decorator created an element descriptor with'+' .kind "'+
kind+'"');}
var key=_toPropertyKey(elementObject.key);var placement=String(elementObject.placement);if(placement!=='static'&&placement!=='prototype'&&placement!=='own'){throw new TypeError('An element descriptor\'s .placement property must be one of "static",'+' "prototype" or "own", but a decorator created an element descriptor'+' with .placement "'+
placement+'"');}
var descriptor=elementObject.descriptor;this.disallowProperty(elementObject,'elements','An element descriptor');var element={kind:kind,key:key,placement:placement,descriptor:Object.assign({},descriptor)};if(kind!=='field'){this.disallowProperty(elementObject,'initializer','A method descriptor');}else{this.disallowProperty(descriptor,'get','The property descriptor of a field descriptor');this.disallowProperty(descriptor,'set','The property descriptor of a field descriptor');this.disallowProperty(descriptor,'value','The property descriptor of a field descriptor');element.initializer=elementObject.initializer;}
return element;},toElementFinisherExtras:function(elementObject){var element=this.toElementDescriptor(elementObject);var finisher=_optionalCallableProperty(elementObject,'finisher');var extras=this.toElementDescriptors(elementObject.extras);return{element:element,finisher:finisher,extras:extras};},fromClassDescriptor:function(elements){var obj={kind:'class',elements:elements.map(this.fromElementDescriptor,this)};var desc={value:'Descriptor',configurable:true};Object.defineProperty(obj,Symbol.toStringTag,desc);return obj;},toClassDescriptor:function(obj){var kind=String(obj.kind);if(kind!=='class'){throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator'+' created a class descriptor with .kind "'+
kind+'"');}
this.disallowProperty(obj,'key','A class descriptor');this.disallowProperty(obj,'placement','A class descriptor');this.disallowProperty(obj,'descriptor','A class descriptor');this.disallowProperty(obj,'initializer','A class descriptor');this.disallowProperty(obj,'extras','A class descriptor');var finisher=_optionalCallableProperty(obj,'finisher');var elements=this.toElementDescriptors(obj.elements);return{elements:elements,finisher:finisher};},runClassFinishers:function(constructor,finishers){for(var i=0;i<finishers.length;i++){var newConstructor=(0,finishers[i])(constructor);if(newConstructor!==undefined){if(typeof newConstructor!=='function'){throw new TypeError('Finishers must return a constructor.');}
constructor=newConstructor;}}
return constructor;},disallowProperty:function(obj,name,objectType){if(obj[name]!==undefined){throw new TypeError(objectType+" can't have a ."+name+' property.');}}};return api;}
function _createElementDescriptor(def){var key=_toPropertyKey(def.key);var descriptor;if(def.kind==='method'){descriptor={value:def.value,writable:true,configurable:true,enumerable:false};}else if(def.kind==='get'){descriptor={get:def.value,configurable:true,enumerable:false};}else if(def.kind==='set'){descriptor={set:def.value,configurable:true,enumerable:false};}else if(def.kind==='field'){descriptor={configurable:true,writable:true,enumerable:true};}
var element={kind:def.kind==='field'?'field':'method',key:key,placement:def.static?'static':def.kind==='field'?'own':'prototype',descriptor:descriptor};if(def.decorators)element.decorators=def.decorators;if(def.kind==='field')element.initializer=def.value;return element;}
function _coalesceGetterSetter(element,other){if(element.descriptor.get!==undefined){other.descriptor.get=element.descriptor.get;}else{other.descriptor.set=element.descriptor.set;}}
function _coalesceClassElements(elements){var newElements=[];var isSameElement=function(other){return(other.kind==='method'&&other.key===element.key&&other.placement===element.placement);};for(var i=0;i<elements.length;i++){var element=elements[i];var other;if(element.kind==='method'&&(other=newElements.find(isSameElement))){if(_isDataDescriptor(element.descriptor)||_isDataDescriptor(other.descriptor)){if(_hasDecorators(element)||_hasDecorators(other)){throw new ReferenceError('Duplicated methods ('+element.key+") can't be decorated.");}
other.descriptor=element.descriptor;}else{if(_hasDecorators(element)){if(_hasDecorators(other)){throw new ReferenceError("Decorators can't be placed on different accessors with for "+'the same property ('+
element.key+').');}
other.decorators=element.decorators;}
_coalesceGetterSetter(element,other);}}else{newElements.push(element);}}
return newElements;}
function _hasDecorators(element){return element.decorators&&element.decorators.length;}
function _isDataDescriptor(desc){return(desc!==undefined&&!(desc.value===undefined&&desc.writable===undefined));}
function _optionalCallableProperty(obj,name){var value=obj[name];if(value!==undefined&&typeof value!=='function'){throw new TypeError("Expected '"+name+"' to be a function");}
return value;}
function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError('attempted to get private field on non-instance');}
return fn;}
function _classPrivateMethodSet(){throw new TypeError('attempted to reassign private method');}
function _wrapRegExp(re,groups){_wrapRegExp=function(re,groups){return new BabelRegExp(re,groups);};var _RegExp=_wrapNativeSuper(RegExp);var _super=RegExp.prototype;var _groups=new WeakMap();function BabelRegExp(re,groups){var _this=_RegExp.call(this,re);_groups.set(_this,groups);return _this;}
_inherits(BabelRegExp,_RegExp);BabelRegExp.prototype.exec=function(str){var result=_super.exec.call(this,str);if(result)result.groups=buildGroups(result,this);return result;};BabelRegExp.prototype[Symbol.replace]=function(str,substitution){if(typeof substitution==='string'){var groups=_groups.get(this);return _super[Symbol.replace].call(this,str,substitution.replace(/\$<([^>]+)>/g,function(_,name){return'$'+groups[name];}));}else if(typeof substitution==='function'){var _this=this;return _super[Symbol.replace].call(this,str,function(){var args=[];args.push.apply(args,arguments);if(typeof args[args.length-1]!=='object'){args.push(buildGroups(args,_this));}
return substitution.apply(this,args);});}else{return _super[Symbol.replace].call(this,str,substitution);}};function buildGroups(result,re){var g=_groups.get(re);return Object.keys(g).reduce(function(groups,name){groups[name]=result[g[name]];return groups;},Object.create(null));}
return _wrapRegExp.apply(this,arguments);}
var vectorMultiply=function vectorMultiply(v,amount){return createVector(v.x*amount,v.y*amount);};var vectorAdd=function vectorAdd(a,b){return createVector(a.x+b.x,a.y+b.y);};var vectorNormalize=function vectorNormalize(v){var l=Math.sqrt(v.x*v.x+v.y*v.y);if(l===0){return{x:0,y:0};}
return createVector(v.x/l,v.y/l);};var vectorRotate=function vectorRotate(v,radians,origin){var cos=Math.cos(radians);var sin=Math.sin(radians);var t=createVector(v.x-origin.x,v.y-origin.y);return createVector(origin.x+cos*t.x-sin*t.y,origin.y+sin*t.x+cos*t.y);};var createVector=function createVector(){var x=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var y=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return{x:x,y:y};};var getMarkupValue=function getMarkupValue(value,size){var scalar=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var axis=arguments.length>3?arguments[3]:undefined;if(typeof value==='string'){return parseFloat(value)*scalar;}
if(typeof value==='number'){return value*(axis?size[axis]:Math.min(size.width,size.height));}
return;};var getMarkupStyles=function getMarkupStyles(markup,size,scale){var lineStyle=markup.borderStyle||markup.lineStyle||'solid';var fill=markup.backgroundColor||markup.fontColor||'transparent';var stroke=markup.borderColor||markup.lineColor||'transparent';var strokeWidth=getMarkupValue(markup.borderWidth||markup.lineWidth,size,scale);var lineCap=markup.lineCap||'round';var lineJoin=markup.lineJoin||'round';var dashes=typeof lineStyle==='string'?'':lineStyle.map(function(v){return getMarkupValue(v,size,scale);}).join(',');var opacity=markup.opacity||1;return{'stroke-linecap':lineCap,'stroke-linejoin':lineJoin,'stroke-width':strokeWidth||0,'stroke-dasharray':dashes,stroke:stroke,fill:fill,opacity:opacity};};var isDefined=function isDefined(value){return value!=null;};var getMarkupRect=function getMarkupRect(rect,size){var scalar=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var left=getMarkupValue(rect.x,size,scalar,'width')||getMarkupValue(rect.left,size,scalar,'width');var top=getMarkupValue(rect.y,size,scalar,'height')||getMarkupValue(rect.top,size,scalar,'height');var width=getMarkupValue(rect.width,size,scalar,'width');var height=getMarkupValue(rect.height,size,scalar,'height');var right=getMarkupValue(rect.right,size,scalar,'width');var bottom=getMarkupValue(rect.bottom,size,scalar,'height');if(!isDefined(top)){if(isDefined(height)&&isDefined(bottom)){top=size.height-height-bottom;}else{top=bottom;}}
if(!isDefined(left)){if(isDefined(width)&&isDefined(right)){left=size.width-width-right;}else{left=right;}}
if(!isDefined(width)){if(isDefined(left)&&isDefined(right)){width=size.width-left-right;}else{width=0;}}
if(!isDefined(height)){if(isDefined(top)&&isDefined(bottom)){height=size.height-top-bottom;}else{height=0;}}
return{x:left||0,y:top||0,width:width||0,height:height||0};};var pointsToPathShape=function pointsToPathShape(points){return points.map(function(point,index){return''.concat(index===0?'M':'L',' ').concat(point.x,' ').concat(point.y);}).join(' ');};var setAttributes=function setAttributes(element,attr){return Object.keys(attr).forEach(function(key){return element.setAttribute(key,attr[key]);});};var ns='http://www.w3.org/2000/svg';var svg=function svg(tag,attr){var element=document.createElementNS(ns,tag);if(attr){setAttributes(element,attr);}
return element;};var updateRect=function updateRect(element){return setAttributes(element,Object.assign({},element.rect,element.styles));};var updateEllipse=function updateEllipse(element){var cx=element.rect.x+element.rect.width*0.5;var cy=element.rect.y+element.rect.height*0.5;var rx=element.rect.width*0.5;var ry=element.rect.height*0.5;return setAttributes(element,Object.assign({cx:cx,cy:cy,rx:rx,ry:ry},element.styles));};var IMAGE_FIT_STYLE={contain:'xMidYMid meet',cover:'xMidYMid slice'};var updateImage=function updateImage(element,markup){setAttributes(element,Object.assign({},element.rect,element.styles,{preserveAspectRatio:IMAGE_FIT_STYLE[markup.fit]||'none'}));};var TEXT_ANCHOR={left:'start',center:'middle',right:'end'};var updateText=function updateText(element,markup,size,scale){var fontSize=getMarkupValue(markup.fontSize,size,scale);var fontFamily=markup.fontFamily||'sans-serif';var fontWeight=markup.fontWeight||'normal';var textAlign=TEXT_ANCHOR[markup.textAlign]||'start';setAttributes(element,Object.assign({},element.rect,element.styles,{'stroke-width':0,'font-weight':fontWeight,'font-size':fontSize,'font-family':fontFamily,'text-anchor':textAlign}));if(element.text!==markup.text){element.text=markup.text;element.textContent=markup.text.length?markup.text:' ';}};var updateLine=function updateLine(element,markup,size,scale){setAttributes(element,Object.assign({},element.rect,element.styles,{fill:'none'}));var line=element.childNodes[0];var begin=element.childNodes[1];var end=element.childNodes[2];var origin=element.rect;var target={x:element.rect.x+element.rect.width,y:element.rect.y+element.rect.height};setAttributes(line,{x1:origin.x,y1:origin.y,x2:target.x,y2:target.y});if(!markup.lineDecoration)return;begin.style.display='none';end.style.display='none';var v=vectorNormalize({x:target.x-origin.x,y:target.y-origin.y});var l=getMarkupValue(0.05,size,scale);if(markup.lineDecoration.indexOf('arrow-begin')!==-1){var arrowBeginRotationPoint=vectorMultiply(v,l);var arrowBeginCenter=vectorAdd(origin,arrowBeginRotationPoint);var arrowBeginA=vectorRotate(origin,2,arrowBeginCenter);var arrowBeginB=vectorRotate(origin,-2,arrowBeginCenter);setAttributes(begin,{style:'display:block;',d:'M'.concat(arrowBeginA.x,',').concat(arrowBeginA.y,' L').concat(origin.x,',').concat(origin.y,' L').concat(arrowBeginB.x,',').concat(arrowBeginB.y)});}
if(markup.lineDecoration.indexOf('arrow-end')!==-1){var arrowEndRotationPoint=vectorMultiply(v,-l);var arrowEndCenter=vectorAdd(target,arrowEndRotationPoint);var arrowEndA=vectorRotate(target,2,arrowEndCenter);var arrowEndB=vectorRotate(target,-2,arrowEndCenter);setAttributes(end,{style:'display:block;',d:'M'.concat(arrowEndA.x,',').concat(arrowEndA.y,' L').concat(target.x,',').concat(target.y,' L').concat(arrowEndB.x,',').concat(arrowEndB.y)});}};var updatePath=function updatePath(element,markup,size,scale){setAttributes(element,Object.assign({},element.styles,{fill:'none',d:pointsToPathShape(markup.points.map(function(point){return{x:getMarkupValue(point.x,size,scale,'width'),y:getMarkupValue(point.y,size,scale,'height')};}))}));};var createShape=function createShape(node){return function(markup){return svg(node,{id:markup.id});};};var createImage=function createImage(markup){var shape=svg('image',{id:markup.id,'stroke-linecap':'round','stroke-linejoin':'round',opacity:'0'});shape.onload=function(){shape.setAttribute('opacity',markup.opacity||1);};shape.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href',markup.src);return shape;};var createLine=function createLine(markup){var shape=svg('g',{id:markup.id,'stroke-linecap':'round','stroke-linejoin':'round'});var line=svg('line');shape.appendChild(line);var begin=svg('path');shape.appendChild(begin);var end=svg('path');shape.appendChild(end);return shape;};var CREATE_TYPE_ROUTES={image:createImage,rect:createShape('rect'),ellipse:createShape('ellipse'),text:createShape('text'),path:createShape('path'),line:createLine};var UPDATE_TYPE_ROUTES={rect:updateRect,ellipse:updateEllipse,image:updateImage,text:updateText,path:updatePath,line:updateLine};var createMarkupByType=function createMarkupByType(type,markup){return CREATE_TYPE_ROUTES[type](markup);};var updateMarkupByType=function updateMarkupByType(element,type,markup,size,scale){if(type!=='path'){element.rect=getMarkupRect(markup,size,scale);}
element.styles=getMarkupStyles(markup,size,scale);UPDATE_TYPE_ROUTES[type](element,markup,size,scale);};var MARKUP_RECT=['x','y','left','top','right','bottom','width','height'];var toOptionalFraction=function toOptionalFraction(value){return typeof value==='string'&&/%/.test(value)?parseFloat(value)/100:value;};var prepareMarkup=function prepareMarkup(markup){var _markup=_slicedToArray(markup,2),type=_markup[0],props=_markup[1];var rect=props.points?{}:MARKUP_RECT.reduce(function(prev,curr){prev[curr]=toOptionalFraction(props[curr]);return prev;},{});return[type,Object.assign({zIndex:0},props,rect)];};var sortMarkupByZIndex=function sortMarkupByZIndex(a,b){if(a[1].zIndex>b[1].zIndex){return 1;}
if(a[1].zIndex<b[1].zIndex){return-1;}
return 0;};var createMarkupView=function createMarkupView(_){return _.utils.createView({name:'image-preview-markup',tag:'svg',ignoreRect:true,mixins:{apis:['width','height','crop','markup','resize','dirty']},write:function write(_ref){var root=_ref.root,props=_ref.props;if(!props.dirty)return;var crop=props.crop,resize=props.resize,markup=props.markup;var viewWidth=props.width;var viewHeight=props.height;var cropWidth=crop.width;var cropHeight=crop.height;if(resize){var _size=resize.size;var outputWidth=_size&&_size.width;var outputHeight=_size&&_size.height;var outputFit=resize.mode;var outputUpscale=resize.upscale;if(outputWidth&&!outputHeight)outputHeight=outputWidth;if(outputHeight&&!outputWidth)outputWidth=outputHeight;var shouldUpscale=cropWidth<outputWidth&&cropHeight<outputHeight;if(!shouldUpscale||(shouldUpscale&&outputUpscale)){var scalarWidth=outputWidth/cropWidth;var scalarHeight=outputHeight/cropHeight;if(outputFit==='force'){cropWidth=outputWidth;cropHeight=outputHeight;}else{var scalar;if(outputFit==='cover'){scalar=Math.max(scalarWidth,scalarHeight);}else if(outputFit==='contain'){scalar=Math.min(scalarWidth,scalarHeight);}
cropWidth=cropWidth*scalar;cropHeight=cropHeight*scalar;}}}
var size={width:viewWidth,height:viewHeight};root.element.setAttribute('width',size.width);root.element.setAttribute('height',size.height);var scale=Math.min(viewWidth/cropWidth,viewHeight/cropHeight);root.element.innerHTML='';var markupFilter=root.query('GET_IMAGE_PREVIEW_MARKUP_FILTER');markup.filter(markupFilter).map(prepareMarkup).sort(sortMarkupByZIndex).forEach(function(markup){var _markup=_slicedToArray(markup,2),type=_markup[0],settings=_markup[1];var element=createMarkupByType(type,settings);updateMarkupByType(element,type,settings,size,scale);root.element.appendChild(element);});}});};var createVector$1=function createVector(x,y){return{x:x,y:y};};var vectorDot=function vectorDot(a,b){return a.x*b.x+a.y*b.y;};var vectorSubtract=function vectorSubtract(a,b){return createVector$1(a.x-b.x,a.y-b.y);};var vectorDistanceSquared=function vectorDistanceSquared(a,b){return vectorDot(vectorSubtract(a,b),vectorSubtract(a,b));};var vectorDistance=function vectorDistance(a,b){return Math.sqrt(vectorDistanceSquared(a,b));};var getOffsetPointOnEdge=function getOffsetPointOnEdge(length,rotation){var a=length;var A=1.5707963267948966;var B=rotation;var C=1.5707963267948966-rotation;var sinA=Math.sin(A);var sinB=Math.sin(B);var sinC=Math.sin(C);var cosC=Math.cos(C);var ratio=a/sinA;var b=ratio*sinB;var c=ratio*sinC;return createVector$1(cosC*b,cosC*c);};var getRotatedRectSize=function getRotatedRectSize(rect,rotation){var w=rect.width;var h=rect.height;var hor=getOffsetPointOnEdge(w,rotation);var ver=getOffsetPointOnEdge(h,rotation);var tl=createVector$1(rect.x+Math.abs(hor.x),rect.y-Math.abs(hor.y));var tr=createVector$1(rect.x+rect.width+Math.abs(ver.y),rect.y+Math.abs(ver.x));var bl=createVector$1(rect.x-Math.abs(ver.y),rect.y+rect.height-Math.abs(ver.x));return{width:vectorDistance(tl,tr),height:vectorDistance(tl,bl)};};var calculateCanvasSize=function calculateCanvasSize(image,canvasAspectRatio){var zoom=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var imageAspectRatio=image.height/image.width;var canvasWidth=1;var canvasHeight=canvasAspectRatio;var imgWidth=1;var imgHeight=imageAspectRatio;if(imgHeight>canvasHeight){imgHeight=canvasHeight;imgWidth=imgHeight/imageAspectRatio;}
var scalar=Math.max(canvasWidth/imgWidth,canvasHeight/imgHeight);var width=image.width/(zoom*scalar*imgWidth);var height=width*canvasAspectRatio;return{width:width,height:height};};var getImageRectZoomFactor=function getImageRectZoomFactor(imageRect,cropRect,rotation,center){var cx=center.x>0.5?1-center.x:center.x;var cy=center.y>0.5?1-center.y:center.y;var imageWidth=cx*2*imageRect.width;var imageHeight=cy*2*imageRect.height;var rotatedCropSize=getRotatedRectSize(cropRect,rotation);return Math.max(rotatedCropSize.width/imageWidth,rotatedCropSize.height/imageHeight);};var getCenteredCropRect=function getCenteredCropRect(container,aspectRatio){var width=container.width;var height=width*aspectRatio;if(height>container.height){height=container.height;width=height/aspectRatio;}
var x=(container.width-width)*0.5;var y=(container.height-height)*0.5;return{x:x,y:y,width:width,height:height};};var getCurrentCropSize=function getCurrentCropSize(imageSize){var crop=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var zoom=crop.zoom,rotation=crop.rotation,center=crop.center,aspectRatio=crop.aspectRatio;if(!aspectRatio)aspectRatio=imageSize.height/imageSize.width;var canvasSize=calculateCanvasSize(imageSize,aspectRatio,zoom);var canvasCenter={x:canvasSize.width*0.5,y:canvasSize.height*0.5};var stage={x:0,y:0,width:canvasSize.width,height:canvasSize.height,center:canvasCenter};var shouldLimit=typeof crop.scaleToFit==='undefined'||crop.scaleToFit;var stageZoomFactor=getImageRectZoomFactor(imageSize,getCenteredCropRect(stage,aspectRatio),rotation,shouldLimit?center:{x:0.5,y:0.5});var scale=zoom*stageZoomFactor;return{widthFloat:canvasSize.width/scale,heightFloat:canvasSize.height/scale,width:Math.round(canvasSize.width/scale),height:Math.round(canvasSize.height/scale)};};var IMAGE_SCALE_SPRING_PROPS={type:'spring',stiffness:0.5,damping:0.45,mass:10};var createBitmapView=function createBitmapView(_){return _.utils.createView({name:'image-bitmap',ignoreRect:true,mixins:{styles:['scaleX','scaleY']},create:function create(_ref){var root=_ref.root,props=_ref.props;root.appendChild(props.image);}});};var createImageCanvasWrapper=function createImageCanvasWrapper(_){return _.utils.createView({name:'image-canvas-wrapper',tag:'div',ignoreRect:true,mixins:{apis:['crop','width','height'],styles:['originX','originY','translateX','translateY','scaleX','scaleY','rotateZ'],animations:{originX:IMAGE_SCALE_SPRING_PROPS,originY:IMAGE_SCALE_SPRING_PROPS,scaleX:IMAGE_SCALE_SPRING_PROPS,scaleY:IMAGE_SCALE_SPRING_PROPS,translateX:IMAGE_SCALE_SPRING_PROPS,translateY:IMAGE_SCALE_SPRING_PROPS,rotateZ:IMAGE_SCALE_SPRING_PROPS}},create:function create(_ref2){var root=_ref2.root,props=_ref2.props;props.width=props.image.width;props.height=props.image.height;root.ref.bitmap=root.appendChildView(root.createChildView(createBitmapView(_),{image:props.image}));},write:function write(_ref3){var root=_ref3.root,props=_ref3.props;var flip=props.crop.flip;var bitmap=root.ref.bitmap;bitmap.scaleX=flip.horizontal?-1:1;bitmap.scaleY=flip.vertical?-1:1;}});};var createClipView=function createClipView(_){return _.utils.createView({name:'image-clip',tag:'div',ignoreRect:true,mixins:{apis:['crop','markup','resize','width','height','dirty','background'],styles:['width','height','opacity'],animations:{opacity:{type:'tween',duration:250}}},didWriteView:function didWriteView(_ref4){var root=_ref4.root,props=_ref4.props;if(!props.background)return;root.element.style.backgroundColor=props.background;},create:function create(_ref5){var root=_ref5.root,props=_ref5.props;root.ref.image=root.appendChildView(root.createChildView(createImageCanvasWrapper(_),Object.assign({},props)));root.ref.createMarkup=function(){if(root.ref.markup)return;root.ref.markup=root.appendChildView(root.createChildView(createMarkupView(_),Object.assign({},props)));};root.ref.destroyMarkup=function(){if(!root.ref.markup)return;root.removeChildView(root.ref.markup);root.ref.markup=null;};var transparencyIndicator=root.query('GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR');if(transparencyIndicator===null)return;if(transparencyIndicator==='grid'){root.element.dataset.transparencyIndicator=transparencyIndicator;}
else{root.element.dataset.transparencyIndicator='color';}},write:function write(_ref6){var root=_ref6.root,props=_ref6.props,shouldOptimize=_ref6.shouldOptimize;var crop=props.crop,markup=props.markup,resize=props.resize,dirty=props.dirty,width=props.width,height=props.height;root.ref.image.crop=crop;var stage={x:0,y:0,width:width,height:height,center:{x:width*0.5,y:height*0.5}};var image={width:root.ref.image.width,height:root.ref.image.height};var origin={x:crop.center.x*image.width,y:crop.center.y*image.height};var translation={x:stage.center.x-image.width*crop.center.x,y:stage.center.y-image.height*crop.center.y};var rotation=Math.PI*2+(crop.rotation%(Math.PI*2));var cropAspectRatio=crop.aspectRatio||image.height/image.width;var shouldLimit=typeof crop.scaleToFit==='undefined'||crop.scaleToFit;var stageZoomFactor=getImageRectZoomFactor(image,getCenteredCropRect(stage,cropAspectRatio),rotation,shouldLimit?crop.center:{x:0.5,y:0.5});var scale=crop.zoom*stageZoomFactor;if(markup&&markup.length){root.ref.createMarkup();root.ref.markup.width=width;root.ref.markup.height=height;root.ref.markup.resize=resize;root.ref.markup.dirty=dirty;root.ref.markup.markup=markup;root.ref.markup.crop=getCurrentCropSize(image,crop);}else if(root.ref.markup){root.ref.destroyMarkup();}
var imageView=root.ref.image;if(shouldOptimize){imageView.originX=null;imageView.originY=null;imageView.translateX=null;imageView.translateY=null;imageView.rotateZ=null;imageView.scaleX=null;imageView.scaleY=null;return;}
imageView.originX=origin.x;imageView.originY=origin.y;imageView.translateX=translation.x;imageView.translateY=translation.y;imageView.rotateZ=rotation;imageView.scaleX=scale;imageView.scaleY=scale;}});};var createImageView=function createImageView(_){return _.utils.createView({name:'image-preview',tag:'div',ignoreRect:true,mixins:{apis:['image','crop','markup','resize','dirty','background'],styles:['translateY','scaleX','scaleY','opacity'],animations:{scaleX:IMAGE_SCALE_SPRING_PROPS,scaleY:IMAGE_SCALE_SPRING_PROPS,translateY:IMAGE_SCALE_SPRING_PROPS,opacity:{type:'tween',duration:400}}},create:function create(_ref7){var root=_ref7.root,props=_ref7.props;root.ref.clip=root.appendChildView(root.createChildView(createClipView(_),{id:props.id,image:props.image,crop:props.crop,markup:props.markup,resize:props.resize,dirty:props.dirty,background:props.background}));},write:function write(_ref8){var root=_ref8.root,props=_ref8.props,shouldOptimize=_ref8.shouldOptimize;var clip=root.ref.clip;var image=props.image,crop=props.crop,markup=props.markup,resize=props.resize,dirty=props.dirty;clip.crop=crop;clip.markup=markup;clip.resize=resize;clip.dirty=dirty;clip.opacity=shouldOptimize?0:1;if(shouldOptimize||root.rect.element.hidden)return;var imageAspectRatio=image.height/image.width;var aspectRatio=crop.aspectRatio||imageAspectRatio;var containerWidth=root.rect.inner.width;var containerHeight=root.rect.inner.height;var fixedPreviewHeight=root.query('GET_IMAGE_PREVIEW_HEIGHT');var minPreviewHeight=root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');var maxPreviewHeight=root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');var panelAspectRatio=root.query('GET_PANEL_ASPECT_RATIO');var allowMultiple=root.query('GET_ALLOW_MULTIPLE');if(panelAspectRatio&&!allowMultiple){fixedPreviewHeight=containerWidth*panelAspectRatio;aspectRatio=panelAspectRatio;}
var clipHeight=fixedPreviewHeight!==null?fixedPreviewHeight:Math.max(minPreviewHeight,Math.min(containerWidth*aspectRatio,maxPreviewHeight));var clipWidth=clipHeight/aspectRatio;if(clipWidth>containerWidth){clipWidth=containerWidth;clipHeight=clipWidth*aspectRatio;}
if(clipHeight>containerHeight){clipHeight=containerHeight;clipWidth=containerHeight/aspectRatio;}
clip.width=clipWidth;clip.height=clipHeight;}});};var SVG_MASK='<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">\n    <defs>\n        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">\n            <stop offset=\'50%\' stop-color=\'#000000\'/>\n            <stop offset=\'56%\' stop-color=\'#0a0a0a\'/>\n            <stop offset=\'63%\' stop-color=\'#262626\'/>\n            <stop offset=\'69%\' stop-color=\'#4f4f4f\'/>\n            <stop offset=\'75%\' stop-color=\'#808080\'/>\n            <stop offset=\'81%\' stop-color=\'#b1b1b1\'/>\n            <stop offset=\'88%\' stop-color=\'#dadada\'/>\n            <stop offset=\'94%\' stop-color=\'#f6f6f6\'/>\n            <stop offset=\'100%\' stop-color=\'#ffffff\'/>\n        </radialGradient>\n        <mask id="mask-__UID__">\n            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>\n        </mask>\n    </defs>\n    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>\n</svg>';var SVGMaskUniqueId=0;var createImageOverlayView=function createImageOverlayView(fpAPI){return fpAPI.utils.createView({name:'image-preview-overlay',tag:'div',ignoreRect:true,create:function create(_ref){var root=_ref.root,props=_ref.props;var mask=SVG_MASK;if(document.querySelector('base')){var url=new URL(window.location.href.replace(window.location.hash,'')).href;mask=mask.replace(/url\(\#/g,'url('+url+'#');}
SVGMaskUniqueId++;root.element.classList.add('filepond--image-preview-overlay-'.concat(props.status));root.element.innerHTML=mask.replace(/__UID__/g,SVGMaskUniqueId);},mixins:{styles:['opacity'],animations:{opacity:{type:'spring',mass:25}}}});};var BitmapWorker=function BitmapWorker(){self.onmessage=function(e){createImageBitmap(e.data.message.file).then(function(bitmap){self.postMessage({id:e.data.id,message:bitmap},[bitmap]);});};};var ColorMatrixWorker=function ColorMatrixWorker(){self.onmessage=function(e){var imageData=e.data.message.imageData;var matrix=e.data.message.colorMatrix;var data=imageData.data;var l=data.length;var m11=matrix[0];var m12=matrix[1];var m13=matrix[2];var m14=matrix[3];var m15=matrix[4];var m21=matrix[5];var m22=matrix[6];var m23=matrix[7];var m24=matrix[8];var m25=matrix[9];var m31=matrix[10];var m32=matrix[11];var m33=matrix[12];var m34=matrix[13];var m35=matrix[14];var m41=matrix[15];var m42=matrix[16];var m43=matrix[17];var m44=matrix[18];var m45=matrix[19];var index=0,r=0.0,g=0.0,b=0.0,a=0.0;for(;index<l;index+=4){r=data[index]/255;g=data[index+1]/255;b=data[index+2]/255;a=data[index+3]/255;data[index]=Math.max(0,Math.min((r*m11+g*m12+b*m13+a*m14+m15)*255,255));data[index+1]=Math.max(0,Math.min((r*m21+g*m22+b*m23+a*m24+m25)*255,255));data[index+2]=Math.max(0,Math.min((r*m31+g*m32+b*m33+a*m34+m35)*255,255));data[index+3]=Math.max(0,Math.min((r*m41+g*m42+b*m43+a*m44+m45)*255,255));}
self.postMessage({id:e.data.id,message:imageData},[imageData.data.buffer]);};};var getImageSize=function getImageSize(url,cb){var image=new Image();image.onload=function(){var width=image.naturalWidth;var height=image.naturalHeight;image=null;cb(width,height);};image.src=url;};var transforms={1:function _(){return[1,0,0,1,0,0];},2:function _(width){return[-1,0,0,1,width,0];},3:function _(width,height){return[-1,0,0,-1,width,height];},4:function _(width,height){return[1,0,0,-1,0,height];},5:function _(){return[0,1,1,0,0,0];},6:function _(width,height){return[0,1,-1,0,height,0];},7:function _(width,height){return[0,-1,-1,0,height,width];},8:function _(width){return[0,-1,1,0,0,width];}};var fixImageOrientation=function fixImageOrientation(ctx,width,height,orientation){if(orientation===-1){return;}
ctx.transform.apply(ctx,transforms[orientation](width,height));};var createPreviewImage=function createPreviewImage(data,width,height,orientation){width=Math.round(width);height=Math.round(height);var canvas=document.createElement('canvas');canvas.width=width;canvas.height=height;var ctx=canvas.getContext('2d');if(orientation>=5&&orientation<=8){var _ref=[height,width];width=_ref[0];height=_ref[1];}
fixImageOrientation(ctx,width,height,orientation);ctx.drawImage(data,0,0,width,height);return canvas;};var isBitmap=function isBitmap(file){return/^image/.test(file.type)&&!/svg/.test(file.type);};var MAX_WIDTH=10;var MAX_HEIGHT=10;var calculateAverageColor=function calculateAverageColor(image){var scalar=Math.min(MAX_WIDTH/image.width,MAX_HEIGHT/image.height);var canvas=document.createElement('canvas');var ctx=canvas.getContext('2d');var width=(canvas.width=Math.ceil(image.width*scalar));var height=(canvas.height=Math.ceil(image.height*scalar));ctx.drawImage(image,0,0,width,height);var data=null;try{data=ctx.getImageData(0,0,width,height).data;}catch(e){return null;}
var l=data.length;var r=0;var g=0;var b=0;var i=0;for(;i<l;i+=4){r+=data[i]*data[i];g+=data[i+1]*data[i+1];b+=data[i+2]*data[i+2];}
r=averageColor(r,l);g=averageColor(g,l);b=averageColor(b,l);return{r:r,g:g,b:b};};var averageColor=function averageColor(c,l){return Math.floor(Math.sqrt(c/(l/4)));};var cloneCanvas=function cloneCanvas(origin,target){target=target||document.createElement('canvas');target.width=origin.width;target.height=origin.height;var ctx=target.getContext('2d');ctx.drawImage(origin,0,0);return target;};var cloneImageData=function cloneImageData(imageData){var id;try{id=new ImageData(imageData.width,imageData.height);}catch(e){var canvas=document.createElement('canvas');var ctx=canvas.getContext('2d');id=ctx.createImageData(imageData.width,imageData.height);}
id.data.set(new Uint8ClampedArray(imageData.data));return id;};var loadImage=function loadImage(url){return new Promise(function(resolve,reject){var img=new Image();img.crossOrigin='Anonymous';img.onload=function(){resolve(img);};img.onerror=function(e){reject(e);};img.src=url;});};var createImageWrapperView=function createImageWrapperView(_){var OverlayView=createImageOverlayView(_);var ImageView=createImageView(_);var createWorker=_.utils.createWorker;var applyFilter=function applyFilter(root,filter,target){return new Promise(function(resolve){if(!root.ref.imageData){root.ref.imageData=target.getContext('2d').getImageData(0,0,target.width,target.height);}
var imageData=cloneImageData(root.ref.imageData);if(!filter||filter.length!==20){target.getContext('2d').putImageData(imageData,0,0);return resolve();}
var worker=createWorker(ColorMatrixWorker);worker.post({imageData:imageData,colorMatrix:filter},function(response){target.getContext('2d').putImageData(response,0,0);worker.terminate();resolve();},[imageData.data.buffer]);});};var removeImageView=function removeImageView(root,imageView){root.removeChildView(imageView);imageView.image.width=1;imageView.image.height=1;imageView._destroy();};var shiftImage=function shiftImage(_ref){var root=_ref.root;var imageView=root.ref.images.shift();imageView.opacity=0;imageView.translateY=-15;root.ref.imageViewBin.push(imageView);return imageView;};var pushImage=function pushImage(_ref2){var root=_ref2.root,props=_ref2.props,image=_ref2.image;var id=props.id;var item=root.query('GET_ITEM',{id:id});if(!item)return;var crop=item.getMetadata('crop')||{center:{x:0.5,y:0.5},flip:{horizontal:false,vertical:false},zoom:1,rotation:0,aspectRatio:null};var background=root.query('GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR');var markup;var resize;var dirty=false;if(root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')){markup=item.getMetadata('markup')||[];resize=item.getMetadata('resize');dirty=true;}
var imageView=root.appendChildView(root.createChildView(ImageView,{id:id,image:image,crop:crop,resize:resize,markup:markup,dirty:dirty,background:background,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),root.childViews.length);root.ref.images.push(imageView);imageView.opacity=1;imageView.scaleX=1;imageView.scaleY=1;imageView.translateY=0;setTimeout(function(){root.dispatch('DID_IMAGE_PREVIEW_SHOW',{id:id});},250);};var updateImage=function updateImage(_ref3){var root=_ref3.root,props=_ref3.props;var item=root.query('GET_ITEM',{id:props.id});if(!item)return;var imageView=root.ref.images[root.ref.images.length-1];imageView.crop=item.getMetadata('crop');imageView.background=root.query('GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR');if(root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')){imageView.dirty=true;imageView.resize=item.getMetadata('resize');imageView.markup=item.getMetadata('markup');}};var didUpdateItemMetadata=function didUpdateItemMetadata(_ref4){var root=_ref4.root,props=_ref4.props,action=_ref4.action;if(!/crop|filter|markup|resize/.test(action.change.key))return;if(!root.ref.images.length)return;var item=root.query('GET_ITEM',{id:props.id});if(!item)return;if(/filter/.test(action.change.key)){var imageView=root.ref.images[root.ref.images.length-1];applyFilter(root,action.change.value,imageView.image);return;}
if(/crop|markup|resize/.test(action.change.key)){var crop=item.getMetadata('crop');var image=root.ref.images[root.ref.images.length-1];if(crop&&crop.aspectRatio&&image.crop&&image.crop.aspectRatio&&Math.abs(crop.aspectRatio-image.crop.aspectRatio)>0.00001){var _imageView=shiftImage({root:root});pushImage({root:root,props:props,image:cloneCanvas(_imageView.image)});}
else{updateImage({root:root,props:props});}}};var canCreateImageBitmap=function canCreateImageBitmap(file){var userAgent=window.navigator.userAgent;var isFirefox=userAgent.match(/Firefox\/([0-9]+)\./);var firefoxVersion=isFirefox?parseInt(isFirefox[1]):null;if(firefoxVersion!==null&&firefoxVersion<=58)return false;return'createImageBitmap'in window&&isBitmap(file);};var didCreatePreviewContainer=function didCreatePreviewContainer(_ref5){var root=_ref5.root,props=_ref5.props;var id=props.id;var item=root.query('GET_ITEM',id);if(!item)return;var fileURL=URL.createObjectURL(item.file);getImageSize(fileURL,function(width,height){root.dispatch('DID_IMAGE_PREVIEW_CALCULATE_SIZE',{id:id,width:width,height:height});});};var drawPreview=function drawPreview(_ref6){var root=_ref6.root,props=_ref6.props;var id=props.id;var item=root.query('GET_ITEM',id);if(!item)return;var fileURL=URL.createObjectURL(item.file);var loadPreviewFallback=function loadPreviewFallback(){loadImage(fileURL).then(previewImageLoaded);};var previewImageLoaded=function previewImageLoaded(imageData){URL.revokeObjectURL(fileURL);var exif=item.getMetadata('exif')||{};var orientation=exif.orientation||-1;var width=imageData.width,height=imageData.height;if(!width||!height)return;if(orientation>=5&&orientation<=8){var _ref7=[height,width];width=_ref7[0];height=_ref7[1];}
var pixelDensityFactor=Math.max(1,window.devicePixelRatio*0.75);var zoomFactor=root.query('GET_IMAGE_PREVIEW_ZOOM_FACTOR');var scaleFactor=zoomFactor*pixelDensityFactor;var previewImageRatio=height/width;var previewContainerWidth=root.rect.element.width;var previewContainerHeight=root.rect.element.height;var imageWidth=previewContainerWidth;var imageHeight=imageWidth*previewImageRatio;if(previewImageRatio>1){imageWidth=Math.min(width,previewContainerWidth*scaleFactor);imageHeight=imageWidth*previewImageRatio;}else{imageHeight=Math.min(height,previewContainerHeight*scaleFactor);imageWidth=imageHeight/previewImageRatio;}
var previewImage=createPreviewImage(imageData,imageWidth,imageHeight,orientation);var done=function done(){var averageColor=root.query('GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR')?calculateAverageColor(data):null;item.setMetadata('color',averageColor,true);if('close'in imageData){imageData.close();}
root.ref.overlayShadow.opacity=1;pushImage({root:root,props:props,image:previewImage});};var filter=item.getMetadata('filter');if(filter){applyFilter(root,filter,previewImage).then(done);}else{done();}};if(canCreateImageBitmap(item.file)){var worker=createWorker(BitmapWorker);worker.post({file:item.file},function(imageBitmap){worker.terminate();if(!imageBitmap){loadPreviewFallback();return;}
previewImageLoaded(imageBitmap);});}else{loadPreviewFallback();}};var didDrawPreview=function didDrawPreview(_ref8){var root=_ref8.root;var image=root.ref.images[root.ref.images.length-1];image.translateY=0;image.scaleX=1.0;image.scaleY=1.0;image.opacity=1;};var restoreOverlay=function restoreOverlay(_ref9){var root=_ref9.root;root.ref.overlayShadow.opacity=1;root.ref.overlayError.opacity=0;root.ref.overlaySuccess.opacity=0;};var didThrowError=function didThrowError(_ref10){var root=_ref10.root;root.ref.overlayShadow.opacity=0.25;root.ref.overlayError.opacity=1;};var didCompleteProcessing=function didCompleteProcessing(_ref11){var root=_ref11.root;root.ref.overlayShadow.opacity=0.25;root.ref.overlaySuccess.opacity=1;};var create=function create(_ref12){var root=_ref12.root;root.ref.images=[];root.ref.imageData=null;root.ref.imageViewBin=[];root.ref.overlayShadow=root.appendChildView(root.createChildView(OverlayView,{opacity:0,status:'idle'}));root.ref.overlaySuccess=root.appendChildView(root.createChildView(OverlayView,{opacity:0,status:'success'}));root.ref.overlayError=root.appendChildView(root.createChildView(OverlayView,{opacity:0,status:'failure'}));};return _.utils.createView({name:'image-preview-wrapper',create:create,styles:['height'],apis:['height'],destroy:function destroy(_ref13){var root=_ref13.root;root.ref.images.forEach(function(imageView){imageView.image.width=1;imageView.image.height=1;});},didWriteView:function didWriteView(_ref14){var root=_ref14.root;root.ref.images.forEach(function(imageView){imageView.dirty=false;});},write:_.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:didDrawPreview,DID_IMAGE_PREVIEW_CONTAINER_CREATE:didCreatePreviewContainer,DID_FINISH_CALCULATE_PREVIEWSIZE:drawPreview,DID_UPDATE_ITEM_METADATA:didUpdateItemMetadata,DID_THROW_ITEM_LOAD_ERROR:didThrowError,DID_THROW_ITEM_PROCESSING_ERROR:didThrowError,DID_THROW_ITEM_INVALID:didThrowError,DID_COMPLETE_ITEM_PROCESSING:didCompleteProcessing,DID_START_ITEM_PROCESSING:restoreOverlay,DID_REVERT_ITEM_PROCESSING:restoreOverlay},function(_ref15){var root=_ref15.root;var viewsToRemove=root.ref.imageViewBin.filter(function(imageView){return imageView.opacity===0;});root.ref.imageViewBin=root.ref.imageViewBin.filter(function(imageView){return imageView.opacity>0;});viewsToRemove.forEach(function(imageView){return removeImageView(root,imageView);});viewsToRemove.length=0;})});};var plugin=function plugin(fpAPI){var addFilter=fpAPI.addFilter,utils=fpAPI.utils;var Type=utils.Type,createRoute=utils.createRoute,isFile=utils.isFile;var imagePreviewView=createImageWrapperView(fpAPI);addFilter('CREATE_VIEW',function(viewAPI){var is=viewAPI.is,view=viewAPI.view,query=viewAPI.query;if(!is('file')||!query('GET_ALLOW_IMAGE_PREVIEW'))return;var didLoadItem=function didLoadItem(_ref){var root=_ref.root,props=_ref.props;var id=props.id;var item=query('GET_ITEM',id);if(!item||!isFile(item.file)||item.archived)return;var file=item.file;if(!isPreviewableImage(file))return;if(!query('GET_IMAGE_PREVIEW_FILTER_ITEM')(item))return;var supportsCreateImageBitmap='createImageBitmap'in(window||{});var maxPreviewFileSize=query('GET_IMAGE_PREVIEW_MAX_FILE_SIZE');if(!supportsCreateImageBitmap&&maxPreviewFileSize&&file.size>maxPreviewFileSize)
return;root.ref.imagePreview=view.appendChildView(view.createChildView(imagePreviewView,{id:id}));var fixedPreviewHeight=root.query('GET_IMAGE_PREVIEW_HEIGHT');if(fixedPreviewHeight){root.dispatch('DID_UPDATE_PANEL_HEIGHT',{id:item.id,height:fixedPreviewHeight});}
var queue=!supportsCreateImageBitmap&&file.size>query('GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE');root.dispatch('DID_IMAGE_PREVIEW_CONTAINER_CREATE',{id:id},queue);};var rescaleItem=function rescaleItem(root,props){if(!root.ref.imagePreview)return;var id=props.id;var item=root.query('GET_ITEM',{id:id});if(!item)return;var panelAspectRatio=root.query('GET_PANEL_ASPECT_RATIO');var itemPanelAspectRatio=root.query('GET_ITEM_PANEL_ASPECT_RATIO');var fixedHeight=root.query('GET_IMAGE_PREVIEW_HEIGHT');if(panelAspectRatio||itemPanelAspectRatio||fixedHeight)return;var _root$ref=root.ref,imageWidth=_root$ref.imageWidth,imageHeight=_root$ref.imageHeight;if(!imageWidth||!imageHeight)return;var minPreviewHeight=root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');var maxPreviewHeight=root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');var exif=item.getMetadata('exif')||{};var orientation=exif.orientation||-1;if(orientation>=5&&orientation<=8){var _ref2=[imageHeight,imageWidth];imageWidth=_ref2[0];imageHeight=_ref2[1];}
if(!isBitmap(item.file)||root.query('GET_IMAGE_PREVIEW_UPSCALE')){var scalar=2048/imageWidth;imageWidth*=scalar;imageHeight*=scalar;}
var imageAspectRatio=imageHeight/imageWidth;var previewAspectRatio=(item.getMetadata('crop')||{}).aspectRatio||imageAspectRatio;var previewHeightMax=Math.max(minPreviewHeight,Math.min(imageHeight,maxPreviewHeight));var itemWidth=root.rect.element.width;var previewHeight=Math.min(itemWidth*previewAspectRatio,previewHeightMax);root.dispatch('DID_UPDATE_PANEL_HEIGHT',{id:item.id,height:previewHeight});};var didResizeView=function didResizeView(_ref3){var root=_ref3.root;root.ref.shouldRescale=true;};var didUpdateItemMetadata=function didUpdateItemMetadata(_ref4){var root=_ref4.root,action=_ref4.action;if(action.change.key!=='crop')return;root.ref.shouldRescale=true;};var didCalculatePreviewSize=function didCalculatePreviewSize(_ref5){var root=_ref5.root,action=_ref5.action;root.ref.imageWidth=action.width;root.ref.imageHeight=action.height;root.ref.shouldRescale=true;root.ref.shouldDrawPreview=true;root.dispatch('KICK');};view.registerWriter(createRoute({DID_RESIZE_ROOT:didResizeView,DID_STOP_RESIZE:didResizeView,DID_LOAD_ITEM:didLoadItem,DID_IMAGE_PREVIEW_CALCULATE_SIZE:didCalculatePreviewSize,DID_UPDATE_ITEM_METADATA:didUpdateItemMetadata},function(_ref6){var root=_ref6.root,props=_ref6.props;if(!root.ref.imagePreview)return;if(root.rect.element.hidden)return;if(root.ref.shouldRescale){rescaleItem(root,props);root.ref.shouldRescale=false;}
if(root.ref.shouldDrawPreview){requestAnimationFrame(function(){requestAnimationFrame(function(){root.dispatch('DID_FINISH_CALCULATE_PREVIEWSIZE',{id:props.id});});});root.ref.shouldDrawPreview=false;}}));});return{options:{allowImagePreview:[true,Type.BOOLEAN],imagePreviewFilterItem:[function(){return true;},Type.FUNCTION],imagePreviewHeight:[null,Type.INT],imagePreviewMinHeight:[44,Type.INT],imagePreviewMaxHeight:[256,Type.INT],imagePreviewMaxFileSize:[null,Type.INT],imagePreviewZoomFactor:[2,Type.INT],imagePreviewUpscale:[false,Type.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1000000,Type.INT],imagePreviewTransparencyIndicator:[null,Type.STRING],imagePreviewCalculateAverageImageColor:[false,Type.BOOLEAN],imagePreviewMarkupShow:[true,Type.BOOLEAN],imagePreviewMarkupFilter:[function(){return true;},Type.FUNCTION]}};};var isBrowser=typeof window!=='undefined'&&typeof window.document!=='undefined';if(isBrowser){document.dispatchEvent(new CustomEvent('FilePond:pluginloaded',{detail:plugin}));}
return plugin;});;const inputElement=document.querySelector('input[type="file"]');const pond=FilePond.create(inputElement);FilePond.registerPlugin(FilePondPluginImagePreview);;